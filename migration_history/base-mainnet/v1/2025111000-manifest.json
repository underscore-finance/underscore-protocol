{
  "contracts": {
    "LootDistributor": {
      "address": "0x2D775AfA205729b8e74F9215611Ed700f564910C",
      "abi": [
        {
          "name": "TransactionFeePaid",
          "inputs": [
            {
              "name": "user",
              "type": "address",
              "indexed": true
            },
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "feeAmount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "action",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "RevenueTransferredToGov",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "amount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "action",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "YieldPerformanceFeePaid",
          "inputs": [
            {
              "name": "user",
              "type": "address",
              "indexed": true
            },
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "feeAmount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "yieldRealized",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "AmbassadorTxFeePaid",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "totalFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorFeeRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassador",
              "type": "address",
              "indexed": true
            },
            {
              "name": "action",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "YieldBonusPaid",
          "inputs": [
            {
              "name": "bonusAsset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "bonusAmount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "bonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "yieldRealized",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "recipient",
              "type": "address",
              "indexed": true
            },
            {
              "name": "isAmbassador",
              "type": "bool",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "LootAdjusted",
          "inputs": [
            {
              "name": "user",
              "type": "address",
              "indexed": true
            },
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "newClaimable",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "LootClaimed",
          "inputs": [
            {
              "name": "user",
              "type": "address",
              "indexed": true
            },
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "amount",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DepositRewardsAdded",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "addedAmount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "newTotalAmount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "adder",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DepositRewardsClaimed",
          "inputs": [
            {
              "name": "user",
              "type": "address",
              "indexed": true
            },
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "userRewards",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "remainingRewards",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DepositRewardsRecovered",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "recipient",
              "type": "address",
              "indexed": true
            },
            {
              "name": "amount",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "RipeRewardsConfigSet",
          "inputs": [
            {
              "name": "ripeStakeRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ripeLockDuration",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DepartmentPauseModified",
          "inputs": [
            {
              "name": "isPaused",
              "type": "bool",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DepartmentFundsRecovered",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": true
            },
            {
              "name": "recipient",
              "type": "address",
              "indexed": true
            },
            {
              "name": "balance",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getAddys",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "hq",
                  "type": "address"
                },
                {
                  "name": "undyToken",
                  "type": "address"
                },
                {
                  "name": "ledger",
                  "type": "address"
                },
                {
                  "name": "missionControl",
                  "type": "address"
                },
                {
                  "name": "legoBook",
                  "type": "address"
                },
                {
                  "name": "switchboard",
                  "type": "address"
                },
                {
                  "name": "hatchery",
                  "type": "address"
                },
                {
                  "name": "lootDistributor",
                  "type": "address"
                },
                {
                  "name": "appraiser",
                  "type": "address"
                },
                {
                  "name": "walletBackpack",
                  "type": "address"
                },
                {
                  "name": "billing",
                  "type": "address"
                },
                {
                  "name": "vaultRegistry",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getUndyHq",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "canMintUndy",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "pause",
          "inputs": [
            {
              "name": "_shouldPause",
              "type": "bool"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "recoverFunds",
          "inputs": [
            {
              "name": "_recipient",
              "type": "address"
            },
            {
              "name": "_asset",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "recoverFundsMany",
          "inputs": [
            {
              "name": "_recipient",
              "type": "address"
            },
            {
              "name": "_assets",
              "type": "address[]"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isPaused",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addLootFromSwapOrRewards",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_feeAmount",
              "type": "uint256"
            },
            {
              "name": "_action",
              "type": "uint256"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addLootFromSwapOrRewards",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_feeAmount",
              "type": "uint256"
            },
            {
              "name": "_action",
              "type": "uint256"
            },
            {
              "name": "_missionControl",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addLootFromYieldProfit",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_feeAmount",
              "type": "uint256"
            },
            {
              "name": "_yieldRealized",
              "type": "uint256"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addLootFromYieldProfit",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_feeAmount",
              "type": "uint256"
            },
            {
              "name": "_yieldRealized",
              "type": "uint256"
            },
            {
              "name": "_missionControl",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addLootFromYieldProfit",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_feeAmount",
              "type": "uint256"
            },
            {
              "name": "_yieldRealized",
              "type": "uint256"
            },
            {
              "name": "_missionControl",
              "type": "address"
            },
            {
              "name": "_appraiser",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addLootFromYieldProfit",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_feeAmount",
              "type": "uint256"
            },
            {
              "name": "_yieldRealized",
              "type": "uint256"
            },
            {
              "name": "_missionControl",
              "type": "address"
            },
            {
              "name": "_appraiser",
              "type": "address"
            },
            {
              "name": "_legoBook",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "claimRevShareAndBonusLoot",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getClaimableLootForAsset",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_asset",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getTotalClaimableAssets",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "adjustLoot",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_newClaimable",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "updateDepositPoints",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "updateDepositPointsWithNewValue",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_newUsdValue",
              "type": "uint256"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "updateDepositPointsOnEjection",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getLatestDepositPoints",
          "inputs": [
            {
              "name": "_usdValue",
              "type": "uint256"
            },
            {
              "name": "_lastUpdate",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isValidWalletConfig",
          "inputs": [
            {
              "name": "_wallet",
              "type": "address"
            },
            {
              "name": "_caller",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "claimDepositRewards",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getClaimableDepositRewards",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addDepositRewards",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_amount",
              "type": "uint256"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "recoverDepositRewards",
          "inputs": [
            {
              "name": "_recipient",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getSwapFee",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_tokenIn",
              "type": "address"
            },
            {
              "name": "_tokenOut",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getSwapFee",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_tokenIn",
              "type": "address"
            },
            {
              "name": "_tokenOut",
              "type": "address"
            },
            {
              "name": "_missionControl",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getRewardsFee",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_asset",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getRewardsFee",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_missionControl",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "claimAllLoot",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "validateCanClaimLoot",
          "inputs": [
            {
              "name": "_user",
              "type": "address"
            },
            {
              "name": "_caller",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getLootDistroConfig",
          "inputs": [
            {
              "name": "_wallet",
              "type": "address"
            },
            {
              "name": "_asset",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "ambassador",
                  "type": "address"
                },
                {
                  "name": "ambassadorRevShare",
                  "type": "tuple",
                  "components": [
                    {
                      "name": "swapRatio",
                      "type": "uint256"
                    },
                    {
                      "name": "rewardsRatio",
                      "type": "uint256"
                    },
                    {
                      "name": "yieldRatio",
                      "type": "uint256"
                    }
                  ]
                },
                {
                  "name": "ambassadorBonusRatio",
                  "type": "uint256"
                },
                {
                  "name": "bonusRatio",
                  "type": "uint256"
                },
                {
                  "name": "altBonusAsset",
                  "type": "address"
                },
                {
                  "name": "underlyingAsset",
                  "type": "address"
                },
                {
                  "name": "decimals",
                  "type": "uint256"
                },
                {
                  "name": "legoId",
                  "type": "uint256"
                },
                {
                  "name": "legoAddr",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getLootDistroConfig",
          "inputs": [
            {
              "name": "_wallet",
              "type": "address"
            },
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_shouldGetLegoInfo",
              "type": "bool"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "ambassador",
                  "type": "address"
                },
                {
                  "name": "ambassadorRevShare",
                  "type": "tuple",
                  "components": [
                    {
                      "name": "swapRatio",
                      "type": "uint256"
                    },
                    {
                      "name": "rewardsRatio",
                      "type": "uint256"
                    },
                    {
                      "name": "yieldRatio",
                      "type": "uint256"
                    }
                  ]
                },
                {
                  "name": "ambassadorBonusRatio",
                  "type": "uint256"
                },
                {
                  "name": "bonusRatio",
                  "type": "uint256"
                },
                {
                  "name": "altBonusAsset",
                  "type": "address"
                },
                {
                  "name": "underlyingAsset",
                  "type": "address"
                },
                {
                  "name": "decimals",
                  "type": "uint256"
                },
                {
                  "name": "legoId",
                  "type": "uint256"
                },
                {
                  "name": "legoAddr",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setRipeRewardsConfig",
          "inputs": [
            {
              "name": "_ripeStakeRatio",
              "type": "uint256"
            },
            {
              "name": "_ripeLockDuration",
              "type": "uint256"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "lastClaim",
          "inputs": [
            {
              "name": "arg0",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "totalClaimableLoot",
          "inputs": [
            {
              "name": "arg0",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "claimableLoot",
          "inputs": [
            {
              "name": "arg0",
              "type": "address"
            },
            {
              "name": "arg1",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "claimableAssets",
          "inputs": [
            {
              "name": "arg0",
              "type": "address"
            },
            {
              "name": "arg1",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "indexOfClaimableAsset",
          "inputs": [
            {
              "name": "arg0",
              "type": "address"
            },
            {
              "name": "arg1",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "numClaimableAssets",
          "inputs": [
            {
              "name": "arg0",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "depositRewards",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "asset",
                  "type": "address"
                },
                {
                  "name": "amount",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "ripeStakeRatio",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "ripeLockDuration",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "RIPE_TOKEN",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "RIPE_REGISTRY",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "constructor",
          "inputs": [
            {
              "name": "_undyHq",
              "type": "address"
            },
            {
              "name": "_ripeToken",
              "type": "address"
            },
            {
              "name": "_ripeRegistry",
              "type": "address"
            },
            {
              "name": "_ripeStakeRatio",
              "type": "uint256"
            },
            {
              "name": "_ripeLockDuration",
              "type": "uint256"
            }
          ],
          "outputs": []
        }
      ],
      "solc_json": {
        "language": "Vyper",
        "sources": {
          "contracts/modules/Addys.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\ninterface UndyHq:\n    def isValidAddr(_addr: address) -> bool: view\n    def getAddr(_regId: uint256) -> address: view\n    def undyToken() -> address: view\n\ninterface Switchboard:\n    def isSwitchboardAddr(_addr: address) -> bool: view\n\ninterface LegoBook:\n    def isLegoAddr(_addr: address) -> bool: view\n\nstruct Addys:\n    hq: address\n    undyToken: address\n    ledger: address\n    missionControl: address\n    legoBook: address\n    switchboard: address\n    hatchery: address\n    lootDistributor: address\n    appraiser: address\n    walletBackpack: address\n    billing: address\n    vaultRegistry: address\n\n# hq\nUNDY_HQ_FOR_ADDYS: immutable(address)\n\n# core addys\nLEDGER_ID: constant(uint256) = 1\nMISSION_CONTROL_ID: constant(uint256) = 2\nLEGO_BOOK_ID: constant(uint256) = 3\nSWITCHBOARD_ID: constant(uint256) = 4\nHATCHERY_ID: constant(uint256) = 5\nLOOT_DISTRIBUTOR_ID: constant(uint256) = 6\nAPPRAISER_ID: constant(uint256) = 7\nWALLET_BACKPACK_ID: constant(uint256) = 8\nBILLING_ID: constant(uint256) = 9\nVAULT_REGISTRY_ID: constant(uint256) = 10\n\n\n@deploy\ndef __init__(_undyHq: address):\n    assert _undyHq != empty(address) # dev: invalid undy hq\n    UNDY_HQ_FOR_ADDYS = _undyHq\n\n\n########\n# Core #\n########\n\n\n@view\n@external\ndef getAddys() -> Addys:\n    return self._generateAddys()\n\n\n@view\n@internal\ndef _getAddys(_addys: Addys = empty(Addys)) -> Addys:\n    if _addys.hq != empty(address):\n        return _addys\n    return self._generateAddys()\n\n\n@view\n@internal\ndef _generateAddys() -> Addys:\n    hq: address = UNDY_HQ_FOR_ADDYS\n    return Addys(\n        hq = hq,\n        undyToken = staticcall UndyHq(hq).undyToken(),\n        ledger = staticcall UndyHq(hq).getAddr(LEDGER_ID),\n        missionControl = staticcall UndyHq(hq).getAddr(MISSION_CONTROL_ID),\n        legoBook = staticcall UndyHq(hq).getAddr(LEGO_BOOK_ID),\n        switchboard = staticcall UndyHq(hq).getAddr(SWITCHBOARD_ID),\n        hatchery = staticcall UndyHq(hq).getAddr(HATCHERY_ID),\n        lootDistributor = staticcall UndyHq(hq).getAddr(LOOT_DISTRIBUTOR_ID),\n        appraiser = staticcall UndyHq(hq).getAddr(APPRAISER_ID),\n        walletBackpack = staticcall UndyHq(hq).getAddr(WALLET_BACKPACK_ID),\n        billing = staticcall UndyHq(hq).getAddr(BILLING_ID),\n        vaultRegistry = staticcall UndyHq(hq).getAddr(VAULT_REGISTRY_ID),\n    )\n\n\n##########\n# Tokens #\n##########\n\n\n@view\n@internal\ndef _getUndyToken() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).undyToken()\n\n\n###########\n# Helpers #\n###########\n\n\n# undy hq\n\n\n@view\n@external\ndef getUndyHq() -> address:\n    return self._getUndyHq()\n\n\n@view\n@internal\ndef _getUndyHq() -> address:\n    return UNDY_HQ_FOR_ADDYS\n\n\n# utils\n\n\n@view\n@internal\ndef _isValidUndyAddr(_addr: address, _hq: address = empty(address)) -> bool:\n    hq: address = _hq\n    if _hq == empty(address):\n        hq = UNDY_HQ_FOR_ADDYS\n    \n    # core departments\n    if staticcall UndyHq(hq).isValidAddr(_addr):\n        return True\n\n    # lego book\n    legoBook: address = staticcall UndyHq(hq).getAddr(LEGO_BOOK_ID)\n    if legoBook != empty(address) and staticcall LegoBook(legoBook).isLegoAddr(_addr):\n        return True\n\n    # switchboard config\n    switchboard: address = staticcall UndyHq(hq).getAddr(SWITCHBOARD_ID)\n    if switchboard != empty(address) and staticcall Switchboard(switchboard).isSwitchboardAddr(_addr):\n        return True\n\n    return False\n\n\n@view\n@internal\ndef _isSwitchboardAddr(_addr: address) -> bool:\n    switchboard: address = staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(SWITCHBOARD_ID)\n    if switchboard == empty(address):\n        return False\n    return staticcall Switchboard(switchboard).isSwitchboardAddr(_addr)\n\n\n@view\n@internal\ndef _isLegoBookAddr(_addr: address) -> bool:\n    legoBook: address = staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEGO_BOOK_ID)\n    if legoBook == empty(address):\n        return False\n    return staticcall LegoBook(legoBook).isLegoAddr(_addr)\n\n\n###############\n# Departments #\n###############\n\n\n# ledger\n\n\n@view\n@internal\ndef _getLedgerId() -> uint256:\n    return LEDGER_ID\n\n\n@view\n@internal\ndef _getLedgerAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEDGER_ID)\n\n\n# mission control\n\n\n@view\n@internal\ndef _getMissionControlId() -> uint256:\n    return MISSION_CONTROL_ID\n\n\n@view\n@internal\ndef _getMissionControlAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(MISSION_CONTROL_ID)\n\n\n# lego book\n\n\n@view\n@internal\ndef _getLegoBookId() -> uint256:\n    return LEGO_BOOK_ID\n\n\n@view\n@internal\ndef _getLegoBookAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEGO_BOOK_ID)\n\n\n# switchboard\n\n\n@view\n@internal\ndef _getSwitchboardId() -> uint256:\n    return SWITCHBOARD_ID\n\n\n@view\n@internal\ndef _getSwitchboardAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(SWITCHBOARD_ID)\n\n\n# hatchery\n\n\n@view\n@internal\ndef _getHatcheryId() -> uint256:\n    return HATCHERY_ID\n\n\n@view\n@internal\ndef _getHatcheryAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(HATCHERY_ID)\n\n\n# loot distributor\n\n\n@view\n@internal\ndef _getLootDistributorId() -> uint256:\n    return LOOT_DISTRIBUTOR_ID\n\n\n@view\n@internal\ndef _getLootDistributorAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LOOT_DISTRIBUTOR_ID)\n\n\n# appraiser\n\n\n@view\n@internal\ndef _getAppraiserId() -> uint256:\n    return APPRAISER_ID\n\n\n@view\n@internal\ndef _getAppraiserAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(APPRAISER_ID)\n\n\n# wallet backpack\n\n\n@view\n@internal\ndef _getWalletBackpackId() -> uint256:\n    return WALLET_BACKPACK_ID\n\n\n@view\n@internal\ndef _getWalletBackpackAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(WALLET_BACKPACK_ID)\n\n\n# billing\n\n\n@view\n@internal\ndef _getBillingId() -> uint256:\n    return BILLING_ID\n\n\n@view\n@internal\ndef _getBillingAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(BILLING_ID)\n\n\n# vault registry\n\n\n@view\n@internal\ndef _getVaultRegistryId() -> uint256:\n    return VAULT_REGISTRY_ID\n\n\n@view\n@internal\ndef _getVaultRegistryAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(VAULT_REGISTRY_ID)",
            "sha256sum": "4df6b72db9bb417d1af81660175be1450cfb7b3575f3d17a5b8a130bff87b781"
          },
          "interfaces/Department.vyi": {
            "content": "# @version 0.4.3\n\n\n###########\n# Minting #\n###########\n\n\n@view\n@external\ndef canMintUndy() -> bool:\n    # used in UndyHq.vy\n    ...\n\n\n########\n# Undy #\n########\n\n\n@view\n@external\ndef isPaused() -> bool:\n    ...\n\n\n@external\ndef pause(_shouldPause: bool):\n    ...\n\n\n@external\ndef recoverFunds(_recipient: address, _asset: address):\n    ...\n\n@external\ndef recoverFundsMany(_recipient: address, _assets: DynArray[address, 20]):\n    ...",
            "sha256sum": "53e48da591c4ee36045a8950c9d3a01458456b471b797df536e9a9f54404e721"
          },
          "contracts/modules/DeptBasics.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\nuses: addys\nimplements: dept\n\nimport contracts.modules.Addys as addys\nimport interfaces.Department as dept\nfrom ethereum.ercs import IERC20\n\nevent DepartmentPauseModified:\n    isPaused: bool\n\nevent DepartmentFundsRecovered:\n    asset: indexed(address)\n    recipient: indexed(address)\n    balance: uint256\n\nisPaused: public(bool)\n\nCAN_MINT_UNDY: immutable(bool)\nMAX_RECOVER_ASSETS: constant(uint256) = 20\n\n\n@deploy\ndef __init__(_shouldPause: bool, _canMintUndy: bool):\n    self.isPaused = _shouldPause\n    CAN_MINT_UNDY = _canMintUndy\n\n\n###########\n# Minting #\n###########\n\n\n@view\n@external\ndef canMintUndy() -> bool:\n    return CAN_MINT_UNDY\n\n\n########\n# Undy #\n########\n\n\n# activate\n\n\n@external\ndef pause(_shouldPause: bool):\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n    assert _shouldPause != self.isPaused # dev: no change\n    self.isPaused = _shouldPause\n    log DepartmentPauseModified(isPaused=_shouldPause)\n\n\n# recover funds\n\n\n@external\ndef recoverFunds(_recipient: address, _asset: address):\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n    self._recoverFunds(_recipient, _asset)\n\n\n@external\ndef recoverFundsMany(_recipient: address, _assets: DynArray[address, MAX_RECOVER_ASSETS]):\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n    for a: address in _assets:\n        self._recoverFunds(_recipient, a)\n\n\n@internal\ndef _recoverFunds(_recipient: address, _asset: address):\n    assert empty(address) not in [_recipient, _asset] # dev: invalid recipient or asset\n    balance: uint256 = staticcall IERC20(_asset).balanceOf(self)\n    assert balance != 0 # dev: nothing to recover\n\n    assert extcall IERC20(_asset).transfer(_recipient, balance, default_return_value=True) # dev: recovery failed\n    log DepartmentFundsRecovered(asset=_asset, recipient=_recipient, balance=balance)\n",
            "sha256sum": "976a50a3807bcf71f3f1c57de5cd7a59fe4e8f27b4d4560e774073962f44d1ac"
          },
          "interfaces/LegoStructs.vyi": {
            "content": "# @version 0.4.3\n\nstruct VaultTokenInfo:\n    underlyingAsset: address\n    decimals: uint256\n    lastAveragePricePerShare: uint256\n\nstruct SnapShotPriceConfig:\n    minSnapshotDelay: uint256\n    maxNumSnapshots: uint256\n    maxUpsideDeviation: uint256\n    staleTime: uint256\n\nstruct SingleSnapShot:\n    totalSupply: uint256\n    pricePerShare: uint256\n    lastUpdate: uint256\n\nstruct SnapShotData:\n    lastSnapShot: SingleSnapShot\n    nextIndex: uint256\n",
            "sha256sum": "8ae48be17d812d57fbd671bbf0593e8abf175ad0924e47c5997823cac19ec806"
          },
          "interfaces/YieldLego.vyi": {
            "content": "# @version 0.4.3\n\nfrom interfaces import LegoStructs as ls\n\n\n###################\n# Underlying Data #\n###################\n\n\n@view\n@external\ndef getUnderlyingAsset(_vaultToken: address) -> address:\n    ...\n\n\n@view\n@external\ndef getUnderlyingBalances(_vaultToken: address, _vaultTokenBalance: uint256) -> (uint256, uint256):\n    ...\n\n\n@view\n@external\ndef getUnderlyingAmount(_vaultToken: address, _vaultTokenAmount: uint256) -> uint256:\n    ...\n\n\n@view\n@external\ndef getUnderlyingAmountSafe(_vaultToken: address, _vaultTokenBalance: uint256) -> uint256:\n    ...\n\n\n@view\n@external\ndef getUnderlyingData(_vaultToken: address, _vaultTokenAmount: uint256, _appraiser: address = empty(address)) -> (address, uint256, uint256):\n    ...\n\n\n@view\n@external\ndef getUsdValueOfVaultToken(_vaultToken: address, _vaultTokenAmount: uint256, _appraiser: address = empty(address)) -> uint256:\n    ...\n\n\n###############\n# Other Utils #\n###############\n\n\n@view\n@external\ndef isRebasing() -> bool:\n    ...\n\n\n@view\n@external\ndef getPricePerShare(_vaultToken: address, _decimals: uint256 = 0) -> uint256:\n    ...\n\n\n@view\n@external\ndef getVaultTokenAmount(_asset: address, _assetAmount: uint256, _vaultToken: address) -> uint256:\n    ...\n\n\n@view\n@external\ndef canRegisterVaultToken(_asset: address, _vaultToken: address) -> bool:\n    ...\n\n\n@view\n@external\ndef isEligibleVaultForTrialFunds(_vaultToken: address, _underlyingAsset: address) -> bool:\n    ...\n\n\n@view\n@external\ndef isEligibleForYieldBonus(_asset: address) -> bool:\n    ...\n\n\n@view\n@external\ndef totalAssets(_vaultToken: address) -> uint256:\n    ...\n\n\n@view\n@external\ndef totalBorrows(_vaultToken: address) -> uint256:\n    ...\n\n\n@view\n@external\ndef getWithdrawalFees(_vaultToken: address, _vaultTokenAmount: uint256) -> uint256:\n    ...\n\n\n###################\n# Yield Lego Data #\n###################\n\n\n@view\n@external\ndef isLegoAsset(_asset: address) -> bool:\n    ...\n\n\n@view\n@external\ndef getAssetOpportunities(_asset: address) -> DynArray[address, 40]:\n    ...\n\n\n@view\n@external\ndef getAssets() -> DynArray[address, 20]:\n    ...\n\n\n@view\n@external\ndef isAssetOpportunity(_asset: address, _vaultAddr: address) -> bool:\n    ...\n\n\n@view\n@external\ndef getNumLegoAssets() -> uint256:\n    ...\n\n\n@view\n@external\ndef assets(_index: uint256) -> address:\n    ...\n\n\n@view\n@external\ndef indexOfAsset(_asset: address) -> uint256:\n    ...\n\n\n@view\n@external\ndef numAssets() -> uint256:\n    ...\n\n\n@view\n@external\ndef assetOpportunities(_asset: address, _index: uint256) -> address:\n    ...\n\n\n@view\n@external\ndef indexOfAssetOpportunity(_asset: address, _vaultAddr: address) -> uint256:\n    ...\n\n\n@view\n@external\ndef numAssetOpportunities(_asset: address) -> uint256:\n    ...\n\n\n@view\n@external\ndef vaultToAsset(_vaultAddr: address) -> ls.VaultTokenInfo:\n    ...\n\n\n# price snapshots\n\n\n@external\ndef addPriceSnapshot(_vaultToken: address) -> bool:\n    ...\n\n\n@view\n@external\ndef snapShotPriceConfig() -> ls.SnapShotPriceConfig:\n    ...\n\n\n@view\n@external\ndef snapShotData(_vaultToken: address) -> ls.SnapShotData:\n    ...\n\n\n@view\n@external\ndef snapShots(_vaultToken: address, _index: uint256) -> ls.SingleSnapShot:\n    ...\n\n\n@view\n@external\ndef getWeightedPricePerShare(_vaultToken: address) -> uint256:\n    ...\n\n\n@view\n@external\ndef getLatestSnapshot(_vaultToken: address, _pricePerShare: uint256) -> ls.SingleSnapShot:\n    ...\n\n\n@external\ndef setSnapShotPriceConfig(_config: ls.SnapShotPriceConfig):\n    ...\n",
            "sha256sum": "197c2297513b59da4c5cf6d92edba94f710d9488b7a9dcdcbd90970a1ef7fed1"
          },
          "interfaces/WalletStructs.vyi": {
            "content": "# @version 0.4.3\n\nflag ActionType:\n    TRANSFER\n    EARN_DEPOSIT\n    EARN_WITHDRAW\n    EARN_REBALANCE\n    SWAP\n    MINT_REDEEM\n    CONFIRM_MINT_REDEEM\n    ADD_COLLATERAL\n    REMOVE_COLLATERAL\n    BORROW\n    REPAY_DEBT\n    REWARDS\n    ETH_TO_WETH\n    WETH_TO_ETH\n    ADD_LIQ\n    REMOVE_LIQ\n    ADD_LIQ_CONC\n    REMOVE_LIQ_CONC\n    PAY_CHEQUE\n\nstruct WalletAssetData:\n    assetBalance: uint256\n    usdValue: uint256\n    isYieldAsset: bool\n    lastPricePerShare: uint256\n\nstruct ActionData:\n    ledger: address\n    missionControl: address\n    legoBook: address\n    hatchery: address\n    lootDistributor: address\n    appraiser: address\n    billing: address\n    wallet: address\n    walletConfig: address\n    walletOwner: address\n    inEjectMode: bool\n    isFrozen: bool\n    lastTotalUsdValue: uint256\n    signer: address\n    isManager: bool\n    legoId: uint256\n    legoAddr: address\n    eth: address\n    weth: address\n\nstruct MiniAddys:\n    ledger: address\n    missionControl: address\n    legoBook: address\n    appraiser: address",
            "sha256sum": "9a4b4f59b3a62043e51b425a665064aae419a3c0bd0514b6b29a9441ae364bb9"
          },
          "interfaces/WalletConfigStructs.vyi": {
            "content": "# @version 0.4.3\n\nMAX_CONFIG_ASSETS: constant(uint256) = 40\nMAX_CONFIG_LEGOS: constant(uint256) = 25\nMAX_ALLOWED_PAYEES: constant(uint256) = 40\n\nflag WhitelistAction:\n    ADD_PENDING\n    CONFIRM_WHITELIST\n    CANCEL_WHITELIST\n    REMOVE_WHITELIST\n\nflag BackpackType:\n    WALLET_KERNEL\n    WALLET_SENTINEL\n    WALLET_HIGH_COMMAND\n    WALLET_PAYMASTER\n    WALLET_CHEQUE_BOOK\n    WALLET_MIGRATOR\n\n# payees\n\nstruct PayeeData:\n    numTxsInPeriod: uint256\n    totalUnitsInPeriod: uint256\n    totalUsdValueInPeriod: uint256\n    totalNumTxs: uint256\n    totalUnits: uint256\n    totalUsdValue: uint256\n    lastTxBlock: uint256\n    periodStartBlock: uint256\n\nstruct PayeeSettings:\n    startBlock: uint256\n    expiryBlock: uint256\n    canPull: bool\n    periodLength: uint256\n    maxNumTxsPerPeriod: uint256\n    txCooldownBlocks: uint256\n    failOnZeroPrice: bool\n    primaryAsset: address\n    onlyPrimaryAsset: bool\n    unitLimits: PayeeLimits\n    usdLimits: PayeeLimits\n\nstruct GlobalPayeeSettings:\n    defaultPeriodLength: uint256\n    startDelay: uint256\n    activationLength: uint256\n    maxNumTxsPerPeriod: uint256\n    txCooldownBlocks: uint256\n    failOnZeroPrice: bool\n    usdLimits: PayeeLimits\n    canPayOwner: bool\n    canPull: bool\n\nstruct PayeeLimits:\n    perTxCap: uint256\n    perPeriodCap: uint256\n    lifetimeCap: uint256\n\nstruct PendingPayee:\n    settings: PayeeSettings\n    initiatedBlock: uint256\n    confirmBlock: uint256\n    currentOwner: address\n\nstruct PayeeManagementBundle:\n    owner: address\n    wallet: address\n    isRegisteredPayee: bool\n    isWhitelisted: bool\n    payeeSettings: PayeeSettings\n    globalPayeeSettings: GlobalPayeeSettings\n    timeLock: uint256\n    walletConfig: address\n\nstruct RecipientConfigBundle:\n    isWhitelisted: bool\n    isOwner: bool\n    isPayee: bool\n    config: PayeeSettings\n    globalConfig: GlobalPayeeSettings\n    data: PayeeData\n\nstruct WhitelistConfigBundle:\n    owner: address\n    wallet: address\n    isWhitelisted: bool\n    pendingWhitelist: PendingWhitelist\n    timeLock: uint256\n    walletConfig: address\n    isManager: bool\n    isOwner: bool\n    whitelistPerms: WhitelistPerms\n    globalWhitelistPerms: WhitelistPerms\n\nstruct PendingWhitelist:\n    initiatedBlock: uint256\n    confirmBlock: uint256\n    currentOwner: address\n\n# cheques\n\nstruct Cheque:\n    recipient: address\n    asset: address\n    amount: uint256\n    creationBlock: uint256\n    unlockBlock: uint256\n    expiryBlock: uint256\n    usdValueOnCreation: uint256\n    canManagerPay: bool\n    canBePulled: bool\n    creator: address\n    active: bool\n\nstruct ChequeSettings:\n    maxNumActiveCheques: uint256\n    maxChequeUsdValue: uint256\n    instantUsdThreshold: uint256\n    perPeriodPaidUsdCap: uint256\n    maxNumChequesPaidPerPeriod: uint256\n    payCooldownBlocks: uint256\n    perPeriodCreatedUsdCap: uint256\n    maxNumChequesCreatedPerPeriod: uint256\n    createCooldownBlocks: uint256\n    periodLength: uint256\n    expensiveDelayBlocks: uint256\n    defaultExpiryBlocks: uint256\n    allowedAssets: DynArray[address, MAX_CONFIG_ASSETS]\n    canManagersCreateCheques: bool\n    canManagerPay: bool\n    canBePulled: bool\n\nstruct ChequeData:\n    numChequesPaidInPeriod: uint256\n    totalUsdValuePaidInPeriod: uint256\n    totalNumChequesPaid: uint256\n    totalUsdValuePaid: uint256\n    lastChequePaidBlock: uint256\n    numChequesCreatedInPeriod: uint256\n    totalUsdValueCreatedInPeriod: uint256\n    totalNumChequesCreated: uint256\n    totalUsdValueCreated: uint256\n    lastChequeCreatedBlock: uint256\n    periodStartBlock: uint256\n\nstruct ChequeManagementBundle:\n    wallet: address\n    walletConfig: address\n    owner: address\n    isRecipientOnWhitelist: bool\n    isCreatorManager: bool\n    managerSettings: ManagerSettings\n    chequeSettings: ChequeSettings\n    chequeData: ChequeData\n    isExistingCheque: bool\n    numActiveCheques: uint256\n    timeLock: uint256\n\n# managers\n\nstruct ManagerData:\n    numTxsInPeriod: uint256\n    totalUsdValueInPeriod: uint256\n    totalNumTxs: uint256\n    totalUsdValue: uint256\n    lastTxBlock: uint256\n    periodStartBlock: uint256\n\nstruct ManagerSettings:\n    startBlock: uint256\n    expiryBlock: uint256\n    limits: ManagerLimits\n    legoPerms: LegoPerms\n    whitelistPerms: WhitelistPerms\n    transferPerms: TransferPerms\n    allowedAssets: DynArray[address, MAX_CONFIG_ASSETS]\n    canClaimLoot: bool\n\nstruct GlobalManagerSettings:\n    managerPeriod: uint256\n    startDelay: uint256\n    activationLength: uint256\n    canOwnerManage: bool\n    limits: ManagerLimits\n    legoPerms: LegoPerms\n    whitelistPerms: WhitelistPerms\n    transferPerms: TransferPerms\n    allowedAssets: DynArray[address, MAX_CONFIG_ASSETS]\n\nstruct ManagerLimits:\n    maxUsdValuePerTx: uint256\n    maxUsdValuePerPeriod: uint256\n    maxUsdValueLifetime: uint256\n    maxNumTxsPerPeriod: uint256\n    txCooldownBlocks: uint256\n    failOnZeroPrice: bool\n\nstruct LegoPerms:\n    canManageYield: bool\n    canBuyAndSell: bool\n    canManageDebt: bool\n    canManageLiq: bool\n    canClaimRewards: bool\n    allowedLegos: DynArray[uint256, MAX_CONFIG_LEGOS]\n\nstruct WhitelistPerms:\n    canAddPending: bool\n    canConfirm: bool\n    canCancel: bool\n    canRemove: bool\n\nstruct TransferPerms:\n    canTransfer: bool\n    canCreateCheque: bool\n    canAddPendingPayee: bool\n    allowedPayees: DynArray[address, MAX_ALLOWED_PAYEES]\n\nstruct ManagerConfigBundle:\n    isOwner: bool\n    isManager: bool\n    config: ManagerSettings\n    globalConfig: GlobalManagerSettings\n    data: ManagerData\n    payee: address\n\nstruct ManagerSettingsBundle:\n    owner: address\n    isManager: bool\n    timeLock: uint256\n    walletConfig: address\n    legoBook: address\n    globalManagerSettings: GlobalManagerSettings\n\n# migration\n\nstruct MigrationConfigBundle:\n    owner: address\n    isFrozen: bool\n    numPayees: uint256\n    numWhitelisted: uint256\n    numManagers: uint256\n    startingAgent: address\n    startingAgentIndex: uint256\n    hasPendingOwnerChange: bool\n    groupId: uint256\n",
            "sha256sum": "aadbecb8a18bcc1886a77c580870041e2ca071de3d9af6d31508f610bc715f9d"
          },
          "interfaces/ConfigStructs.vyi": {
            "content": "# @version 0.4.3\n\nstruct UserWalletConfig:\n    walletTemplate: address\n    configTemplate: address\n    trialAsset: address\n    trialAmount: uint256\n    numUserWalletsAllowed: uint256\n    enforceCreatorWhitelist: bool\n    minKeyActionTimeLock: uint256\n    maxKeyActionTimeLock: uint256\n    defaultStaleBlocks: uint256\n    depositRewardsAsset: address\n    txFees: TxFees\n    ambassadorRevShare: AmbassadorRevShare\n    defaultYieldMaxIncrease: uint256\n    defaultYieldPerformanceFee: uint256\n    defaultYieldAmbassadorBonusRatio: uint256\n    defaultYieldBonusRatio: uint256\n    defaultYieldAltBonusAsset: address\n    lootClaimCoolOffPeriod: uint256\n\nstruct AssetConfig:\n    legoId: uint256\n    decimals: uint256\n    staleBlocks: uint256\n    txFees: TxFees\n    ambassadorRevShare: AmbassadorRevShare\n    yieldConfig: YieldConfig\n\nstruct TxFees:\n    swapFee: uint256\n    stableSwapFee: uint256\n    rewardsFee: uint256\n\nstruct AmbassadorRevShare:\n    swapRatio: uint256\n    rewardsRatio: uint256\n    yieldRatio: uint256\n\nstruct YieldConfig:\n    isYieldAsset: bool\n    isRebasing: bool\n    underlyingAsset: address\n    maxYieldIncrease: uint256\n    performanceFee: uint256\n    ambassadorBonusRatio: uint256\n    bonusRatio: uint256\n    altBonusAsset: address\n\nstruct AgentConfig:\n    agentTemplate: address\n    numAgentsAllowed: uint256\n    enforceCreatorWhitelist: bool\n    startingAgent: address\n    startingAgentActivationLength: uint256\n\nstruct ManagerConfig:\n    managerPeriod: uint256\n    managerActivationLength: uint256\n\nstruct PayeeConfig:\n    payeePeriod: uint256\n    payeeActivationLength: uint256\n\nstruct ChequeConfig:\n    maxNumActiveCheques: uint256\n    instantUsdThreshold: uint256\n    periodLength: uint256\n    expensiveDelayBlocks: uint256\n    defaultExpiryBlocks: uint256",
            "sha256sum": "5398a73269f73f958f8d644802e65a65f335cf33c46938d0e05eabad7bc8d45f"
          },
          "contracts/core/LootDistributor.vy": {
            "content": "#     ___                     ___             ___                     ___                           \n#    (   )                   (   )           (   )  .-.              (   )                          \n#     | |    .--.     .--.    | |_         .-.| |  ( __)     .--.     | |_      ___ .-.      .--.   \n#     | |   /    \\   /    \\  (   __)      /   \\ |  (''\")   /  _  \\   (   __)   (   )   \\    /    \\  \n#     | |  |  .-. ; |  .-. ;  | |        |  .-. |   | |   . .' `. ;   | |       | ' .-. ;  |  .-. ; \n#     | |  | |  | | | |  | |  | | ___    | |  | |   | |   | '   | |   | | ___   |  / (___) | |  | | \n#     | |  | |  | | | |  | |  | |(   )   | |  | |   | |   _\\_`.(___)  | |(   )  | |        | |  | | \n#     | |  | |  | | | |  | |  | | | |    | |  | |   | |  (   ). '.    | | | |   | |        | |  | | \n#     | |  | '  | | | '  | |  | ' | |    | '  | |   | |   | |  `\\ |   | ' | |   | |        | '  | | \n#     | |  '  `-' / '  `-' /  ' `-' ;    ' `-'  /   | |   ; '._,' '   ' `-' ;   | |        '  `-' / \n#    (___)  `.__.'   `.__.'    `.__.      `.__,'   (___)   '.___.'     `.__.   (___)        `.__.'  \n#                                                                                \n#     \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n#     \u2551  ** Loot Distributor **                                 \u2551\n#     \u2551  Handles all rewards and revenue share functionality.   \u2551\n#     \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n#\n#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\nimplements: Department\n\nexports: addys.__interface__\nexports: deptBasics.__interface__\n\ninitializes: addys\ninitializes: deptBasics[addys := addys]\n\nimport contracts.modules.Addys as addys\nimport contracts.modules.DeptBasics as deptBasics\n\nfrom interfaces import Department\nfrom interfaces import YieldLego as YieldLego\nfrom interfaces import WalletStructs as ws\nfrom interfaces import WalletConfigStructs as wcs\nimport interfaces.ConfigStructs as cs\n\nfrom ethereum.ercs import IERC20\nfrom ethereum.ercs import IERC20Detailed\n\ninterface MissionControl:\n    def getSwapFee(_tokenIn: address, _tokenOut: address) -> uint256: view\n    def getLootDistroConfig(_asset: address) -> LootDistroConfig: view\n    def getRewardsFee(_asset: address) -> uint256: view\n    def getLootClaimCoolOffPeriod() -> uint256: view\n    def getDepositRewardsAsset() -> address: view\n\ninterface Ledger:\n    def setUserAndGlobalPoints(_user: address, _userData: PointsData, _globalData: PointsData): nonpayable\n    def getUserAndGlobalPoints(_user: address) -> (PointsData, PointsData): view\n    def vaultTokens(_vaultToken: address) -> VaultToken: view\n    def ambassadors(_user: address) -> address: view\n    def isUserWallet(_user: address) -> bool: view\n\ninterface Appraiser:\n    def getNormalAssetPrice(_asset: address, _missionControl: address = empty(address), _legoBook: address = empty(address), _ledger: address = empty(address)) -> uint256: view\n    def getPricePerShare(_asset: address, _missionControl: address = empty(address), _legoBook: address = empty(address), _ledger: address = empty(address)) -> uint256: view\n    def getPrice(_asset: address, _missionControl: address = empty(address), _legoBook: address = empty(address), _ledger: address = empty(address)) -> uint256: view\n\ninterface UserWalletConfig:\n    def managerSettings(_manager: address) -> wcs.ManagerSettings: view\n    def wallet() -> address: view\n    def owner() -> address: view\n\ninterface RipeTeller:\n    def depositIntoGovVault(_asset: address, _amount: uint256, _lockDuration: uint256, _user: address = msg.sender) -> uint256: nonpayable\n\ninterface Registry:\n    def getAddr(_regId: uint256) -> address: view\n\ninterface UserWallet:\n    def walletConfig() -> address: view\n\ninterface UndyHq:\n    def governance() -> address: view\n\nstruct PointsData:\n    usdValue: uint256\n    depositPoints: uint256\n    lastUpdate: uint256\n\nstruct LootDistroConfig:\n    ambassador: address\n    ambassadorRevShare: cs.AmbassadorRevShare\n    ambassadorBonusRatio: uint256\n    bonusRatio: uint256\n    altBonusAsset: address\n    underlyingAsset: address\n    decimals: uint256\n    legoId: uint256\n    legoAddr: address\n\nstruct DepositRewards:\n    asset: address\n    amount: uint256\n\nstruct VaultToken:\n    legoId: uint256\n    underlyingAsset: address\n    decimals: uint256\n    isRebasing: bool\n\nevent TransactionFeePaid:\n    user: indexed(address)\n    asset: indexed(address)\n    feeAmount: uint256\n    action: ws.ActionType\n\nevent RevenueTransferredToGov:\n    asset: indexed(address)\n    amount: uint256\n    action: ws.ActionType\n\nevent YieldPerformanceFeePaid:\n    user: indexed(address)\n    asset: indexed(address)\n    feeAmount: uint256\n    yieldRealized: uint256\n\nevent AmbassadorTxFeePaid:\n    asset: indexed(address)\n    totalFee: uint256\n    ambassadorFeeRatio: uint256\n    ambassadorFee: uint256\n    ambassador: indexed(address)\n    action: ws.ActionType\n\nevent YieldBonusPaid:\n    bonusAsset: indexed(address)\n    bonusAmount: uint256\n    bonusRatio: uint256\n    yieldRealized: uint256\n    recipient: indexed(address)\n    isAmbassador: bool\n\nevent LootAdjusted:\n    user: indexed(address)\n    asset: indexed(address)\n    newClaimable: uint256\n\nevent LootClaimed:\n    user: indexed(address)\n    asset: indexed(address)\n    amount: uint256\n\nevent DepositRewardsAdded:\n    asset: indexed(address)\n    addedAmount: uint256\n    newTotalAmount: uint256\n    adder: indexed(address)\n\nevent DepositRewardsClaimed:\n    user: indexed(address)\n    asset: indexed(address)\n    userRewards: uint256\n    remainingRewards: uint256\n\nevent DepositRewardsRecovered:\n    asset: indexed(address)\n    recipient: indexed(address)\n    amount: uint256\n\nevent RipeRewardsConfigSet:\n    ripeStakeRatio: uint256\n    ripeLockDuration: uint256\n\n# claimable loot\nlastClaim: public(HashMap[address, uint256]) # user -> last claim block\ntotalClaimableLoot: public(HashMap[address, uint256]) # asset -> amount\nclaimableLoot: public(HashMap[address, HashMap[address, uint256]]) # ambassador -> asset -> amount\n\n# ambassador claimable loot\nclaimableAssets: public(HashMap[address, HashMap[uint256, address]]) # ambassador -> index -> asset\nindexOfClaimableAsset: public(HashMap[address, HashMap[address, uint256]]) # ambassador -> asset -> index\nnumClaimableAssets: public(HashMap[address, uint256]) # ambassador -> num assets\n\n# deposit rewards\ndepositRewards: public(DepositRewards)\nripeStakeRatio: public(uint256)\nripeLockDuration: public(uint256)\n\nRIPE_TOKEN: public(immutable(address))\nRIPE_REGISTRY: public(immutable(address))\n\nHUNDRED_PERCENT: constant(uint256) = 100_00 # 100.00%\nEIGHTEEN_DECIMALS: constant(uint256) = 10 ** 18\nMAX_DEREGISTER_ASSETS: constant(uint256) = 20\nRIPE_TELLER_ID: constant(uint256) = 17\n\n\n@deploy\ndef __init__(\n    _undyHq: address,\n    _ripeToken: address,\n    _ripeRegistry: address,\n    _ripeStakeRatio: uint256,\n    _ripeLockDuration: uint256,\n):\n    addys.__init__(_undyHq)\n    deptBasics.__init__(False, False) # no minting\n\n    assert empty(address) not in [_ripeToken, _ripeRegistry] # dev: invalid addresses\n    RIPE_TOKEN = _ripeToken\n    RIPE_REGISTRY = _ripeRegistry\n\n    assert _ripeStakeRatio <= HUNDRED_PERCENT # dev: invalid stake ratio\n    self.ripeStakeRatio = _ripeStakeRatio\n    assert _ripeLockDuration != 0 # dev: invalid lock duration\n    self.ripeLockDuration = _ripeLockDuration\n\n\n#################\n# Revenue Flows #\n#################\n\n\n# normal fee flow (swaps, rewards)\n\n\n@external\ndef addLootFromSwapOrRewards(\n    _asset: address,\n    _feeAmount: uint256,\n    _action: ws.ActionType,\n    _missionControl: address = empty(address),\n):\n    # if paused, fail gracefully\n    if deptBasics.isPaused:\n        return\n\n    ledger: address = addys._getLedgerAddr()\n    assert staticcall Ledger(ledger).isUserWallet(msg.sender) # dev: not a user wallet\n\n    # finalize amount\n    feeAmount: uint256 = min(_feeAmount, staticcall IERC20(_asset).balanceOf(msg.sender))\n    if feeAmount == 0:\n        return\n\n    assert extcall IERC20(_asset).transferFrom(msg.sender, self, feeAmount, default_return_value=True) # dev: transfer failed\n    log TransactionFeePaid(user = msg.sender, asset = _asset, feeAmount = feeAmount, action = _action)\n\n    ambFee: uint256 = 0\n    ambassador: address = staticcall Ledger(ledger).ambassadors(msg.sender)\n    if ambassador != empty(address):\n        config: LootDistroConfig = self._getLootDistroConfig(msg.sender, ambassador, _asset, _missionControl, empty(address), ledger, False)\n        ambFee = self._handleAmbassadorTxFee(_asset, feeAmount, _action, config)\n\n    # transfer leftover revenue to gov\n    leftoverFee: uint256 = feeAmount - min(feeAmount, ambFee)\n    if leftoverFee != 0:\n        self._transferRevenueToGov(_asset, leftoverFee, _action)\n\n\n# yield profit flow\n\n\n@external\ndef addLootFromYieldProfit(\n    _asset: address,\n    _feeAmount: uint256,\n    _yieldRealized: uint256,\n    _missionControl: address = empty(address),\n    _appraiser: address = empty(address),\n    _legoBook: address = empty(address),\n):\n    # if paused, fail gracefully\n    if deptBasics.isPaused:\n        return\n\n    ledger: address = addys._getLedgerAddr()\n    assert staticcall Ledger(ledger).isUserWallet(msg.sender) # dev: not a user wallet\n    log YieldPerformanceFeePaid(user = msg.sender, asset = _asset, feeAmount = _feeAmount, yieldRealized = _yieldRealized)\n\n    ambassador: address = staticcall Ledger(ledger).ambassadors(msg.sender)\n    config: LootDistroConfig = self._getLootDistroConfig(msg.sender, ambassador, _asset, _missionControl, _legoBook, ledger, True)\n\n    # handle fee (this may be 0) -- no need to `transferFrom` in this case, it's already in this contract\n    ambFee: uint256 = 0\n    if _feeAmount != 0 and ambassador != empty(address):\n        ambFee = self._handleAmbassadorTxFee(_asset, _feeAmount, empty(ws.ActionType), config)\n\n    # transfer leftover revenue to gov\n    leftoverFee: uint256 = _feeAmount - min(_feeAmount, ambFee)\n    if leftoverFee != 0:\n        self._transferRevenueToGov(_asset, leftoverFee, ws.ActionType.EARN_WITHDRAW)\n\n    # yield bonus -- must be eligible\n    if config.legoAddr != empty(address) and staticcall YieldLego(config.legoAddr).isEligibleForYieldBonus(_asset):\n        self._handleYieldBonus(msg.sender, _asset, _yieldRealized, config, _missionControl, _appraiser, _legoBook, ledger)\n\n\n# ambassador rev share (transaction fees)\n\n\n@internal\ndef _handleAmbassadorTxFee(\n    _asset: address,\n    _feeAmount: uint256,\n    _action: ws.ActionType,\n    _config: LootDistroConfig,\n) -> uint256:\n    feeRatio: uint256 = _config.ambassadorRevShare.yieldRatio\n    if _action == ws.ActionType.SWAP:\n        feeRatio = _config.ambassadorRevShare.swapRatio\n    elif _action == ws.ActionType.REWARDS:\n        feeRatio = _config.ambassadorRevShare.rewardsRatio\n\n    # finalize fee\n    ambassadorRatio: uint256 = min(feeRatio, HUNDRED_PERCENT)\n    fee: uint256 = min(_feeAmount * ambassadorRatio // HUNDRED_PERCENT, staticcall IERC20(_asset).balanceOf(self))\n    if fee != 0:\n        self._addClaimableLootToUser(_config.ambassador, _asset, fee)\n        log AmbassadorTxFeePaid(asset = _asset, totalFee = _feeAmount, ambassadorFeeRatio = feeRatio, ambassadorFee = fee, ambassador = _config.ambassador, action = _action)\n    return fee\n\n\n# transfer revenue to gov\n\n\n@internal\ndef _transferRevenueToGov(_asset: address, _amount: uint256, _action: ws.ActionType):\n    amount: uint256 = min(_amount, staticcall IERC20(_asset).balanceOf(self))\n    if amount == 0:\n        return\n    governance: address = staticcall UndyHq(addys._getUndyHq()).governance()\n    if governance == empty(address):\n        return\n    assert extcall IERC20(_asset).transfer(governance, amount, default_return_value=True) # dev: transfer failed\n    log RevenueTransferredToGov(asset = _asset, amount = amount, action = _action)\n\n\n###############\n# Yield Bonus #\n###############\n\n\n@internal\ndef _handleYieldBonus(\n    _user: address,\n    _asset: address,\n    _yieldRealized: uint256,\n    _config: LootDistroConfig,\n    _missionControl: address,\n    _appraiser: address,\n    _legoBook: address,\n    _ledger: address,\n):\n    # get addys (if necessary)\n    missionControl: address = _missionControl\n    if _missionControl == empty(address):\n        missionControl = addys._getMissionControlAddr()\n    appraiser: address = _appraiser\n    if _appraiser == empty(address):\n        appraiser = addys._getAppraiserAddr()\n    legoBook: address = _legoBook\n    if _legoBook == empty(address):\n        legoBook = addys._getLegoBookAddr()\n\n    # get price info of `_asset`\n    pricePerShare: uint256 = staticcall Appraiser(appraiser).getPricePerShare(_asset, missionControl, legoBook, _ledger)\n    if pricePerShare == 0:\n        return\n\n    # default will be in-kind bonus -- same as the `_asset`\n    bonusAsset: address = _asset\n    bonusAssetYieldRealized: uint256 = _yieldRealized\n\n    # alt bonus asset -- (i.e. UNDY or RIPE tokens)\n    if _config.altBonusAsset != empty(address):\n        bonusAsset = _config.altBonusAsset\n        bonusAssetYieldRealized = self._getAltBonusAssetAmount(pricePerShare, _yieldRealized, _config, missionControl, appraiser, legoBook, _ledger)\n\n    # if an underlying asset exists\n    elif _config.underlyingAsset != empty(address):\n        bonusAsset = _config.underlyingAsset\n        bonusAssetYieldRealized = _yieldRealized * pricePerShare // (10 ** _config.decimals)\n\n    # no bonus to distribute\n    currentBalance: uint256 = staticcall IERC20(bonusAsset).balanceOf(self)\n    if bonusAssetYieldRealized == 0 or currentBalance == 0:\n        return\n\n    # check deposit rewards asset\n    reservedForDepositRewards: uint256 = 0\n    depositRewards: DepositRewards = self.depositRewards\n    if bonusAsset == depositRewards.asset:\n        reservedForDepositRewards = depositRewards.amount\n\n    # user bonus\n    if _config.bonusRatio != 0:\n        self._handleSpecificYieldBonus(False, bonusAsset, bonusAssetYieldRealized, _config.bonusRatio, _user, currentBalance, reservedForDepositRewards)\n\n    # ambassador bonus\n    if _config.ambassador != empty(address) and _config.ambassadorBonusRatio != 0:\n        self._handleSpecificYieldBonus(True, bonusAsset, bonusAssetYieldRealized, _config.ambassadorBonusRatio, _config.ambassador, currentBalance, reservedForDepositRewards)\n\n\n# alt bonus asset\n\n\n@view\n@internal\ndef _getAltBonusAssetAmount(\n    _pricePerShare: uint256,\n    _yieldRealized: uint256,\n    _config: LootDistroConfig,\n    _missionControl: address,\n    _appraiser: address,\n    _legoBook: address,\n    _ledger: address,\n) -> uint256:\n    price: uint256 = _pricePerShare\n    if _config.underlyingAsset != empty(address):\n        underlyingPrice: uint256 = staticcall Appraiser(_appraiser).getNormalAssetPrice(_config.underlyingAsset, _missionControl, _legoBook, _ledger)\n        underlyingDecimals: uint256 = convert(staticcall IERC20Detailed(_config.underlyingAsset).decimals(), uint256)\n        price = underlyingPrice * _pricePerShare // (10 ** underlyingDecimals)\n\n    # get total usd value of yield amount\n    usdValue: uint256 = price * _yieldRealized // (10 ** _config.decimals)\n    if usdValue == 0:\n        return 0\n\n    # make sure we can get price info for alt bonus asset\n    altBonusAssetPrice: uint256 = staticcall Appraiser(_appraiser).getPrice(_config.altBonusAsset, _missionControl, _legoBook, _ledger)\n    if altBonusAssetPrice == 0:\n        return 0\n\n    altDecimals: uint256 = convert(staticcall IERC20Detailed(_config.altBonusAsset).decimals(), uint256)\n    return usdValue * (10 ** altDecimals) // altBonusAssetPrice\n\n\n# handle specific yield bonus\n\n\n@internal\ndef _handleSpecificYieldBonus(\n    _isAmbassador: bool,\n    _bonusAsset: address,\n    _bonusAssetYieldRealized: uint256,\n    _bonusRatio: uint256,\n    _recipient: address,\n    _currentBalance: uint256,\n    _reservedForDepositRewards: uint256,\n) -> uint256:\n    bonusAmount: uint256 = min(_bonusAssetYieldRealized * _bonusRatio // HUNDRED_PERCENT, _bonusAssetYieldRealized)\n\n    # check what's available for bonus\n    availableForBonus: uint256 = 0\n    unavailableAmount: uint256 = self.totalClaimableLoot[_bonusAsset] + _reservedForDepositRewards\n    if _currentBalance > unavailableAmount:\n        availableForBonus = _currentBalance - unavailableAmount\n\n    bonusAmount = min(bonusAmount, availableForBonus)\n    if bonusAmount != 0:\n        self._addClaimableLootToUser(_recipient, _bonusAsset, bonusAmount)\n        log YieldBonusPaid(bonusAsset = _bonusAsset, bonusAmount = bonusAmount, bonusRatio = _bonusRatio, yieldRealized = _bonusAssetYieldRealized, recipient = _recipient, isAmbassador = _isAmbassador)\n\n    return bonusAmount\n\n\n################################\n# Claim Rev Share / Bonus Loot #\n################################\n\n\n@external\ndef claimRevShareAndBonusLoot(_user: address) -> uint256:\n    a: addys.Addys = addys._getAddys()\n    assert not deptBasics.isPaused # dev: contract paused\n\n    # permission check\n    assert self._validateCanClaimLoot(_user, msg.sender, a.ledger, a.missionControl) # dev: no perms\n\n    # ripe params\n    ripeTeller: address = staticcall Registry(RIPE_REGISTRY).getAddr(RIPE_TELLER_ID)\n    ripeLockDuration: uint256 = self.ripeLockDuration\n    ripeStakeRatio: uint256 = self.ripeStakeRatio\n\n    # claim rev share and bonus loot\n    assetsClaimed: uint256 = self._claimRevShareAndBonusLoot(_user, ripeStakeRatio, ripeLockDuration, ripeTeller)\n    assert assetsClaimed != 0 # dev: no assets claimed\n\n    self.lastClaim[_user] = block.number\n    return assetsClaimed\n\n\n@internal\ndef _claimRevShareAndBonusLoot(\n    _user: address,\n    _ripeStakeRatio: uint256,\n    _ripeLockDuration: uint256,\n    _ripeTeller: address,\n) -> uint256:\n    numAssets: uint256 = self.numClaimableAssets[_user]\n    if numAssets == 0:\n        return 0\n\n    assetsClaimed: uint256 = 0\n    assetsToDeregister: DynArray[address, MAX_DEREGISTER_ASSETS] = []\n\n    # iterate through all claimable assets for user\n    for i: uint256 in range(1, numAssets, bound=max_value(uint256)):\n        asset: address = self.claimableAssets[_user][i]\n        if asset == empty(address):\n            continue\n\n        didClaim: bool = False\n        shouldDeregister: bool = False\n        didClaim, shouldDeregister = self._claimLootForAsset(_user, asset, _ripeStakeRatio, _ripeLockDuration, _ripeTeller)\n        if didClaim:\n            assetsClaimed += 1\n\n        # add to deregister list\n        if shouldDeregister and len(assetsToDeregister) < MAX_DEREGISTER_ASSETS:\n            assetsToDeregister.append(asset)\n\n    # deregister assets\n    if len(assetsToDeregister) != 0:\n        for asset: address in assetsToDeregister:\n            self._deregisterClaimableAssetForUser(_user, asset)\n\n    return assetsClaimed\n\n\n# specific asset claim\n\n\n@internal\ndef _claimLootForAsset(\n    _user: address,\n    _asset: address,\n    _ripeStakeRatio: uint256,\n    _ripeLockDuration: uint256,\n    _ripeTeller: address,\n) -> (bool, bool):\n    claimableAmount: uint256 = self.claimableLoot[_user][_asset]\n    if claimableAmount == 0:\n        return False, True\n\n    # check contract has enough balance\n    transferAmount: uint256 = min(claimableAmount, staticcall IERC20(_asset).balanceOf(self))\n    if transferAmount == 0:\n        return False, False\n\n    # transfer to user\n    if _ripeTeller != empty(address) and _asset == RIPE_TOKEN:\n        self._handleRipeRewards(_user, transferAmount, _ripeStakeRatio, _ripeLockDuration, _asset, _ripeTeller)\n    else:\n        assert extcall IERC20(_asset).transfer(_user, transferAmount, default_return_value=True) # dev: xfer fail\n\n    # update tracking\n    self.totalClaimableLoot[_asset] -= transferAmount\n    self.claimableLoot[_user][_asset] -= transferAmount\n\n    log LootClaimed(\n        user = _user,\n        asset = _asset,\n        amount = transferAmount,\n    )\n    return True, claimableAmount == transferAmount\n\n\n@view\n@external\ndef getClaimableLootForAsset(_user: address, _asset: address) -> uint256:\n    claimableAmount: uint256 = self.claimableLoot[_user][_asset]\n    return min(claimableAmount, staticcall IERC20(_asset).balanceOf(self))\n\n\n# claimable assets\n\n\n@view\n@external\ndef getTotalClaimableAssets(_user: address) -> uint256:\n    numAssets: uint256 = self.numClaimableAssets[_user]\n    if numAssets == 0:\n        return 0\n\n    totalAssets: uint256 = 0\n    for i: uint256 in range(1, numAssets, bound=max_value(uint256)):\n        asset: address = self.claimableAssets[_user][i]\n        if asset == empty(address):\n            continue\n\n        claimableAmount: uint256 = min(self.claimableLoot[_user][asset], staticcall IERC20(asset).balanceOf(self))\n        if claimableAmount != 0:\n            totalAssets += 1\n\n    return totalAssets\n\n\n# adjust loot (cheaters!)\n\n\n@external\ndef adjustLoot(_user: address, _asset: address, _newClaimable: uint256) -> bool:\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n    assert not deptBasics.isPaused # dev: contract paused\n\n    # invalid inputs\n    if empty(address) in [_user, _asset]:\n        return False\n\n    # can only adjust down (not up)\n    claimableAmount: uint256 = self.claimableLoot[_user][_asset]\n    if claimableAmount == 0 or _newClaimable >= claimableAmount:\n        return False\n\n    # update claimable loot for user\n    self.claimableLoot[_user][_asset] = _newClaimable\n\n    # update total claimable loot\n    totalClaimableLoot: uint256 = self.totalClaimableLoot[_asset]\n    totalClaimableLoot -= claimableAmount\n    totalClaimableLoot += _newClaimable\n    self.totalClaimableLoot[_asset] = totalClaimableLoot\n\n    # deregister asset if necessary\n    if _newClaimable == 0:\n        self._deregisterClaimableAssetForUser(_user, _asset)\n\n    log LootAdjusted(user = _user, asset = _asset, newClaimable = _newClaimable)\n    return True\n\n\n#####################\n# Loot Registration #\n#####################\n\n\n# add loot to user\n\n\n@internal\ndef _addClaimableLootToUser(_user: address, _asset: address, _amount: uint256):\n    self.totalClaimableLoot[_asset] += _amount\n    self.claimableLoot[_user][_asset] += _amount\n    self._registerClaimableAssetForUser(_user, _asset)\n\n\n# register claimable asset\n\n\n@internal\ndef _registerClaimableAssetForUser(_user: address, _asset: address):\n    if self.indexOfClaimableAsset[_user][_asset] != 0:\n        return\n\n    aid: uint256 = self.numClaimableAssets[_user]\n    if aid == 0:\n        aid = 1 # not using 0 index\n    self.claimableAssets[_user][aid] = _asset\n    self.indexOfClaimableAsset[_user][_asset] = aid\n    self.numClaimableAssets[_user] = aid + 1\n\n\n# deregister asset\n\n\n@internal\ndef _deregisterClaimableAssetForUser(_user: address, _asset: address) -> bool:\n    numAssets: uint256 = self.numClaimableAssets[_user]\n    if numAssets == 0:\n        return False\n\n    targetIndex: uint256 = self.indexOfClaimableAsset[_user][_asset]\n    if targetIndex == 0:\n        return False\n\n    # update data\n    lastIndex: uint256 = numAssets - 1\n    self.numClaimableAssets[_user] = lastIndex\n    self.indexOfClaimableAsset[_user][_asset] = 0\n\n    # get last item, replace the removed item\n    if targetIndex != lastIndex:\n        lastItem: address = self.claimableAssets[_user][lastIndex]\n        self.claimableAssets[_user][targetIndex] = lastItem\n        self.indexOfClaimableAsset[_user][lastItem] = targetIndex\n\n    return True\n\n\n##################\n# Deposit Points #\n##################\n\n\n# update points\n\n\n@external\ndef updateDepositPoints(_user: address):\n    a: addys.Addys = addys._getAddys()\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n    assert not deptBasics.isPaused # dev: contract paused\n    self._updateDepositPoints(_user, 0, False, a.ledger)\n\n\n@external\ndef updateDepositPointsWithNewValue(_user: address, _newUsdValue: uint256):\n    ledger: address = addys._getLedgerAddr()\n    if not staticcall Ledger(ledger).isUserWallet(msg.sender):\n        assert self._isValidWalletConfig(_user, msg.sender, ledger) # dev: invalid config\n\n    # if paused, fail gracefully\n    if deptBasics.isPaused:\n        return\n\n    self._updateDepositPoints(_user, _newUsdValue, True, ledger)\n\n\n@external\ndef updateDepositPointsOnEjection(_user: address):\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n    if deptBasics.isPaused:\n        return\n    self._updateDepositPoints(_user, 0, True, addys._getLedgerAddr())\n\n\n@internal\ndef _updateDepositPoints(\n    _user: address,\n    _newUsdValue: uint256,\n    _didUsdValueChange: bool,\n    _ledger: address,\n):\n    userPoints: PointsData = empty(PointsData)\n    globalPoints: PointsData = empty(PointsData)\n    userPoints, globalPoints = staticcall Ledger(_ledger).getUserAndGlobalPoints(_user)\n\n    prevUserValue: uint256 = userPoints.usdValue\n\n    # update user data\n    userPoints.depositPoints += self._getLatestDepositPoints(prevUserValue, userPoints.lastUpdate)\n    userPoints.lastUpdate = block.number\n    if _didUsdValueChange:\n        userPoints.usdValue = _newUsdValue\n\n    # update global data\n    globalPoints.depositPoints += self._getLatestDepositPoints(globalPoints.usdValue, globalPoints.lastUpdate)\n    globalPoints.lastUpdate = block.number\n    if _didUsdValueChange:\n        globalPoints.usdValue -= prevUserValue\n        globalPoints.usdValue += _newUsdValue\n\n    # save data\n    extcall Ledger(_ledger).setUserAndGlobalPoints(_user, userPoints, globalPoints)\n\n\n# latest points\n\n\n@view\n@external\ndef getLatestDepositPoints(_usdValue: uint256, _lastUpdate: uint256) -> uint256:\n    return self._getLatestDepositPoints(_usdValue, _lastUpdate)\n\n\n@view\n@internal\ndef _getLatestDepositPoints(_usdValue: uint256, _lastUpdate: uint256) -> uint256:\n    if _usdValue == 0 or _lastUpdate == 0 or block.number <= _lastUpdate:\n        return 0\n    points: uint256 = _usdValue * (block.number - _lastUpdate)\n    return points // EIGHTEEN_DECIMALS\n\n\n# validate wallet config\n\n\n@view\n@external\ndef isValidWalletConfig(_wallet: address, _caller: address) -> bool:\n    return self._isValidWalletConfig(_wallet, _caller, addys._getLedgerAddr())\n\n\n@view\n@internal\ndef _isValidWalletConfig(_wallet: address, _caller: address, _ledger: address) -> bool:\n    if not staticcall Ledger(_ledger).isUserWallet(_wallet):\n        return False\n    walletConfig: address = staticcall UserWallet(_wallet).walletConfig()\n    return walletConfig == _caller\n\n\n###################\n# Deposit Rewards #\n###################\n\n\n# claim deposit rewards\n\n\n@external\ndef claimDepositRewards(_user: address) -> uint256:\n    assert not deptBasics.isPaused # dev: contract paused\n    a: addys.Addys = addys._getAddys()\n\n    # cannot claim if this is not current loot distributor, likely migrated to new loot distributor\n    assert a.lootDistributor == self # dev: not current loot distributor\n\n    # permission check\n    assert self._validateCanClaimLoot(_user, msg.sender, a.ledger, a.missionControl) # dev: no perms\n\n    # ripe params\n    ripeTeller: address = staticcall Registry(RIPE_REGISTRY).getAddr(RIPE_TELLER_ID)\n    ripeLockDuration: uint256 = self.ripeLockDuration\n    ripeStakeRatio: uint256 = self.ripeStakeRatio\n\n    # claim rewards\n    userRewards: uint256 = self._claimDepositRewards(_user, ripeStakeRatio, ripeLockDuration, ripeTeller, a.ledger)\n    assert userRewards != 0 # dev: nothing to claim\n\n    self.lastClaim[_user] = block.number\n    return userRewards\n\n\n@internal\ndef _claimDepositRewards(\n    _user: address,\n    _ripeStakeRatio: uint256,\n    _ripeLockDuration: uint256,\n    _ripeTeller: address,\n    _ledger: address,\n) -> uint256:\n    self._updateDepositPoints(_user, 0, False, _ledger)\n\n    # get user and global points\n    userPoints: PointsData = empty(PointsData)\n    globalPoints: PointsData = empty(PointsData)\n    userPoints, globalPoints = staticcall Ledger(_ledger).getUserAndGlobalPoints(_user)\n    if userPoints.depositPoints == 0 or globalPoints.depositPoints == 0:\n        return 0\n\n    # check if there is anything available for rewards\n    data: DepositRewards = self.depositRewards\n    if data.asset == empty(address) or data.amount == 0:\n        return 0\n\n    # calculate user's share, transfer to user\n    availableRewards: uint256 = min(data.amount, staticcall IERC20(data.asset).balanceOf(self))\n    userRewards: uint256 = availableRewards * userPoints.depositPoints // globalPoints.depositPoints\n    if userRewards == 0:\n        return 0\n\n    # transfer to user\n    if _ripeTeller != empty(address) and data.asset == RIPE_TOKEN:\n        self._handleRipeRewards(_user, userRewards, _ripeStakeRatio, _ripeLockDuration, data.asset, _ripeTeller)\n    else:\n        assert extcall IERC20(data.asset).transfer(_user, userRewards, default_return_value=True) # dev: xfer fail\n\n    # save rewards data\n    data.amount -= userRewards\n    self.depositRewards = data\n\n    # save / update points\n    globalPoints.depositPoints -= userPoints.depositPoints\n    userPoints.depositPoints = 0\n    extcall Ledger(_ledger).setUserAndGlobalPoints(_user, userPoints, globalPoints)\n\n    log DepositRewardsClaimed(\n        user = _user,\n        asset = data.asset,\n        userRewards = userRewards,\n        remainingRewards = data.amount,\n    )\n    return userRewards\n\n\n@view\n@external\ndef getClaimableDepositRewards(_user: address) -> uint256:\n    userPoints: PointsData = empty(PointsData)\n    globalPoints: PointsData = empty(PointsData)\n    userPoints, globalPoints = staticcall Ledger(addys._getLedgerAddr()).getUserAndGlobalPoints(_user)\n\n    # get latest points\n    userPoints.depositPoints += self._getLatestDepositPoints(userPoints.usdValue, userPoints.lastUpdate)\n    globalPoints.depositPoints += self._getLatestDepositPoints(globalPoints.usdValue, globalPoints.lastUpdate)\n    if userPoints.depositPoints == 0 or globalPoints.depositPoints == 0:\n        return 0\n\n    # check if there is anything available for rewards\n    data: DepositRewards = self.depositRewards\n    if data.asset == empty(address) or data.amount == 0:\n        return 0\n\n    # calculate user's share\n    availableRewards: uint256 = min(data.amount, staticcall IERC20(data.asset).balanceOf(self))\n    userRewards: uint256 = availableRewards * userPoints.depositPoints // globalPoints.depositPoints\n    return userRewards\n\n\n# add rewards\n\n\n@external\ndef addDepositRewards(_asset: address, _amount: uint256):\n    assert not deptBasics.isPaused # dev: contract paused\n    a: addys.Addys = addys._getAddys()\n    depositRewardsAsset: address = staticcall MissionControl(a.missionControl).getDepositRewardsAsset() # dev: invalid asset\n    assert depositRewardsAsset == _asset # dev: invalid asset\n\n    data: DepositRewards = self.depositRewards\n    if data.asset != empty(address) and data.amount != 0:\n        # NOTE: if changing the rewards asset, need to recover the previous asset first (zero out the amount)\n        assert data.asset == depositRewardsAsset # dev: asset mismatch\n\n    # finalize amount\n    amount: uint256 = min(_amount, staticcall IERC20(depositRewardsAsset).balanceOf(msg.sender))\n    assert amount != 0 # dev: nothing to add\n    assert extcall IERC20(depositRewardsAsset).transferFrom(msg.sender, self, amount, default_return_value=True) # dev: transfer failed\n\n    # update data\n    data.asset = depositRewardsAsset\n    data.amount += amount\n    self.depositRewards = data\n\n    log DepositRewardsAdded(asset = depositRewardsAsset, addedAmount = amount, newTotalAmount = data.amount, adder = msg.sender)\n\n\n# recover deposit rewards\n\n\n@external\ndef recoverDepositRewards(_recipient: address):\n    assert not deptBasics.isPaused # dev: contract paused\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n\n    data: DepositRewards = self.depositRewards\n    assert data.asset != empty(address) # dev: nothing to recover\n    amount: uint256 = min(data.amount, staticcall IERC20(data.asset).balanceOf(self))\n    if amount != 0:\n        assert extcall IERC20(data.asset).transfer(_recipient, amount, default_return_value=True) # dev: recovery failed\n\n    self.depositRewards = empty(DepositRewards)\n    log DepositRewardsRecovered(asset=data.asset, recipient=_recipient, amount=amount)\n\n\n# handle ripe rewards\n\n\n@internal\ndef _handleRipeRewards(\n    _user: address,\n    _amount: uint256,\n    _ripeStakeRatio: uint256,\n    _ripeLockDuration: uint256,\n    _ripeToken: address,\n    _ripeTeller: address,\n):\n    # just transfer to user\n    if _ripeStakeRatio == 0:\n        assert extcall IERC20(_ripeToken).transfer(_user, _amount, default_return_value=True) # dev: xfer fail\n        return\n\n    # finalize amounts\n    amountToStake: uint256 = min(_amount * _ripeStakeRatio // HUNDRED_PERCENT, _amount)\n    amountToSend: uint256 = _amount - amountToStake\n\n    # stake ripe tokens\n    if amountToStake != 0:\n        assert extcall IERC20(_ripeToken).approve(_ripeTeller, amountToStake, default_return_value=True) # dev: ripe approval failed\n        extcall RipeTeller(_ripeTeller).depositIntoGovVault(_ripeToken, amountToStake, _ripeLockDuration, _user)\n        assert extcall IERC20(_ripeToken).approve(_ripeTeller, 0, default_return_value=True) # dev: ripe approval failed\n\n    # transfer ripe to user\n    if amountToSend != 0:\n        amount: uint256 = min(amountToSend, staticcall IERC20(_ripeToken).balanceOf(self))\n        assert extcall IERC20(_ripeToken).transfer(_user, amount, default_return_value=True) # dev: ripe transfer failed\n\n\n####################\n# Transaction Fees #\n####################\n\n\n@view\n@external\ndef getSwapFee(_user: address, _tokenIn: address, _tokenOut: address, _missionControl: address = empty(address)) -> uint256:\n    # NOTE: passing in `_user` in case we ever have different fees for different users in future\n\n    missionControl: address = _missionControl\n    if _missionControl == empty(address):\n        missionControl = addys._getMissionControlAddr()\n\n    return staticcall MissionControl(missionControl).getSwapFee(_tokenIn, _tokenOut)\n\n\n@view\n@external\ndef getRewardsFee(_user: address, _asset: address, _missionControl: address = empty(address)) -> uint256:\n    # NOTE: passing in `_user` in case we ever have different fees for different users in future\n\n    missionControl: address = _missionControl\n    if _missionControl == empty(address):\n        missionControl = addys._getMissionControlAddr()\n\n    return staticcall MissionControl(missionControl).getRewardsFee(_asset)\n\n\n#############\n# Utilities #\n#############\n\n\n# claim ALL loot (both rev share and deposit rewards)\n\n\n@external\ndef claimAllLoot(_user: address) -> bool:\n    assert not deptBasics.isPaused # dev: contract paused\n    a: addys.Addys = addys._getAddys()\n\n    # permission check\n    assert self._validateCanClaimLoot(_user, msg.sender, a.ledger, a.missionControl) # dev: no perms\n\n    # ripe params\n    ripeTeller: address = staticcall Registry(RIPE_REGISTRY).getAddr(RIPE_TELLER_ID)\n    ripeLockDuration: uint256 = self.ripeLockDuration\n    ripeStakeRatio: uint256 = self.ripeStakeRatio\n\n    # claim rev share and bonus loot\n    numAssetsClaimed: uint256 = self._claimRevShareAndBonusLoot(_user, ripeStakeRatio, ripeLockDuration, ripeTeller)\n\n    # can only claim rewards if this is current loot distributor\n    if a.lootDistributor == self:\n        userRewards: uint256 = self._claimDepositRewards(_user, ripeStakeRatio, ripeLockDuration, ripeTeller, a.ledger)\n        if userRewards != 0:\n            numAssetsClaimed += 1\n\n    # only save last claim block if there was something claimed\n    if numAssetsClaimed != 0:\n        self.lastClaim[_user] = block.number\n\n    return numAssetsClaimed != 0\n\n\n# validation\n\n\n@view\n@external\ndef validateCanClaimLoot(_user: address, _caller: address) -> bool:\n    a: addys.Addys = addys._getAddys()\n    return self._validateCanClaimLoot(_user, _caller, a.ledger, a.missionControl)\n\n\n@view\n@internal\ndef _validateCanClaimLoot(_user: address, _caller: address, _ledger: address, _missionControl: address) -> bool:\n    if not staticcall Ledger(_ledger).isUserWallet(_user):\n        return False\n\n    # cool off period\n    isSwitchboard: bool = addys._isSwitchboardAddr(_caller)\n    if not isSwitchboard:\n        lastClaimBlock: uint256 = self.lastClaim[_user]\n        coolOffPeriod: uint256 = staticcall MissionControl(_missionControl).getLootClaimCoolOffPeriod()\n        if lastClaimBlock != 0 and coolOffPeriod != 0:\n            if lastClaimBlock + coolOffPeriod > block.number:\n                return False\n\n    # lego check\n    if addys._isLegoBookAddr(_caller):\n        return True\n\n    # permission check\n    walletConfig: address = staticcall UserWallet(_user).walletConfig()\n    if _caller == staticcall UserWalletConfig(walletConfig).owner():\n        return True\n\n    # manager check\n    config: wcs.ManagerSettings = staticcall UserWalletConfig(walletConfig).managerSettings(_caller)\n    if config.canClaimLoot:\n        return True\n\n    return isSwitchboard\n\n\n# loot config\n\n\n@view\n@external\ndef getLootDistroConfig(_wallet: address, _asset: address, _shouldGetLegoInfo: bool = False) -> LootDistroConfig:\n    ledger: address = addys._getLedgerAddr()\n    ambassador: address = staticcall Ledger(ledger).ambassadors(_wallet)\n    return self._getLootDistroConfig(_wallet, ambassador, _asset, addys._getMissionControlAddr(), addys._getLegoBookAddr(), ledger, _shouldGetLegoInfo)\n\n\n@view\n@internal\ndef _getLootDistroConfig(\n    _wallet: address,\n    _ambassador: address,\n    _asset: address,\n    _missionControl: address,\n    _legoBook: address,\n    _ledger: address,\n    _shouldGetLegoInfo: bool,\n) -> LootDistroConfig:\n\n    # get addys\n    missionControl: address = _missionControl\n    if _missionControl == empty(address):\n        missionControl = addys._getMissionControlAddr()\n    legoBook: address = _legoBook\n    if _legoBook == empty(address):\n        legoBook = addys._getLegoBookAddr()\n\n    # config\n    config: LootDistroConfig = staticcall MissionControl(missionControl).getLootDistroConfig(_asset)\n    config.ambassador = _ambassador\n\n    # if no specific config, fallback to vault token registration\n    if config.decimals == 0:\n        vaultToken: VaultToken = staticcall Ledger(_ledger).vaultTokens(_asset)\n        if vaultToken.underlyingAsset != empty(address):\n            config.decimals = vaultToken.decimals\n            config.underlyingAsset = vaultToken.underlyingAsset\n            config.legoId = vaultToken.legoId\n\n    # get lego addr\n    if _shouldGetLegoInfo and config.legoId != 0 and legoBook != empty(address) and config.legoAddr == empty(address):\n        config.legoAddr = staticcall Registry(legoBook).getAddr(config.legoId)\n\n    # get decimals if needed\n    if config.decimals == 0:\n        config.decimals = convert(staticcall IERC20Detailed(_asset).decimals(), uint256)\n\n    return config\n\n\n# set ripe rewards config\n\n\n@external\ndef setRipeRewardsConfig(_ripeStakeRatio: uint256, _ripeLockDuration: uint256):\n    assert not deptBasics.isPaused # dev: contract paused\n    assert addys._isSwitchboardAddr(msg.sender) # dev: no perms\n    assert _ripeStakeRatio <= HUNDRED_PERCENT # dev: invalid stake ratio\n    assert _ripeLockDuration > 0 # dev: invalid lock duration\n    self.ripeStakeRatio = _ripeStakeRatio\n    self.ripeLockDuration = _ripeLockDuration\n    log RipeRewardsConfigSet(ripeStakeRatio=_ripeStakeRatio, ripeLockDuration=_ripeLockDuration)",
            "sha256sum": "adaa18f8793a454b794d582b09cdeab0090c76ef2976d095440060294fbed2d7"
          }
        },
        "settings": {
          "outputSelection": {
            "contracts/core/LootDistributor.vy": ["*"]
          },
          "search_paths": ["."]
        },
        "compiler_version": "v0.4.3+commit.bff19ea2",
        "integrity": "3fac6d060e4fa2d6ee78b3e4c8e6b4ec6b3cc942aa3ec9d608b77c83fb556b3a"
      },
      "args": "00000000000000000000000044cf3c4f000dfd76a35d03298049d37be688d6f90000000000000000000000002a0a59d6b975828e781ecac125dba40d7ee5ddc00000000000000000000000006162df1b329e157479f8f1407e888260e0ec3d2b0000000000000000000000000000000000000000000000000000000000001f40000000000000000000000000000000000000000000000000000000000076a700",
      "file": "contracts/core/LootDistributor.vy"
    },
    "SwitchboardAlpha": {
      "address": "0xb7622CB741C2B26E59e262604d941C50D309C358",
      "abi": [
        {
          "name": "PendingUserWalletTemplatesChange",
          "inputs": [
            {
              "name": "walletTemplate",
              "type": "address",
              "indexed": false
            },
            {
              "name": "configTemplate",
              "type": "address",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "UserWalletTemplatesSet",
          "inputs": [
            {
              "name": "walletTemplate",
              "type": "address",
              "indexed": false
            },
            {
              "name": "configTemplate",
              "type": "address",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingTrialFundsChange",
          "inputs": [
            {
              "name": "trialAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "trialAmount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "TrialFundsSet",
          "inputs": [
            {
              "name": "trialAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "trialAmount",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingWalletCreationLimitsChange",
          "inputs": [
            {
              "name": "numUserWalletsAllowed",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "enforceCreatorWhitelist",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "WalletCreationLimitsSet",
          "inputs": [
            {
              "name": "numUserWalletsAllowed",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "enforceCreatorWhitelist",
              "type": "bool",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingKeyActionTimelockBoundsChange",
          "inputs": [
            {
              "name": "minKeyActionTimeLock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "maxKeyActionTimeLock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "KeyActionTimelockBoundsSet",
          "inputs": [
            {
              "name": "minKeyActionTimeLock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "maxKeyActionTimeLock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingDefaultStaleBlocksChange",
          "inputs": [
            {
              "name": "defaultStaleBlocks",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DefaultStaleBlocksSet",
          "inputs": [
            {
              "name": "defaultStaleBlocks",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingTxFeesChange",
          "inputs": [
            {
              "name": "swapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "stableSwapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "rewardsFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "TxFeesSet",
          "inputs": [
            {
              "name": "swapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "stableSwapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "rewardsFee",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingAmbassadorRevShareChange",
          "inputs": [
            {
              "name": "swapRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "rewardsRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "yieldRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "AmbassadorRevShareSet",
          "inputs": [
            {
              "name": "swapRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "rewardsRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "yieldRatio",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingDefaultYieldParamsChange",
          "inputs": [
            {
              "name": "defaultYieldMaxIncrease",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldPerformanceFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldAmbassadorBonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldBonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldAltBonusAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DefaultYieldParamsSet",
          "inputs": [
            {
              "name": "defaultYieldMaxIncrease",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldPerformanceFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldAmbassadorBonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldBonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "defaultYieldAltBonusAsset",
              "type": "address",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingLootParamsChange",
          "inputs": [
            {
              "name": "depositRewardsAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "lootClaimCoolOffPeriod",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "LootParamsSet",
          "inputs": [
            {
              "name": "depositRewardsAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "lootClaimCoolOffPeriod",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingAssetConfigChange",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "staleBlocks",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "txFeesSwapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "txFeesStableSwapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "txFeesRewardsFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorRevShareSwapRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorRevShareRewardsRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorRevShareYieldRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "isYieldAsset",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "isRebasing",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "underlyingAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "maxYieldIncrease",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "performanceFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorBonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "bonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "altBonusAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingIsStablecoinChange",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "isStablecoin",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "IsStablecoinSet",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "isStablecoin",
              "type": "bool",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "AssetConfigSet",
          "inputs": [
            {
              "name": "asset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "staleBlocks",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "txFeesSwapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "txFeesStableSwapFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "txFeesRewardsFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorRevShareSwapRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorRevShareRewardsRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorRevShareYieldRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "isYieldAsset",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "isRebasing",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "underlyingAsset",
              "type": "address",
              "indexed": false
            },
            {
              "name": "maxYieldIncrease",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "performanceFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ambassadorBonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "bonusRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "altBonusAsset",
              "type": "address",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingAgentTemplateChange",
          "inputs": [
            {
              "name": "agentTemplate",
              "type": "address",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "AgentTemplateSet",
          "inputs": [
            {
              "name": "agentTemplate",
              "type": "address",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingAgentCreationLimitsChange",
          "inputs": [
            {
              "name": "numAgentsAllowed",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "enforceCreatorWhitelist",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "AgentCreationLimitsSet",
          "inputs": [
            {
              "name": "numAgentsAllowed",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "enforceCreatorWhitelist",
              "type": "bool",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingStarterAgentParamsChange",
          "inputs": [
            {
              "name": "startingAgent",
              "type": "address",
              "indexed": false
            },
            {
              "name": "startingAgentActivationLength",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "StarterAgentParamsSet",
          "inputs": [
            {
              "name": "startingAgent",
              "type": "address",
              "indexed": false
            },
            {
              "name": "startingAgentActivationLength",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingManagerConfigChange",
          "inputs": [
            {
              "name": "managerPeriod",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "managerActivationLength",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingPayeeConfigChange",
          "inputs": [
            {
              "name": "payeePeriod",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "payeeActivationLength",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingCanPerformSecurityAction",
          "inputs": [
            {
              "name": "signer",
              "type": "address",
              "indexed": false
            },
            {
              "name": "canPerform",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "CreatorWhitelistSet",
          "inputs": [
            {
              "name": "creator",
              "type": "address",
              "indexed": false
            },
            {
              "name": "isWhitelisted",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "caller",
              "type": "address",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ManagerConfigSet",
          "inputs": [
            {
              "name": "managerPeriod",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "managerActivationLength",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PayeeConfigSet",
          "inputs": [
            {
              "name": "payeePeriod",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "payeeActivationLength",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "CanPerformSecurityAction",
          "inputs": [
            {
              "name": "signer",
              "type": "address",
              "indexed": false
            },
            {
              "name": "canPerform",
              "type": "bool",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "LockedSignerSet",
          "inputs": [
            {
              "name": "signer",
              "type": "address",
              "indexed": false
            },
            {
              "name": "isLocked",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "caller",
              "type": "address",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "RipeRewardsConfigSetFromSwitchboard",
          "inputs": [
            {
              "name": "ripeStakeRatio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ripeLockDuration",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeTimeLockModified",
          "inputs": [
            {
              "name": "prevTimeLock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "newTimeLock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ExpirationSet",
          "inputs": [
            {
              "name": "expiration",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ActionTimeLockSet",
          "inputs": [
            {
              "name": "newTimeLock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "prevTimeLock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeStarted",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "newGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "confirmBlock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeConfirmed",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "newGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "initiatedBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmBlock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeCancelled",
          "inputs": [
            {
              "name": "cancelledGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "initiatedBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmBlock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovRelinquished",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "UndyHqSetupFinished",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "newGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "timeLock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getAddys",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "hq",
                  "type": "address"
                },
                {
                  "name": "undyToken",
                  "type": "address"
                },
                {
                  "name": "ledger",
                  "type": "address"
                },
                {
                  "name": "missionControl",
                  "type": "address"
                },
                {
                  "name": "legoBook",
                  "type": "address"
                },
                {
                  "name": "switchboard",
                  "type": "address"
                },
                {
                  "name": "hatchery",
                  "type": "address"
                },
                {
                  "name": "lootDistributor",
                  "type": "address"
                },
                {
                  "name": "appraiser",
                  "type": "address"
                },
                {
                  "name": "walletBackpack",
                  "type": "address"
                },
                {
                  "name": "billing",
                  "type": "address"
                },
                {
                  "name": "vaultRegistry",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getUndyHq",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getUndyHqFromGov",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "canGovern",
          "inputs": [
            {
              "name": "_addr",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getGovernors",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address[]"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "hasPendingGovChange",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "startGovernanceChange",
          "inputs": [
            {
              "name": "_newGov",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "confirmGovernanceChange",
          "inputs": [],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "cancelGovernanceChange",
          "inputs": [],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "relinquishGov",
          "inputs": [],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setGovTimeLock",
          "inputs": [
            {
              "name": "_numBlocks",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isValidGovTimeLock",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "minGovChangeTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "maxGovChangeTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "finishUndyHqSetup",
          "inputs": [
            {
              "name": "_newGov",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "finishUndyHqSetup",
          "inputs": [
            {
              "name": "_newGov",
              "type": "address"
            },
            {
              "name": "_timeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "governance",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingGov",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "newGov",
                  "type": "address"
                },
                {
                  "name": "initiatedBlock",
                  "type": "uint256"
                },
                {
                  "name": "confirmBlock",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "numGovChanges",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "govChangeTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "canConfirmAction",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isExpired",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "hasPendingAction",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getActionConfirmationBlock",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setActionTimeLock",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isValidActionTimeLock",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "minActionTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "maxActionTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setExpiration",
          "inputs": [
            {
              "name": "_expiration",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setActionTimeLockAfterSetup",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setActionTimeLockAfterSetup",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingActions",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "initiatedBlock",
                  "type": "uint256"
                },
                {
                  "name": "confirmBlock",
                  "type": "uint256"
                },
                {
                  "name": "expiration",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "actionId",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "actionTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "expiration",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setUserWalletTemplates",
          "inputs": [
            {
              "name": "_walletTemplate",
              "type": "address"
            },
            {
              "name": "_configTemplate",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setTrialFunds",
          "inputs": [
            {
              "name": "_trialAsset",
              "type": "address"
            },
            {
              "name": "_trialAmount",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setWalletCreationLimits",
          "inputs": [
            {
              "name": "_numUserWalletsAllowed",
              "type": "uint256"
            },
            {
              "name": "_enforceCreatorWhitelist",
              "type": "bool"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setKeyActionTimelockBounds",
          "inputs": [
            {
              "name": "_minKeyActionTimeLock",
              "type": "uint256"
            },
            {
              "name": "_maxKeyActionTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setDefaultStaleBlocks",
          "inputs": [
            {
              "name": "_defaultStaleBlocks",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setTxFees",
          "inputs": [
            {
              "name": "_swapFee",
              "type": "uint256"
            },
            {
              "name": "_stableSwapFee",
              "type": "uint256"
            },
            {
              "name": "_rewardsFee",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setAmbassadorRevShare",
          "inputs": [
            {
              "name": "_swapRatio",
              "type": "uint256"
            },
            {
              "name": "_rewardsRatio",
              "type": "uint256"
            },
            {
              "name": "_yieldRatio",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setDefaultYieldParams",
          "inputs": [
            {
              "name": "_defaultYieldMaxIncrease",
              "type": "uint256"
            },
            {
              "name": "_defaultYieldPerformanceFee",
              "type": "uint256"
            },
            {
              "name": "_defaultYieldAmbassadorBonusRatio",
              "type": "uint256"
            },
            {
              "name": "_defaultYieldBonusRatio",
              "type": "uint256"
            },
            {
              "name": "_defaultYieldAltBonusAsset",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setLootParams",
          "inputs": [
            {
              "name": "_depositRewardsAsset",
              "type": "address"
            },
            {
              "name": "_lootClaimCoolOffPeriod",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setAssetConfig",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_legoId",
              "type": "uint256"
            },
            {
              "name": "_staleBlocks",
              "type": "uint256"
            },
            {
              "name": "_txFeesSwapFee",
              "type": "uint256"
            },
            {
              "name": "_txFeesStableSwapFee",
              "type": "uint256"
            },
            {
              "name": "_txFeesRewardsFee",
              "type": "uint256"
            },
            {
              "name": "_ambassadorRevShareSwapRatio",
              "type": "uint256"
            },
            {
              "name": "_ambassadorRevShareRewardsRatio",
              "type": "uint256"
            },
            {
              "name": "_ambassadorRevShareYieldRatio",
              "type": "uint256"
            },
            {
              "name": "_isYieldAsset",
              "type": "bool"
            },
            {
              "name": "_isRebasing",
              "type": "bool"
            },
            {
              "name": "_underlyingAsset",
              "type": "address"
            },
            {
              "name": "_maxYieldIncrease",
              "type": "uint256"
            },
            {
              "name": "_performanceFee",
              "type": "uint256"
            },
            {
              "name": "_ambassadorBonusRatio",
              "type": "uint256"
            },
            {
              "name": "_bonusRatio",
              "type": "uint256"
            },
            {
              "name": "_altBonusAsset",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setIsStablecoin",
          "inputs": [
            {
              "name": "_asset",
              "type": "address"
            },
            {
              "name": "_isStablecoin",
              "type": "bool"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setAgentTemplate",
          "inputs": [
            {
              "name": "_agentTemplate",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setAgentCreationLimits",
          "inputs": [
            {
              "name": "_numAgentsAllowed",
              "type": "uint256"
            },
            {
              "name": "_enforceCreatorWhitelist",
              "type": "bool"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setStarterAgentParams",
          "inputs": [
            {
              "name": "_startingAgent",
              "type": "address"
            },
            {
              "name": "_startingAgentActivationLength",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setManagerConfig",
          "inputs": [
            {
              "name": "_managerPeriod",
              "type": "uint256"
            },
            {
              "name": "_managerActivationLength",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setPayeeConfig",
          "inputs": [
            {
              "name": "_payeePeriod",
              "type": "uint256"
            },
            {
              "name": "_payeeActivationLength",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setCanPerformSecurityAction",
          "inputs": [
            {
              "name": "_signer",
              "type": "address"
            },
            {
              "name": "_canPerform",
              "type": "bool"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setCreatorWhitelist",
          "inputs": [
            {
              "name": "_creator",
              "type": "address"
            },
            {
              "name": "_isWhitelisted",
              "type": "bool"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setLockedSigner",
          "inputs": [
            {
              "name": "_signer",
              "type": "address"
            },
            {
              "name": "_isLocked",
              "type": "bool"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setRipeRewardsConfig",
          "inputs": [
            {
              "name": "_ripeStakeRatio",
              "type": "uint256"
            },
            {
              "name": "_ripeLockDuration",
              "type": "uint256"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "executePendingAction",
          "inputs": [
            {
              "name": "_aid",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "cancelPendingAction",
          "inputs": [
            {
              "name": "_aid",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "actionType",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingUserWalletConfig",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "walletTemplate",
                  "type": "address"
                },
                {
                  "name": "configTemplate",
                  "type": "address"
                },
                {
                  "name": "trialAsset",
                  "type": "address"
                },
                {
                  "name": "trialAmount",
                  "type": "uint256"
                },
                {
                  "name": "numUserWalletsAllowed",
                  "type": "uint256"
                },
                {
                  "name": "enforceCreatorWhitelist",
                  "type": "bool"
                },
                {
                  "name": "minKeyActionTimeLock",
                  "type": "uint256"
                },
                {
                  "name": "maxKeyActionTimeLock",
                  "type": "uint256"
                },
                {
                  "name": "defaultStaleBlocks",
                  "type": "uint256"
                },
                {
                  "name": "depositRewardsAsset",
                  "type": "address"
                },
                {
                  "name": "txFees",
                  "type": "tuple",
                  "components": [
                    {
                      "name": "swapFee",
                      "type": "uint256"
                    },
                    {
                      "name": "stableSwapFee",
                      "type": "uint256"
                    },
                    {
                      "name": "rewardsFee",
                      "type": "uint256"
                    }
                  ]
                },
                {
                  "name": "ambassadorRevShare",
                  "type": "tuple",
                  "components": [
                    {
                      "name": "swapRatio",
                      "type": "uint256"
                    },
                    {
                      "name": "rewardsRatio",
                      "type": "uint256"
                    },
                    {
                      "name": "yieldRatio",
                      "type": "uint256"
                    }
                  ]
                },
                {
                  "name": "defaultYieldMaxIncrease",
                  "type": "uint256"
                },
                {
                  "name": "defaultYieldPerformanceFee",
                  "type": "uint256"
                },
                {
                  "name": "defaultYieldAmbassadorBonusRatio",
                  "type": "uint256"
                },
                {
                  "name": "defaultYieldBonusRatio",
                  "type": "uint256"
                },
                {
                  "name": "defaultYieldAltBonusAsset",
                  "type": "address"
                },
                {
                  "name": "lootClaimCoolOffPeriod",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingAssetConfig",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "asset",
                  "type": "address"
                },
                {
                  "name": "config",
                  "type": "tuple",
                  "components": [
                    {
                      "name": "legoId",
                      "type": "uint256"
                    },
                    {
                      "name": "decimals",
                      "type": "uint256"
                    },
                    {
                      "name": "staleBlocks",
                      "type": "uint256"
                    },
                    {
                      "name": "txFees",
                      "type": "tuple",
                      "components": [
                        {
                          "name": "swapFee",
                          "type": "uint256"
                        },
                        {
                          "name": "stableSwapFee",
                          "type": "uint256"
                        },
                        {
                          "name": "rewardsFee",
                          "type": "uint256"
                        }
                      ]
                    },
                    {
                      "name": "ambassadorRevShare",
                      "type": "tuple",
                      "components": [
                        {
                          "name": "swapRatio",
                          "type": "uint256"
                        },
                        {
                          "name": "rewardsRatio",
                          "type": "uint256"
                        },
                        {
                          "name": "yieldRatio",
                          "type": "uint256"
                        }
                      ]
                    },
                    {
                      "name": "yieldConfig",
                      "type": "tuple",
                      "components": [
                        {
                          "name": "isYieldAsset",
                          "type": "bool"
                        },
                        {
                          "name": "isRebasing",
                          "type": "bool"
                        },
                        {
                          "name": "underlyingAsset",
                          "type": "address"
                        },
                        {
                          "name": "maxYieldIncrease",
                          "type": "uint256"
                        },
                        {
                          "name": "performanceFee",
                          "type": "uint256"
                        },
                        {
                          "name": "ambassadorBonusRatio",
                          "type": "uint256"
                        },
                        {
                          "name": "bonusRatio",
                          "type": "uint256"
                        },
                        {
                          "name": "altBonusAsset",
                          "type": "address"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingAgentConfig",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "agentTemplate",
                  "type": "address"
                },
                {
                  "name": "numAgentsAllowed",
                  "type": "uint256"
                },
                {
                  "name": "enforceCreatorWhitelist",
                  "type": "bool"
                },
                {
                  "name": "startingAgent",
                  "type": "address"
                },
                {
                  "name": "startingAgentActivationLength",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingManagerConfig",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "managerPeriod",
                  "type": "uint256"
                },
                {
                  "name": "managerActivationLength",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingPayeeConfig",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "payeePeriod",
                  "type": "uint256"
                },
                {
                  "name": "payeeActivationLength",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingAddrToBool",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "addr",
                  "type": "address"
                },
                {
                  "name": "isAllowed",
                  "type": "bool"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "constructor",
          "inputs": [
            {
              "name": "_undyHq",
              "type": "address"
            },
            {
              "name": "_tempGov",
              "type": "address"
            },
            {
              "name": "_minConfigTimeLock",
              "type": "uint256"
            },
            {
              "name": "_maxConfigTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": []
        }
      ],
      "solc_json": {
        "language": "Vyper",
        "sources": {
          "contracts/modules/Addys.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\ninterface UndyHq:\n    def isValidAddr(_addr: address) -> bool: view\n    def getAddr(_regId: uint256) -> address: view\n    def undyToken() -> address: view\n\ninterface Switchboard:\n    def isSwitchboardAddr(_addr: address) -> bool: view\n\ninterface LegoBook:\n    def isLegoAddr(_addr: address) -> bool: view\n\nstruct Addys:\n    hq: address\n    undyToken: address\n    ledger: address\n    missionControl: address\n    legoBook: address\n    switchboard: address\n    hatchery: address\n    lootDistributor: address\n    appraiser: address\n    walletBackpack: address\n    billing: address\n    vaultRegistry: address\n\n# hq\nUNDY_HQ_FOR_ADDYS: immutable(address)\n\n# core addys\nLEDGER_ID: constant(uint256) = 1\nMISSION_CONTROL_ID: constant(uint256) = 2\nLEGO_BOOK_ID: constant(uint256) = 3\nSWITCHBOARD_ID: constant(uint256) = 4\nHATCHERY_ID: constant(uint256) = 5\nLOOT_DISTRIBUTOR_ID: constant(uint256) = 6\nAPPRAISER_ID: constant(uint256) = 7\nWALLET_BACKPACK_ID: constant(uint256) = 8\nBILLING_ID: constant(uint256) = 9\nVAULT_REGISTRY_ID: constant(uint256) = 10\n\n\n@deploy\ndef __init__(_undyHq: address):\n    assert _undyHq != empty(address) # dev: invalid undy hq\n    UNDY_HQ_FOR_ADDYS = _undyHq\n\n\n########\n# Core #\n########\n\n\n@view\n@external\ndef getAddys() -> Addys:\n    return self._generateAddys()\n\n\n@view\n@internal\ndef _getAddys(_addys: Addys = empty(Addys)) -> Addys:\n    if _addys.hq != empty(address):\n        return _addys\n    return self._generateAddys()\n\n\n@view\n@internal\ndef _generateAddys() -> Addys:\n    hq: address = UNDY_HQ_FOR_ADDYS\n    return Addys(\n        hq = hq,\n        undyToken = staticcall UndyHq(hq).undyToken(),\n        ledger = staticcall UndyHq(hq).getAddr(LEDGER_ID),\n        missionControl = staticcall UndyHq(hq).getAddr(MISSION_CONTROL_ID),\n        legoBook = staticcall UndyHq(hq).getAddr(LEGO_BOOK_ID),\n        switchboard = staticcall UndyHq(hq).getAddr(SWITCHBOARD_ID),\n        hatchery = staticcall UndyHq(hq).getAddr(HATCHERY_ID),\n        lootDistributor = staticcall UndyHq(hq).getAddr(LOOT_DISTRIBUTOR_ID),\n        appraiser = staticcall UndyHq(hq).getAddr(APPRAISER_ID),\n        walletBackpack = staticcall UndyHq(hq).getAddr(WALLET_BACKPACK_ID),\n        billing = staticcall UndyHq(hq).getAddr(BILLING_ID),\n        vaultRegistry = staticcall UndyHq(hq).getAddr(VAULT_REGISTRY_ID),\n    )\n\n\n##########\n# Tokens #\n##########\n\n\n@view\n@internal\ndef _getUndyToken() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).undyToken()\n\n\n###########\n# Helpers #\n###########\n\n\n# undy hq\n\n\n@view\n@external\ndef getUndyHq() -> address:\n    return self._getUndyHq()\n\n\n@view\n@internal\ndef _getUndyHq() -> address:\n    return UNDY_HQ_FOR_ADDYS\n\n\n# utils\n\n\n@view\n@internal\ndef _isValidUndyAddr(_addr: address, _hq: address = empty(address)) -> bool:\n    hq: address = _hq\n    if _hq == empty(address):\n        hq = UNDY_HQ_FOR_ADDYS\n    \n    # core departments\n    if staticcall UndyHq(hq).isValidAddr(_addr):\n        return True\n\n    # lego book\n    legoBook: address = staticcall UndyHq(hq).getAddr(LEGO_BOOK_ID)\n    if legoBook != empty(address) and staticcall LegoBook(legoBook).isLegoAddr(_addr):\n        return True\n\n    # switchboard config\n    switchboard: address = staticcall UndyHq(hq).getAddr(SWITCHBOARD_ID)\n    if switchboard != empty(address) and staticcall Switchboard(switchboard).isSwitchboardAddr(_addr):\n        return True\n\n    return False\n\n\n@view\n@internal\ndef _isSwitchboardAddr(_addr: address) -> bool:\n    switchboard: address = staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(SWITCHBOARD_ID)\n    if switchboard == empty(address):\n        return False\n    return staticcall Switchboard(switchboard).isSwitchboardAddr(_addr)\n\n\n@view\n@internal\ndef _isLegoBookAddr(_addr: address) -> bool:\n    legoBook: address = staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEGO_BOOK_ID)\n    if legoBook == empty(address):\n        return False\n    return staticcall LegoBook(legoBook).isLegoAddr(_addr)\n\n\n###############\n# Departments #\n###############\n\n\n# ledger\n\n\n@view\n@internal\ndef _getLedgerId() -> uint256:\n    return LEDGER_ID\n\n\n@view\n@internal\ndef _getLedgerAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEDGER_ID)\n\n\n# mission control\n\n\n@view\n@internal\ndef _getMissionControlId() -> uint256:\n    return MISSION_CONTROL_ID\n\n\n@view\n@internal\ndef _getMissionControlAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(MISSION_CONTROL_ID)\n\n\n# lego book\n\n\n@view\n@internal\ndef _getLegoBookId() -> uint256:\n    return LEGO_BOOK_ID\n\n\n@view\n@internal\ndef _getLegoBookAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEGO_BOOK_ID)\n\n\n# switchboard\n\n\n@view\n@internal\ndef _getSwitchboardId() -> uint256:\n    return SWITCHBOARD_ID\n\n\n@view\n@internal\ndef _getSwitchboardAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(SWITCHBOARD_ID)\n\n\n# hatchery\n\n\n@view\n@internal\ndef _getHatcheryId() -> uint256:\n    return HATCHERY_ID\n\n\n@view\n@internal\ndef _getHatcheryAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(HATCHERY_ID)\n\n\n# loot distributor\n\n\n@view\n@internal\ndef _getLootDistributorId() -> uint256:\n    return LOOT_DISTRIBUTOR_ID\n\n\n@view\n@internal\ndef _getLootDistributorAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LOOT_DISTRIBUTOR_ID)\n\n\n# appraiser\n\n\n@view\n@internal\ndef _getAppraiserId() -> uint256:\n    return APPRAISER_ID\n\n\n@view\n@internal\ndef _getAppraiserAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(APPRAISER_ID)\n\n\n# wallet backpack\n\n\n@view\n@internal\ndef _getWalletBackpackId() -> uint256:\n    return WALLET_BACKPACK_ID\n\n\n@view\n@internal\ndef _getWalletBackpackAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(WALLET_BACKPACK_ID)\n\n\n# billing\n\n\n@view\n@internal\ndef _getBillingId() -> uint256:\n    return BILLING_ID\n\n\n@view\n@internal\ndef _getBillingAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(BILLING_ID)\n\n\n# vault registry\n\n\n@view\n@internal\ndef _getVaultRegistryId() -> uint256:\n    return VAULT_REGISTRY_ID\n\n\n@view\n@internal\ndef _getVaultRegistryAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(VAULT_REGISTRY_ID)",
            "sha256sum": "4df6b72db9bb417d1af81660175be1450cfb7b3575f3d17a5b8a130bff87b781"
          },
          "contracts/modules/LocalGov.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\ninterface UndyHq:\n    def minGovChangeTimeLock() -> uint256: view\n    def maxGovChangeTimeLock() -> uint256: view\n    def governance() -> address: view\n\nstruct PendingGovernance:\n    newGov: address\n    initiatedBlock: uint256\n    confirmBlock: uint256\n\nevent GovChangeStarted:\n    prevGov: indexed(address)\n    newGov: indexed(address)\n    confirmBlock: uint256\n\nevent GovChangeConfirmed:\n    prevGov: indexed(address)\n    newGov: indexed(address)\n    initiatedBlock: uint256\n    confirmBlock: uint256\n\nevent GovChangeCancelled:\n    cancelledGov: indexed(address)\n    initiatedBlock: uint256\n    confirmBlock: uint256\n\nevent GovRelinquished:\n    prevGov: indexed(address)\n\nevent GovChangeTimeLockModified:\n    prevTimeLock: uint256\n    newTimeLock: uint256\n\nevent UndyHqSetupFinished:\n    prevGov: indexed(address)\n    newGov: indexed(address)\n    timeLock: uint256\n\n# governance\ngovernance: public(address)\npendingGov: public(PendingGovernance)\nnumGovChanges: public(uint256)\n\n# time lock\ngovChangeTimeLock: public(uint256)\n\n# config\nUNDY_HQ_FOR_GOV: immutable(address)\nMIN_GOV_TIME_LOCK: immutable(uint256)\nMAX_GOV_TIME_LOCK: immutable(uint256)\n\n\n@deploy\ndef __init__(\n    _undyHq: address,\n    _initialGov: address,\n    _minTimeLock: uint256,\n    _maxTimeLock: uint256,\n    _initialTimeLock: uint256,\n):\n    UNDY_HQ_FOR_GOV = _undyHq\n    self.governance = _initialGov\n\n    # undy hq\n    if _undyHq == empty(address):\n        assert _initialGov != empty(address) # dev: undy hq must have gov\n\n    # local gov (department, other smart contracts)\n    else:\n        hqGov: address = staticcall UndyHq(_undyHq).governance()\n        assert hqGov != empty(address) # dev: undy hq must have gov\n        assert _initialGov != hqGov # dev: undy hq cannot set same gov\n\n    # time locks\n    minTimeLock: uint256 = _minTimeLock\n    maxTimeLock: uint256 = _maxTimeLock\n    if minTimeLock == 0 or maxTimeLock == 0:\n        assert _undyHq != empty(address) # dev: need undy hq if no time locks\n        minTimeLock = staticcall UndyHq(_undyHq).minGovChangeTimeLock()\n        maxTimeLock = staticcall UndyHq(_undyHq).maxGovChangeTimeLock()\n\n    # set min and max time locks\n    assert minTimeLock < maxTimeLock # dev: invalid time lock\n    assert minTimeLock != 0 and maxTimeLock != max_value(uint256) # dev: invalid time lock\n    MIN_GOV_TIME_LOCK = minTimeLock\n    MAX_GOV_TIME_LOCK = maxTimeLock\n\n    # this contract is top level governance from Undy HQ -- not setting initial time lock during setup\n    if _undyHq == empty(address):\n        return\n\n    # set initial time lock (for local gov)\n    initialTimeLock: uint256 = max(minTimeLock, _initialTimeLock)\n    assert self._setGovTimeLock(initialTimeLock) # dev: invalid time lock\n\n\n@view\n@external\ndef getUndyHqFromGov() -> address:\n    return self._getUndyHqFromGov()\n\n\n@view\n@internal\ndef _getUndyHqFromGov() -> address:\n    return UNDY_HQ_FOR_GOV\n\n\n##############\n# Gov Access #\n##############\n\n\n@view\n@external\ndef canGovern(_addr: address) -> bool:\n    return self._canGovern(_addr)\n\n\n@view\n@internal\ndef _canGovern(_addr: address) -> bool:\n    if _addr == empty(address):\n        return False\n    return _addr in self._getGovernors()\n\n\n@view\n@external\ndef getGovernors() -> DynArray[address, 2]:\n    return self._getGovernors()\n\n\n@view\n@internal\ndef _getGovernors() -> DynArray[address, 2]:\n    governors: DynArray[address, 2] = []\n\n    # local governance\n    localGov: address = self.governance\n    if localGov != empty(address):\n        governors.append(localGov)\n\n    # undy hq governance\n    undyHq: address = UNDY_HQ_FOR_GOV\n    if undyHq == empty(address):\n        return governors\n\n    hqGov: address = staticcall UndyHq(undyHq).governance()\n    if hqGov != empty(address):\n        governors.append(hqGov)\n\n    return governors\n\n\n######################\n# Governance Changes #\n######################\n\n\n@view\n@external\ndef hasPendingGovChange() -> bool:\n    return self.pendingGov.confirmBlock != 0\n\n\n@view\n@internal\ndef _isUndyHq() -> bool:\n    return UNDY_HQ_FOR_GOV == empty(address)\n\n\n# start gov change\n\n\n@external\ndef startGovernanceChange(_newGov: address):\n    governors: DynArray[address, 2] = self._getGovernors()\n    assert msg.sender in governors # dev: no perms\n\n    # validation\n    if _newGov != empty(address):\n        assert _newGov not in governors # dev: invalid _newGov\n        assert _newGov.is_contract # dev: _newGov must be a contract\n    else:\n        assert not self._isUndyHq() # dev: undy hq cannot set 0x0\n\n    confirmBlock: uint256 = block.number + self.govChangeTimeLock\n    self.pendingGov = PendingGovernance(\n        newGov= _newGov,\n        initiatedBlock= block.number,\n        confirmBlock= confirmBlock,\n    )\n    log GovChangeStarted(prevGov=self.governance, newGov=_newGov, confirmBlock=confirmBlock)\n\n\n# confirm gov change\n\n\n@external\ndef confirmGovernanceChange():\n    data: PendingGovernance = self.pendingGov\n    assert data.confirmBlock != 0 and block.number >= data.confirmBlock # dev: time lock not reached\n\n    # check permissions\n    if data.newGov != empty(address):\n        assert msg.sender == data.newGov # dev: only new gov can confirm\n    else:\n        assert self._canGovern(msg.sender) # dev: no perms\n        assert not self._isUndyHq() # dev: undy hq cannot set 0x0\n\n    # set new governance\n    prevGov: address = self.governance\n    self.governance = data.newGov\n    self.numGovChanges += 1\n    self.pendingGov = empty(PendingGovernance)\n    log GovChangeConfirmed(prevGov=prevGov, newGov=data.newGov, initiatedBlock=data.initiatedBlock, confirmBlock=data.confirmBlock)\n\n\n# cancel gov change\n\n\n@external\ndef cancelGovernanceChange():\n    assert self._canGovern(msg.sender) # dev: no perms\n    data: PendingGovernance = self.pendingGov\n    assert data.confirmBlock != 0 # dev: no pending change\n    self.pendingGov = empty(PendingGovernance)\n    log GovChangeCancelled(cancelledGov=data.newGov, initiatedBlock=data.initiatedBlock, confirmBlock=data.confirmBlock)\n\n\n# relinquish gov (only for local gov)\n\n\n@external\ndef relinquishGov():\n    assert msg.sender == self.governance # dev: no perms\n    assert not self._isUndyHq() # dev: undy hq cannot relinquish gov\n\n    self.governance = empty(address)\n    self.numGovChanges += 1\n    log GovRelinquished(prevGov=msg.sender)\n\n\n####################\n# Time Lock Config #\n####################\n\n\n# set time lock\n\n\n@external\ndef setGovTimeLock(_numBlocks: uint256) -> bool:\n    assert self._canGovern(msg.sender) # dev: no perms\n    return self._setGovTimeLock(_numBlocks)\n\n\n@internal\ndef _setGovTimeLock(_numBlocks: uint256) -> bool:\n    prevTimeLock: uint256 = self.govChangeTimeLock\n    assert self._isValidGovTimeLock(_numBlocks, prevTimeLock) # dev: invalid time lock\n    self.govChangeTimeLock = _numBlocks\n    log GovChangeTimeLockModified(prevTimeLock=prevTimeLock, newTimeLock=_numBlocks)\n    return True\n\n\n# validation\n\n\n@view\n@external\ndef isValidGovTimeLock(_newTimeLock: uint256) -> bool:\n    return self._isValidGovTimeLock(_newTimeLock, self.govChangeTimeLock)\n\n\n@view\n@internal\ndef _isValidGovTimeLock(_newTimeLock: uint256, _prevTimeLock: uint256) -> bool:\n    if _newTimeLock == _prevTimeLock:\n        return False # no change\n    if self.pendingGov.confirmBlock != 0:\n        return False # cannot change while pending gov change\n    return _newTimeLock >= MIN_GOV_TIME_LOCK and _newTimeLock <= MAX_GOV_TIME_LOCK\n\n\n# utils\n\n\n@view\n@external\ndef minGovChangeTimeLock() -> uint256:\n    return MIN_GOV_TIME_LOCK\n\n\n@view\n@external\ndef maxGovChangeTimeLock() -> uint256:\n    return MAX_GOV_TIME_LOCK\n\n\n#################\n# Undy Hq Setup #\n#################\n\n\n@external\ndef finishUndyHqSetup(_newGov: address, _timeLock: uint256 = 0) -> bool:\n    assert self._isUndyHq() # dev: only undy hq\n    assert msg.sender == self.governance # dev: no perms\n    assert self.numGovChanges == 0 # dev: already changed gov\n\n    # validation\n    assert _newGov != empty(address) and _newGov.is_contract # dev: invalid _newGov\n    prevGov: address = self.governance\n\n    # set new gov\n    self.governance = _newGov\n    self.numGovChanges += 1\n\n    # set time lock\n    timeLock: uint256 = _timeLock\n    if timeLock == 0:\n        timeLock = MIN_GOV_TIME_LOCK\n    assert self._setGovTimeLock(timeLock) # dev: invalid time lock\n\n    log UndyHqSetupFinished(prevGov=prevGov, newGov=_newGov, timeLock=timeLock)\n    return True",
            "sha256sum": "c41aa3e0d0d96b512171813377ea277e2c7da690c3cd9b4662733b3f11f705b0"
          },
          "contracts/modules/TimeLock.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\nuses: gov\nimport contracts.modules.LocalGov as gov\n\nstruct PendingAction:\n    initiatedBlock: uint256\n    confirmBlock: uint256\n    expiration: uint256\n\nevent ActionTimeLockSet:\n    newTimeLock: uint256\n    prevTimeLock: uint256\n\nevent ExpirationSet:\n    expiration: uint256\n\n# core data\npendingActions: public(HashMap[uint256, PendingAction])\nactionId: public(uint256)\n\n# config\nactionTimeLock: public(uint256)\nexpiration: public(uint256)\n\nMIN_ACTION_TIMELOCK: immutable(uint256)\nMAX_ACTION_TIMELOCK: immutable(uint256)\n\n\n@deploy\ndef __init__(\n    _minActionTimeLock: uint256,\n    _maxActionTimeLock: uint256,\n    _initialTimeLock: uint256,\n    _expiration: uint256,\n):\n    # start at 1 index\n    self.actionId = 1\n\n    # set time lock boundaries\n    assert _minActionTimeLock < _maxActionTimeLock # dev: invalid time lock boundaries\n    assert _minActionTimeLock != 0 and _maxActionTimeLock != max_value(uint256) # dev: invalid time lock boundaries\n    MIN_ACTION_TIMELOCK = _minActionTimeLock\n    MAX_ACTION_TIMELOCK = _maxActionTimeLock\n\n    # set expiration time\n    self._setExpiration(_expiration, _initialTimeLock)\n\n    # set initial time lock\n    if _initialTimeLock != 0:\n        assert self._setActionTimeLock(_initialTimeLock, 0) # dev: failed to set initial time lock\n\n\n########\n# Core #\n########\n\n\n# initiate\n\n\n@internal\ndef _initiateAction() -> uint256:\n    actionId: uint256 = self.actionId\n    confirmBlock: uint256 = block.number + self.actionTimeLock\n    self.pendingActions[actionId] = PendingAction(\n        initiatedBlock= block.number,\n        confirmBlock= confirmBlock,\n        expiration= confirmBlock + self.expiration,\n    )\n    self.actionId += 1\n    return actionId\n\n\n# confirm\n\n\n@internal\ndef _confirmAction(_actionId: uint256) -> bool:\n    if not self._canConfirmAction(_actionId):\n        return False\n    self.pendingActions[_actionId] = empty(PendingAction)\n    return True\n\n\n# cancel\n\n\n@internal\ndef _cancelAction(_actionId: uint256) -> bool:\n    data: PendingAction = self.pendingActions[_actionId]\n    if data.confirmBlock == 0:\n        return False\n    self.pendingActions[_actionId] = empty(PendingAction)\n    return True\n\n\n#########\n# Utils #\n#########\n\n\n# can confirm\n\n\n@view\n@external\ndef canConfirmAction(_actionId: uint256) -> bool:\n    return self._canConfirmAction(_actionId)\n\n\n@view\n@internal\ndef _canConfirmAction(_actionId: uint256) -> bool:\n    data: PendingAction = self.pendingActions[_actionId]\n    if data.confirmBlock == 0 or block.number < data.confirmBlock:\n        return False\n    if block.number >= data.expiration:\n        return False\n    return True\n\n\n# is expired\n\n\n@view\n@external\ndef isExpired(_actionId: uint256) -> bool:\n    return self._isExpired(_actionId)\n\n\n@view\n@internal\ndef _isExpired(_actionId: uint256) -> bool:\n    data: PendingAction = self.pendingActions[_actionId]\n    if data.confirmBlock == 0:\n        return False\n    return block.number >= data.expiration\n\n\n# pending action\n\n\n@view\n@external\ndef hasPendingAction(_actionId: uint256) -> bool:\n    return self._hasPendingAction(_actionId)\n\n\n@view\n@internal\ndef _hasPendingAction(_actionId: uint256) -> bool:\n    return self.pendingActions[_actionId].confirmBlock != 0\n\n\n# confirmation block\n\n\n@view\n@external\ndef getActionConfirmationBlock(_actionId: uint256) -> uint256:\n    return self._getActionConfirmationBlock(_actionId)\n\n\n@view\n@internal\ndef _getActionConfirmationBlock(_actionId: uint256) -> uint256:\n    return self.pendingActions[_actionId].confirmBlock\n\n\n######################\n# Config - Time Lock #\n######################\n\n\n@external\ndef setActionTimeLock(_newTimeLock: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    return self._setActionTimeLock(_newTimeLock, self.actionTimeLock)\n\n\n@internal\ndef _setActionTimeLock(_newTimeLock: uint256, _prevTimeLock: uint256) -> bool:\n    assert self._isValidActionTimeLock(_newTimeLock, _prevTimeLock) # dev: invalid time lock\n    self.actionTimeLock = _newTimeLock\n    log ActionTimeLockSet(newTimeLock=_newTimeLock, prevTimeLock=_prevTimeLock)\n    return True\n\n\n# validation\n\n\n@view\n@external\ndef isValidActionTimeLock(_newTimeLock: uint256) -> bool:\n    return self._isValidActionTimeLock(_newTimeLock, self.actionTimeLock)\n\n\n@view\n@internal\ndef _isValidActionTimeLock(_newTimeLock: uint256, _prevTimeLock: uint256) -> bool:\n    if _newTimeLock == _prevTimeLock:\n        return False # no change\n    return _newTimeLock >= MIN_ACTION_TIMELOCK and _newTimeLock <= MAX_ACTION_TIMELOCK\n\n\n# utils\n\n\n@view\n@external\ndef minActionTimeLock() -> uint256:\n    return MIN_ACTION_TIMELOCK\n\n\n@view\n@external\ndef maxActionTimeLock() -> uint256:\n    return MAX_ACTION_TIMELOCK\n\n\n#######################\n# Config - Expiration #\n#######################\n\n\n@external\ndef setExpiration(_expiration: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    return self._setExpiration(_expiration, self.actionTimeLock)\n\n\n@internal\ndef _setExpiration(_expiration: uint256, _timeLock: uint256) -> bool:\n    assert self._isValidExpiration(_expiration, _timeLock) # dev: invalid expiration\n    self.expiration = _expiration\n    log ExpirationSet(expiration=_expiration)\n    return True\n\n\n# validation\n\n\n@view\n@internal\ndef _isValidExpiration(_expiration: uint256, _timeLock: uint256) -> bool:\n    if _expiration == 0 or _expiration == max_value(uint256):\n        return False\n    if _expiration < _timeLock:\n        return False\n    return True\n\n\n################\n# Finish Setup #\n################\n\n\n@external\ndef setActionTimeLockAfterSetup(_newTimeLock: uint256 = 0) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    prevTimeLock: uint256 = self.actionTimeLock\n    assert prevTimeLock == 0 # dev: already set\n\n    timeLock: uint256 = _newTimeLock\n    if timeLock == 0:\n        timeLock = MIN_ACTION_TIMELOCK\n    return self._setActionTimeLock(timeLock, prevTimeLock)",
            "sha256sum": "80ec25619b21a5ac9791a94ca96d5ee38a887cb59d0e9368e23ea4a2de75da8e"
          },
          "interfaces/ConfigStructs.vyi": {
            "content": "# @version 0.4.3\n\nstruct UserWalletConfig:\n    walletTemplate: address\n    configTemplate: address\n    trialAsset: address\n    trialAmount: uint256\n    numUserWalletsAllowed: uint256\n    enforceCreatorWhitelist: bool\n    minKeyActionTimeLock: uint256\n    maxKeyActionTimeLock: uint256\n    defaultStaleBlocks: uint256\n    depositRewardsAsset: address\n    txFees: TxFees\n    ambassadorRevShare: AmbassadorRevShare\n    defaultYieldMaxIncrease: uint256\n    defaultYieldPerformanceFee: uint256\n    defaultYieldAmbassadorBonusRatio: uint256\n    defaultYieldBonusRatio: uint256\n    defaultYieldAltBonusAsset: address\n    lootClaimCoolOffPeriod: uint256\n\nstruct AssetConfig:\n    legoId: uint256\n    decimals: uint256\n    staleBlocks: uint256\n    txFees: TxFees\n    ambassadorRevShare: AmbassadorRevShare\n    yieldConfig: YieldConfig\n\nstruct TxFees:\n    swapFee: uint256\n    stableSwapFee: uint256\n    rewardsFee: uint256\n\nstruct AmbassadorRevShare:\n    swapRatio: uint256\n    rewardsRatio: uint256\n    yieldRatio: uint256\n\nstruct YieldConfig:\n    isYieldAsset: bool\n    isRebasing: bool\n    underlyingAsset: address\n    maxYieldIncrease: uint256\n    performanceFee: uint256\n    ambassadorBonusRatio: uint256\n    bonusRatio: uint256\n    altBonusAsset: address\n\nstruct AgentConfig:\n    agentTemplate: address\n    numAgentsAllowed: uint256\n    enforceCreatorWhitelist: bool\n    startingAgent: address\n    startingAgentActivationLength: uint256\n\nstruct ManagerConfig:\n    managerPeriod: uint256\n    managerActivationLength: uint256\n\nstruct PayeeConfig:\n    payeePeriod: uint256\n    payeeActivationLength: uint256\n\nstruct ChequeConfig:\n    maxNumActiveCheques: uint256\n    instantUsdThreshold: uint256\n    periodLength: uint256\n    expensiveDelayBlocks: uint256\n    defaultExpiryBlocks: uint256",
            "sha256sum": "5398a73269f73f958f8d644802e65a65f335cf33c46938d0e05eabad7bc8d45f"
          },
          "contracts/config/SwitchboardAlpha.vy": {
            "content": "#        ______   __     __   __   ______  ______   __  __   ______   ______   ______   ______   _____    \n#       /\\  ___\\ /\\ \\  _ \\ \\ /\\ \\ /\\__  _\\/\\  ___\\ /\\ \\_\\ \\ /\\  == \\ /\\  __ \\ /\\  __ \\ /\\  == \\ /\\  __-.  \n#       \\ \\___  \\\\ \\ \\/ \".\\ \\\\ \\ \\\\/_/\\ \\/\\ \\ \\____\\ \\  __ \\\\ \\  __< \\ \\ \\/\\ \\\\ \\  __ \\\\ \\  __< \\ \\ \\/\\ \\ \n#        \\/\\_____\\\\ \\__/\".~\\_\\\\ \\_\\  \\ \\_\\ \\ \\_____\\\\ \\_\\ \\_\\\\ \\_____\\\\ \\_____\\\\ \\_\\ \\_\\\\ \\_\\ \\_\\\\ \\____- \n#         \\/_____/ \\/_/   \\/_/ \\/_/   \\/_/  \\/_____/ \\/_/\\/_/ \\/_____/ \\/_____/ \\/_/\\/_/ \\/_/ /_/ \\/____/ \n#                                                  \u250f\u2513\u2513  \u2513   \n#                                                  \u2523\u252b\u2503\u250f\u2513\u2523\u2513\u250f\u2513\n#                                                  \u251b\u2517\u2517\u2523\u251b\u251b\u2517\u2517\u253b\n#                                                     \u251b     \n#\n#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\nexports: addys.__interface__\nexports: gov.__interface__\nexports: timeLock.__interface__\n\ninitializes: addys\ninitializes: gov\ninitializes: timeLock[gov := gov]\n\nimport contracts.modules.Addys as addys\nimport contracts.modules.LocalGov as gov\nimport contracts.modules.TimeLock as timeLock\n\nimport interfaces.ConfigStructs as cs\nfrom ethereum.ercs import IERC20Detailed\n\ninterface MissionControl:\n    def setCanPerformSecurityAction(_signer: address, _canPerform: bool): nonpayable\n    def setCreatorWhitelist(_creator: address, _isWhitelisted: bool): nonpayable\n    def setAssetConfig(_asset: address, _config: cs.AssetConfig): nonpayable\n    def setIsStablecoin(_asset: address, _isStablecoin: bool): nonpayable\n    def setLockedSigner(_signer: address, _isLocked: bool): nonpayable\n    def setUserWalletConfig(_config: cs.UserWalletConfig): nonpayable\n    def canPerformSecurityAction(_signer: address) -> bool: view\n    def setManagerConfig(_config: cs.ManagerConfig): nonpayable\n    def setPayeeConfig(_config: cs.PayeeConfig): nonpayable\n    def setAgentConfig(_config: cs.AgentConfig): nonpayable\n    def userWalletConfig() -> cs.UserWalletConfig: view\n    def agentConfig() -> cs.AgentConfig: view\n\ninterface LootDistributor:\n    def setRipeRewardsConfig(_ripeStakeRatio: uint256, _ripeLockDuration: uint256): nonpayable\n\ninterface Registry:\n    def isValidRegId(_regId: uint256) -> bool: view\n\nflag ActionType:\n    USER_WALLET_TEMPLATES\n    TRIAL_FUNDS\n    WALLET_CREATION_LIMITS\n    KEY_ACTION_TIMELOCK_BOUNDS\n    DEFAULT_STALE_BLOCKS\n    TX_FEES\n    AMBASSADOR_REV_SHARE\n    DEFAULT_YIELD_PARAMS\n    LOOT_PARAMS\n    AGENT_TEMPLATE\n    AGENT_CREATION_LIMITS\n    STARTER_AGENT_PARAMS\n    MANAGER_CONFIG\n    PAYEE_CONFIG\n    CAN_PERFORM_SECURITY_ACTION\n    ASSET_CONFIG\n    IS_STABLECOIN\n\nstruct IsAddrAllowed:\n    addr: address\n    isAllowed: bool\n\nstruct PendingAssetConfig:\n    asset: address\n    config: cs.AssetConfig\n\nevent PendingUserWalletTemplatesChange:\n    walletTemplate: address\n    configTemplate: address\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent UserWalletTemplatesSet:\n    walletTemplate: address\n    configTemplate: address\n\nevent PendingTrialFundsChange:\n    trialAsset: address\n    trialAmount: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent TrialFundsSet:\n    trialAsset: address\n    trialAmount: uint256\n\nevent PendingWalletCreationLimitsChange:\n    numUserWalletsAllowed: uint256\n    enforceCreatorWhitelist: bool\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent WalletCreationLimitsSet:\n    numUserWalletsAllowed: uint256\n    enforceCreatorWhitelist: bool\n\nevent PendingKeyActionTimelockBoundsChange:\n    minKeyActionTimeLock: uint256\n    maxKeyActionTimeLock: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent KeyActionTimelockBoundsSet:\n    minKeyActionTimeLock: uint256\n    maxKeyActionTimeLock: uint256\n\nevent PendingDefaultStaleBlocksChange:\n    defaultStaleBlocks: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent DefaultStaleBlocksSet:\n    defaultStaleBlocks: uint256\n\nevent PendingTxFeesChange:\n    swapFee: uint256\n    stableSwapFee: uint256\n    rewardsFee: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent TxFeesSet:\n    swapFee: uint256\n    stableSwapFee: uint256\n    rewardsFee: uint256\n\nevent PendingAmbassadorRevShareChange:\n    swapRatio: uint256\n    rewardsRatio: uint256\n    yieldRatio: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent AmbassadorRevShareSet:\n    swapRatio: uint256\n    rewardsRatio: uint256\n    yieldRatio: uint256\n\nevent PendingDefaultYieldParamsChange:\n    defaultYieldMaxIncrease: uint256\n    defaultYieldPerformanceFee: uint256\n    defaultYieldAmbassadorBonusRatio: uint256\n    defaultYieldBonusRatio: uint256\n    defaultYieldAltBonusAsset: address\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent DefaultYieldParamsSet:\n    defaultYieldMaxIncrease: uint256\n    defaultYieldPerformanceFee: uint256\n    defaultYieldAmbassadorBonusRatio: uint256\n    defaultYieldBonusRatio: uint256\n    defaultYieldAltBonusAsset: address\n\nevent PendingLootParamsChange:\n    depositRewardsAsset: address\n    lootClaimCoolOffPeriod: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent LootParamsSet:\n    depositRewardsAsset: address\n    lootClaimCoolOffPeriod: uint256\n\nevent PendingAssetConfigChange:\n    asset: address\n    legoId: uint256\n    staleBlocks: uint256\n    txFeesSwapFee: uint256\n    txFeesStableSwapFee: uint256\n    txFeesRewardsFee: uint256\n    ambassadorRevShareSwapRatio: uint256\n    ambassadorRevShareRewardsRatio: uint256\n    ambassadorRevShareYieldRatio: uint256\n    isYieldAsset: bool\n    isRebasing: bool\n    underlyingAsset: address\n    maxYieldIncrease: uint256\n    performanceFee: uint256\n    ambassadorBonusRatio: uint256\n    bonusRatio: uint256\n    altBonusAsset: address\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent PendingIsStablecoinChange:\n    asset: address\n    isStablecoin: bool\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent IsStablecoinSet:\n    asset: address\n    isStablecoin: bool\n\nevent AssetConfigSet:\n    asset: address\n    legoId: uint256\n    staleBlocks: uint256\n    txFeesSwapFee: uint256\n    txFeesStableSwapFee: uint256\n    txFeesRewardsFee: uint256\n    ambassadorRevShareSwapRatio: uint256\n    ambassadorRevShareRewardsRatio: uint256\n    ambassadorRevShareYieldRatio: uint256\n    isYieldAsset: bool\n    isRebasing: bool\n    underlyingAsset: address\n    maxYieldIncrease: uint256\n    performanceFee: uint256\n    ambassadorBonusRatio: uint256\n    bonusRatio: uint256\n    altBonusAsset: address\n\nevent PendingAgentTemplateChange:\n    agentTemplate: address\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent AgentTemplateSet:\n    agentTemplate: address\n\nevent PendingAgentCreationLimitsChange:\n    numAgentsAllowed: uint256\n    enforceCreatorWhitelist: bool\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent AgentCreationLimitsSet:\n    numAgentsAllowed: uint256\n    enforceCreatorWhitelist: bool\n\nevent PendingStarterAgentParamsChange:\n    startingAgent: address\n    startingAgentActivationLength: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent StarterAgentParamsSet:\n    startingAgent: address\n    startingAgentActivationLength: uint256\n\nevent PendingManagerConfigChange:\n    managerPeriod: uint256\n    managerActivationLength: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent PendingPayeeConfigChange:\n    payeePeriod: uint256\n    payeeActivationLength: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent PendingCanPerformSecurityAction:\n    signer: address\n    canPerform: bool\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent CreatorWhitelistSet:\n    creator: address\n    isWhitelisted: bool\n    caller: address\n\nevent ManagerConfigSet:\n    managerPeriod: uint256\n    managerActivationLength: uint256\n\nevent PayeeConfigSet:\n    payeePeriod: uint256\n    payeeActivationLength: uint256\n\nevent CanPerformSecurityAction:\n    signer: address\n    canPerform: bool\n\nevent LockedSignerSet:\n    signer: address\n    isLocked: bool\n    caller: address\n\nevent RipeRewardsConfigSetFromSwitchboard:\n    ripeStakeRatio: uint256\n    ripeLockDuration: uint256\n\n# pending config changes\nactionType: public(HashMap[uint256, ActionType]) # aid -> type\npendingUserWalletConfig: public(HashMap[uint256, cs.UserWalletConfig]) # aid -> config\npendingAssetConfig: public(HashMap[uint256, PendingAssetConfig]) # aid -> config\npendingAgentConfig: public(HashMap[uint256, cs.AgentConfig]) # aid -> config\npendingManagerConfig: public(HashMap[uint256, cs.ManagerConfig]) # aid -> config\npendingPayeeConfig: public(HashMap[uint256, cs.PayeeConfig]) # aid -> config\npendingAddrToBool: public(HashMap[uint256, IsAddrAllowed])\n\nHUNDRED_PERCENT: constant(uint256) = 100_00 # 100%\n\n\n@deploy\ndef __init__(\n    _undyHq: address,\n    _tempGov: address,\n    _minConfigTimeLock: uint256,\n    _maxConfigTimeLock: uint256,\n):\n    addys.__init__(_undyHq)\n    gov.__init__(_undyHq, _tempGov, 0, 0, 0)\n    timeLock.__init__(_minConfigTimeLock, _maxConfigTimeLock, 0, _maxConfigTimeLock)\n\n\n# access control\n\n\n@view\n@internal\ndef _hasPermsToEnable(_caller: address, _shouldEnable: bool) -> bool:\n    if gov._canGovern(_caller):\n        return True\n    if not _shouldEnable:\n        return staticcall MissionControl(addys._getMissionControlAddr()).canPerformSecurityAction(_caller)\n    return False\n\n\n######################\n# User Wallet Config #\n######################\n\n\n# user wallet templates\n\n\n@external\ndef setUserWalletTemplates(_walletTemplate: address, _configTemplate: address) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._areValidUserWalletTemplates(_walletTemplate, _configTemplate) # dev: invalid user wallet templates\n    return self._setPendingUserWalletConfig(ActionType.USER_WALLET_TEMPLATES, _walletTemplate, _configTemplate)\n\n\n@view\n@internal\ndef _areValidUserWalletTemplates(_walletTemplate: address, _configTemplate: address) -> bool:\n    if empty(address) in [_walletTemplate, _configTemplate]:\n        return False\n    if not _walletTemplate.is_contract or not _configTemplate.is_contract:\n        return False\n    return True\n\n\n# trial funds\n\n\n@external\ndef setTrialFunds(_trialAsset: address, _trialAmount: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    return self._setPendingUserWalletConfig(\n        ActionType.TRIAL_FUNDS,\n        empty(address),\n        empty(address),\n        _trialAsset,\n        _trialAmount\n    )\n\n\n# wallet creation limits\n\n\n@external\ndef setWalletCreationLimits(_numUserWalletsAllowed: uint256, _enforceCreatorWhitelist: bool) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._isValidNumUserWalletsAllowed(_numUserWalletsAllowed) # dev: invalid num user wallets allowed\n    return self._setPendingUserWalletConfig(\n        ActionType.WALLET_CREATION_LIMITS,\n        empty(address),\n        empty(address),\n        empty(address),\n        0,\n        _numUserWalletsAllowed,\n        _enforceCreatorWhitelist\n    )\n\n\n@view\n@internal\ndef _isValidNumUserWalletsAllowed(_numUserWalletsAllowed: uint256) -> bool:\n    if _numUserWalletsAllowed == 0:\n        return False\n    if _numUserWalletsAllowed == max_value(uint256):\n        return False\n    return True\n\n\n# key action timelock bounds\n\n\n@external\ndef setKeyActionTimelockBounds(_minKeyActionTimeLock: uint256, _maxKeyActionTimeLock: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._areValidKeyActionTimelockBounds(_minKeyActionTimeLock, _maxKeyActionTimeLock) # dev: invalid key action timelock bounds\n    return self._setPendingUserWalletConfig(\n        ActionType.KEY_ACTION_TIMELOCK_BOUNDS,\n        empty(address),\n        empty(address),\n        empty(address),\n        0,\n        0,\n        False,\n        _minKeyActionTimeLock,\n        _maxKeyActionTimeLock\n    )\n\n\n@view\n@internal\ndef _areValidKeyActionTimelockBounds(_minKeyActionTimeLock: uint256, _maxKeyActionTimeLock: uint256) -> bool:\n    if 0 in [_minKeyActionTimeLock, _maxKeyActionTimeLock]:\n        return False\n    if max_value(uint256) in [_minKeyActionTimeLock, _maxKeyActionTimeLock]:\n        return False\n    if _minKeyActionTimeLock >= _maxKeyActionTimeLock:\n        return False\n    return True\n\n\n# default stale blocks\n\n\n@external\ndef setDefaultStaleBlocks(_defaultStaleBlocks: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._isValidStaleBlocks(_defaultStaleBlocks) # dev: invalid default stale blocks\n    return self._setPendingUserWalletConfig(\n        ActionType.DEFAULT_STALE_BLOCKS,\n        empty(address),\n        empty(address),\n        empty(address),\n        0,\n        0,\n        False,\n        0,\n        0,\n        _defaultStaleBlocks\n    )\n\n\n@view\n@internal\ndef _isValidStaleBlocks(_staleBlocks: uint256) -> bool:\n    if _staleBlocks == 0:\n        return False\n    if _staleBlocks == max_value(uint256):\n        return False\n    return True\n\n\n# tx fees\n\n\n@external\ndef setTxFees(_swapFee: uint256, _stableSwapFee: uint256, _rewardsFee: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._areValidTxFees(_swapFee, _stableSwapFee, _rewardsFee) # dev: invalid tx fees\n    return self._setPendingUserWalletConfig(\n        ActionType.TX_FEES,\n        empty(address),\n        empty(address),\n        empty(address),\n        0,\n        0,\n        False,\n        0,\n        0,\n        0,\n        empty(address),\n        _swapFee,\n        _stableSwapFee,\n        _rewardsFee\n    )\n\n\n@view\n@internal\ndef _areValidTxFees(_swapFee: uint256, _stableSwapFee: uint256, _rewardsFee: uint256) -> bool:\n    if _swapFee > 5_00: # 5% max\n        return False\n    if _stableSwapFee > 2_00: # 2% max\n        return False\n    if _rewardsFee > 25_00: # 25% max\n        return False\n    return True\n\n\n# ambassador rev share\n\n\n@external\ndef setAmbassadorRevShare(_swapRatio: uint256, _rewardsRatio: uint256, _yieldRatio: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._areValidAmbassadorRevShareRatios(_swapRatio, _rewardsRatio, _yieldRatio) # dev: invalid ambassador rev share ratios\n    return self._setPendingUserWalletConfig(\n        ActionType.AMBASSADOR_REV_SHARE,\n        empty(address),\n        empty(address),\n        empty(address),\n        0,\n        0,\n        False,\n        0,\n        0,\n        0,\n        empty(address),\n        0,\n        0,\n        0,\n        _swapRatio,\n        _rewardsRatio,\n        _yieldRatio\n    )\n\n\n@view\n@internal\ndef _areValidAmbassadorRevShareRatios(_swapRatio: uint256, _rewardsRatio: uint256, _yieldRatio: uint256) -> bool:\n    if _swapRatio > HUNDRED_PERCENT:\n        return False\n    if _rewardsRatio > HUNDRED_PERCENT:\n        return False\n    if _yieldRatio > HUNDRED_PERCENT:\n        return False\n    return True\n\n\n# default yield params\n\n\n@external\ndef setDefaultYieldParams(\n    _defaultYieldMaxIncrease: uint256,\n    _defaultYieldPerformanceFee: uint256,\n    _defaultYieldAmbassadorBonusRatio: uint256,\n    _defaultYieldBonusRatio: uint256,\n    _defaultYieldAltBonusAsset: address\n) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._areValidYieldParams(\n        _defaultYieldMaxIncrease,\n        _defaultYieldPerformanceFee,\n        _defaultYieldAmbassadorBonusRatio,\n        _defaultYieldBonusRatio\n    ) # dev: invalid default yield params\n\n    return self._setPendingUserWalletConfig(\n        ActionType.DEFAULT_YIELD_PARAMS,\n        empty(address),\n        empty(address),\n        empty(address),\n        0,\n        0,\n        False,\n        0,\n        0,\n        0,\n        empty(address),\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        _defaultYieldMaxIncrease,\n        _defaultYieldPerformanceFee,\n        _defaultYieldAmbassadorBonusRatio,\n        _defaultYieldBonusRatio,\n        _defaultYieldAltBonusAsset\n    )\n\n\n@view\n@internal\ndef _areValidYieldParams(\n    _maxIncrease: uint256,\n    _performanceFee: uint256,\n    _ambassadorBonusRatio: uint256,\n    _bonusRatio: uint256\n) -> bool:\n    if _maxIncrease > 10_00: # 10% max\n        return False\n    if _performanceFee > 25_00: # 25% max\n        return False\n    if _ambassadorBonusRatio > HUNDRED_PERCENT:\n        return False\n    if _bonusRatio > HUNDRED_PERCENT:\n        return False\n    return True\n\n\n# loot params\n\n\n@external\ndef setLootParams(_depositRewardsAsset: address, _lootClaimCoolOffPeriod: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._areValidLootParams(_lootClaimCoolOffPeriod) # dev: invalid loot params\n    return self._setPendingUserWalletConfig(\n        ActionType.LOOT_PARAMS,\n        empty(address),\n        empty(address),\n        empty(address),\n        0,\n        0,\n        False,\n        0,\n        0,\n        0,\n        _depositRewardsAsset,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        empty(address),\n        _lootClaimCoolOffPeriod\n    )\n\n\n@view\n@internal\ndef _areValidLootParams(_lootClaimCoolOffPeriod: uint256) -> bool:\n    if _lootClaimCoolOffPeriod == 0:\n        return False\n    if _lootClaimCoolOffPeriod == max_value(uint256):\n        return False\n    return True\n\n\n################\n# Asset Config #\n################\n\n\n@external\ndef setAssetConfig(\n    _asset: address,\n    _legoId: uint256,\n    _staleBlocks: uint256,\n    _txFeesSwapFee: uint256,\n    _txFeesStableSwapFee: uint256,\n    _txFeesRewardsFee: uint256,\n    _ambassadorRevShareSwapRatio: uint256,\n    _ambassadorRevShareRewardsRatio: uint256,\n    _ambassadorRevShareYieldRatio: uint256,\n    _isYieldAsset: bool,\n    _isRebasing: bool,\n    _underlyingAsset: address,\n    _maxYieldIncrease: uint256,\n    _performanceFee: uint256,\n    _ambassadorBonusRatio: uint256,\n    _bonusRatio: uint256,\n    _altBonusAsset: address\n) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._isValidAssetConfig(\n        _asset,\n        _legoId,\n        _staleBlocks,\n        _txFeesSwapFee,\n        _txFeesStableSwapFee,\n        _txFeesRewardsFee,\n        _ambassadorRevShareSwapRatio,\n        _ambassadorRevShareRewardsRatio,\n        _ambassadorRevShareYieldRatio,\n        _isYieldAsset,\n        _isRebasing,\n        _underlyingAsset,\n        _maxYieldIncrease,\n        _performanceFee,\n        _ambassadorBonusRatio,\n        _bonusRatio,\n        _altBonusAsset\n    ) # dev: invalid asset config\n\n    yieldConfig: cs.YieldConfig = empty(cs.YieldConfig)\n    if _isYieldAsset:\n        yieldConfig = cs.YieldConfig(\n            isYieldAsset=_isYieldAsset,\n            isRebasing=_isRebasing,\n            underlyingAsset=_underlyingAsset,\n            maxYieldIncrease=_maxYieldIncrease,\n            performanceFee=_performanceFee,\n            ambassadorBonusRatio=_ambassadorBonusRatio,\n            bonusRatio=_bonusRatio,\n            altBonusAsset=_altBonusAsset\n        )\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.ASSET_CONFIG\n    self.pendingAssetConfig[aid] = PendingAssetConfig(\n        asset=_asset,\n        config=cs.AssetConfig(\n            legoId=_legoId,\n            decimals=convert(staticcall IERC20Detailed(_asset).decimals(), uint256),\n            staleBlocks=_staleBlocks,\n            txFees=cs.TxFees(\n                swapFee=_txFeesSwapFee,\n                stableSwapFee=_txFeesStableSwapFee,\n                rewardsFee=_txFeesRewardsFee,\n            ),\n            ambassadorRevShare=cs.AmbassadorRevShare(\n                swapRatio=_ambassadorRevShareSwapRatio,\n                rewardsRatio=_ambassadorRevShareRewardsRatio,\n                yieldRatio=_ambassadorRevShareYieldRatio,\n            ),\n            yieldConfig=yieldConfig,\n        )\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingAssetConfigChange(\n        asset=_asset,\n        legoId=_legoId,\n        staleBlocks=_staleBlocks,\n        txFeesSwapFee=_txFeesSwapFee,\n        txFeesStableSwapFee=_txFeesStableSwapFee,\n        txFeesRewardsFee=_txFeesRewardsFee,\n        ambassadorRevShareSwapRatio=_ambassadorRevShareSwapRatio,\n        ambassadorRevShareRewardsRatio=_ambassadorRevShareRewardsRatio,\n        ambassadorRevShareYieldRatio=_ambassadorRevShareYieldRatio,\n        isYieldAsset=_isYieldAsset,\n        isRebasing=_isRebasing,\n        underlyingAsset=_underlyingAsset,\n        maxYieldIncrease=_maxYieldIncrease,\n        performanceFee=_performanceFee,\n        ambassadorBonusRatio=_ambassadorBonusRatio,\n        bonusRatio=_bonusRatio,\n        altBonusAsset=_altBonusAsset,\n        confirmationBlock=confirmationBlock,\n        actionId=aid,\n    )\n    return aid\n\n\n@view\n@internal\ndef _isValidAssetConfig(\n    _asset: address,\n    _legoId: uint256,\n    _staleBlocks: uint256,\n    _txFeesSwapFee: uint256,\n    _txFeesStableSwapFee: uint256,\n    _txFeesRewardsFee: uint256,\n    _ambassadorRevShareSwapRatio: uint256,\n    _ambassadorRevShareRewardsRatio: uint256,\n    _ambassadorRevShareYieldRatio: uint256,\n    _isYieldAsset: bool,\n    _isRebasing: bool,\n    _underlyingAsset: address,\n    _maxYieldIncrease: uint256,\n    _performanceFee: uint256,\n    _ambassadorBonusRatio: uint256,\n    _bonusRatio: uint256,\n    _altBonusAsset: address\n) -> bool:\n    if _asset == empty(address):\n        return False\n\n    if not staticcall Registry(addys._getLegoBookAddr()).isValidRegId(_legoId):\n        return False\n\n    if not self._isValidStaleBlocks(_staleBlocks):\n        return False\n\n    if not self._areValidTxFees(_txFeesSwapFee, _txFeesStableSwapFee, _txFeesRewardsFee):\n        return False\n\n    if not self._areValidAmbassadorRevShareRatios(_ambassadorRevShareSwapRatio, _ambassadorRevShareRewardsRatio, _ambassadorRevShareYieldRatio):\n        return False\n\n    if _isYieldAsset and not self._areValidYieldParams(_maxYieldIncrease, _performanceFee, _ambassadorBonusRatio, _bonusRatio):\n        return False\n\n    return True\n\n\n# is stablecoin\n\n\n@external\ndef setIsStablecoin(_asset: address, _isStablecoin: bool) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.IS_STABLECOIN\n    self.pendingAddrToBool[aid] = IsAddrAllowed(addr=_asset, isAllowed=_isStablecoin)\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingIsStablecoinChange(asset=_asset, isStablecoin=_isStablecoin, confirmationBlock=confirmationBlock, actionId=aid)\n    return aid\n\n\n################\n# Agent Config #\n################\n\n\n# agent template\n\n\n@external\ndef setAgentTemplate(_agentTemplate: address) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._isValidAgentTemplate(_agentTemplate) # dev: invalid agent template\n    return self._setPendingAgentConfig(\n        ActionType.AGENT_TEMPLATE,\n        _agentTemplate\n    )\n\n\n@view\n@internal\ndef _isValidAgentTemplate(_agentTemplate: address) -> bool:\n    if _agentTemplate == empty(address):\n        return False\n    if not _agentTemplate.is_contract:\n        return False\n    return True\n\n\n# agent creation limits\n\n\n@external\ndef setAgentCreationLimits(_numAgentsAllowed: uint256, _enforceCreatorWhitelist: bool) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._isValidNumAgentsAllowed(_numAgentsAllowed) # dev: invalid num agents allowed\n    return self._setPendingAgentConfig(\n        ActionType.AGENT_CREATION_LIMITS,\n        empty(address),\n        _numAgentsAllowed,\n        _enforceCreatorWhitelist\n    )\n\n\n@view\n@internal\ndef _isValidNumAgentsAllowed(_numAgentsAllowed: uint256) -> bool:\n    if _numAgentsAllowed == 0:\n        return False\n    if _numAgentsAllowed == max_value(uint256):\n        return False\n    return True\n\n\n# starter agent params\n\n\n@external\ndef setStarterAgentParams(_startingAgent: address, _startingAgentActivationLength: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert self._areValidStarterAgentParams(_startingAgent, _startingAgentActivationLength) # dev: invalid starter agent params\n    return self._setPendingAgentConfig(\n        ActionType.STARTER_AGENT_PARAMS,\n        empty(address),\n        0,\n        False,\n        _startingAgent,\n        _startingAgentActivationLength\n    )\n\n\n@view\n@internal\ndef _areValidStarterAgentParams(_startingAgent: address, _startingAgentActivationLength: uint256) -> bool:\n\n    # If starting agent is set, activation length must be non-zero\n    if _startingAgent != empty(address) and _startingAgentActivationLength == 0:\n        return False\n\n    # If starting agent is zero address, activation length must be zero\n    if _startingAgent == empty(address) and _startingAgentActivationLength != 0:\n        return False\n\n    # Activation length cannot be max value\n    if _startingAgentActivationLength == max_value(uint256):\n        return False\n\n    return True\n\n\n##################\n# Manager Config #\n##################\n\n\n@external\ndef setManagerConfig(_managerPeriod: uint256, _managerActivationLength: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert 0 not in [_managerPeriod, _managerActivationLength] # dev: invalid manager config\n    assert max_value(uint256) not in [_managerPeriod, _managerActivationLength] # dev: invalid manager config\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.MANAGER_CONFIG\n    self.pendingManagerConfig[aid] = cs.ManagerConfig(\n        managerPeriod=_managerPeriod,\n        managerActivationLength=_managerActivationLength\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingManagerConfigChange(\n        managerPeriod=_managerPeriod,\n        managerActivationLength=_managerActivationLength,\n        confirmationBlock=confirmationBlock,\n        actionId=aid,\n    )\n    return aid\n\n\n################\n# Payee Config #\n################\n\n\n@external\ndef setPayeeConfig(_payeePeriod: uint256, _payeeActivationLength: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    assert 0 not in [_payeePeriod, _payeeActivationLength] # dev: invalid payee config\n    assert max_value(uint256) not in [_payeePeriod, _payeeActivationLength] # dev: invalid payee config\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.PAYEE_CONFIG\n    self.pendingPayeeConfig[aid] = cs.PayeeConfig(\n        payeePeriod=_payeePeriod,\n        payeeActivationLength=_payeeActivationLength\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingPayeeConfigChange(\n        payeePeriod=_payeePeriod,\n        payeeActivationLength=_payeeActivationLength,\n        confirmationBlock=confirmationBlock,\n        actionId=aid,\n    )\n    return aid\n\n\n#########\n# Other #\n#########\n\n\n# can perform security action\n\n\n@external\ndef setCanPerformSecurityAction(_signer: address, _canPerform: bool) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    # when removing, allow to do immediately\n    if not _canPerform:\n        extcall MissionControl(addys._getMissionControlAddr()).setCanPerformSecurityAction(_signer, _canPerform)\n        log CanPerformSecurityAction(signer=_signer, canPerform=_canPerform)\n        return 0\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.CAN_PERFORM_SECURITY_ACTION\n    self.pendingAddrToBool[aid] = IsAddrAllowed(addr=_signer, isAllowed=_canPerform)\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingCanPerformSecurityAction(signer=_signer, canPerform=_canPerform, confirmationBlock=confirmationBlock, actionId=aid)\n    return aid\n\n\n# set creator whitelist\n\n\n@external\ndef setCreatorWhitelist(_creator: address, _isWhitelisted: bool):\n    assert self._hasPermsToEnable(msg.sender, _isWhitelisted) # dev: no perms\n\n    assert _creator != empty(address) # dev: invalid creator\n    mc: address = addys._getMissionControlAddr()\n    extcall MissionControl(mc).setCreatorWhitelist(_creator, _isWhitelisted)\n\n    log CreatorWhitelistSet(creator=_creator, isWhitelisted=_isWhitelisted, caller=msg.sender)\n\n\n# locked signer\n\n\n@external\ndef setLockedSigner(_signer: address, _isLocked: bool):\n    assert self._hasPermsToEnable(msg.sender, _isLocked) # dev: no perms\n\n    assert _signer != empty(address) # dev: invalid creator\n    mc: address = addys._getMissionControlAddr()\n    extcall MissionControl(mc).setLockedSigner(_signer, _isLocked)\n\n    log LockedSignerSet(signer=_signer, isLocked=_isLocked, caller=msg.sender)\n\n\n# ripe rewards config\n\n\n@external\ndef setRipeRewardsConfig(_ripeStakeRatio: uint256, _ripeLockDuration: uint256):\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    ld: address = addys._getLootDistributorAddr()\n    extcall LootDistributor(ld).setRipeRewardsConfig(_ripeStakeRatio, _ripeLockDuration)\n    log RipeRewardsConfigSetFromSwitchboard(ripeStakeRatio=_ripeStakeRatio, ripeLockDuration=_ripeLockDuration)\n\n\n###############\n# Set Pending #\n###############\n\n\n@internal\ndef _setPendingUserWalletConfig(\n    _actionType: ActionType,\n    _walletTemplate: address = empty(address),\n    _configTemplate: address = empty(address),\n    _trialAsset: address = empty(address),\n    _trialAmount: uint256 = 0,\n    _numUserWalletsAllowed: uint256 = 0,\n    _enforceCreatorWhitelist: bool = False,\n    _minKeyActionTimeLock: uint256 = 0,\n    _maxKeyActionTimeLock: uint256 = 0,\n    _defaultStaleBlocks: uint256 = 0,\n    _depositRewardsAsset: address = empty(address),\n    _txFeesSwapFee: uint256 = 0,\n    _txFeesStableSwapFee: uint256 = 0,\n    _txFeesRewardsFee: uint256 = 0,\n    _ambassadorRevShareSwapRatio: uint256 = 0,\n    _ambassadorRevShareRewardsRatio: uint256 = 0,\n    _ambassadorRevShareYieldRatio: uint256 = 0,\n    _defaultYieldMaxIncrease: uint256 = 0,\n    _defaultYieldPerformanceFee: uint256 = 0,\n    _defaultYieldAmbassadorBonusRatio: uint256 = 0,\n    _defaultYieldBonusRatio: uint256 = 0,\n    _defaultYieldAltBonusAsset: address = empty(address),\n    _lootClaimCoolOffPeriod: uint256 = 0,\n) -> uint256:\n    aid: uint256 = timeLock._initiateAction()\n\n    self.actionType[aid] = _actionType\n    self.pendingUserWalletConfig[aid] = cs.UserWalletConfig(\n        walletTemplate=_walletTemplate,\n        configTemplate=_configTemplate,\n        trialAsset=_trialAsset,\n        trialAmount=_trialAmount,\n        numUserWalletsAllowed=_numUserWalletsAllowed,\n        enforceCreatorWhitelist=_enforceCreatorWhitelist,\n        minKeyActionTimeLock=_minKeyActionTimeLock,\n        maxKeyActionTimeLock=_maxKeyActionTimeLock,\n        defaultStaleBlocks=_defaultStaleBlocks,\n        depositRewardsAsset=_depositRewardsAsset,\n        txFees=cs.TxFees(\n            swapFee=_txFeesSwapFee,\n            stableSwapFee=_txFeesStableSwapFee,\n            rewardsFee=_txFeesRewardsFee,\n        ),\n        ambassadorRevShare=cs.AmbassadorRevShare(\n            swapRatio=_ambassadorRevShareSwapRatio,\n            rewardsRatio=_ambassadorRevShareRewardsRatio,\n            yieldRatio=_ambassadorRevShareYieldRatio,\n        ),\n        defaultYieldMaxIncrease=_defaultYieldMaxIncrease,\n        defaultYieldPerformanceFee=_defaultYieldPerformanceFee,\n        defaultYieldAmbassadorBonusRatio=_defaultYieldAmbassadorBonusRatio,\n        defaultYieldBonusRatio=_defaultYieldBonusRatio,\n        defaultYieldAltBonusAsset=_defaultYieldAltBonusAsset,\n        lootClaimCoolOffPeriod=_lootClaimCoolOffPeriod,\n    )\n\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    if _actionType == ActionType.USER_WALLET_TEMPLATES:\n        log PendingUserWalletTemplatesChange(\n            walletTemplate=_walletTemplate,\n            configTemplate=_configTemplate,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.TRIAL_FUNDS:\n        log PendingTrialFundsChange(\n            trialAsset=_trialAsset,\n            trialAmount=_trialAmount,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.WALLET_CREATION_LIMITS:\n        log PendingWalletCreationLimitsChange(\n            numUserWalletsAllowed=_numUserWalletsAllowed,\n            enforceCreatorWhitelist=_enforceCreatorWhitelist,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.KEY_ACTION_TIMELOCK_BOUNDS:\n        log PendingKeyActionTimelockBoundsChange(\n            minKeyActionTimeLock=_minKeyActionTimeLock,\n            maxKeyActionTimeLock=_maxKeyActionTimeLock,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.DEFAULT_STALE_BLOCKS:\n        log PendingDefaultStaleBlocksChange(\n            defaultStaleBlocks=_defaultStaleBlocks,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.TX_FEES:\n        log PendingTxFeesChange(\n            swapFee=_txFeesSwapFee,\n            stableSwapFee=_txFeesStableSwapFee,\n            rewardsFee=_txFeesRewardsFee,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.AMBASSADOR_REV_SHARE:\n        log PendingAmbassadorRevShareChange(\n            swapRatio=_ambassadorRevShareSwapRatio,\n            rewardsRatio=_ambassadorRevShareRewardsRatio,\n            yieldRatio=_ambassadorRevShareYieldRatio,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.DEFAULT_YIELD_PARAMS:\n        log PendingDefaultYieldParamsChange(\n            defaultYieldMaxIncrease=_defaultYieldMaxIncrease,\n            defaultYieldPerformanceFee=_defaultYieldPerformanceFee,\n            defaultYieldAmbassadorBonusRatio=_defaultYieldAmbassadorBonusRatio,\n            defaultYieldBonusRatio=_defaultYieldBonusRatio,\n            defaultYieldAltBonusAsset=_defaultYieldAltBonusAsset,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.LOOT_PARAMS:\n        log PendingLootParamsChange(\n            depositRewardsAsset=_depositRewardsAsset,\n            lootClaimCoolOffPeriod=_lootClaimCoolOffPeriod,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    return aid\n\n\n@internal\ndef _setPendingAgentConfig(\n    _actionType: ActionType,\n    _agentTemplate: address = empty(address),\n    _numAgentsAllowed: uint256 = 0,\n    _enforceCreatorWhitelist: bool = False,\n    _startingAgent: address = empty(address),\n    _startingAgentActivationLength: uint256 = 0,\n) -> uint256:\n    aid: uint256 = timeLock._initiateAction()\n\n    self.actionType[aid] = _actionType\n    self.pendingAgentConfig[aid] = cs.AgentConfig(\n        agentTemplate=_agentTemplate,\n        numAgentsAllowed=_numAgentsAllowed,\n        enforceCreatorWhitelist=_enforceCreatorWhitelist,\n        startingAgent=_startingAgent,\n        startingAgentActivationLength=_startingAgentActivationLength,\n    )\n\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    if _actionType == ActionType.AGENT_TEMPLATE:\n        log PendingAgentTemplateChange(\n            agentTemplate=_agentTemplate,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.AGENT_CREATION_LIMITS:\n        log PendingAgentCreationLimitsChange(\n            numAgentsAllowed=_numAgentsAllowed,\n            enforceCreatorWhitelist=_enforceCreatorWhitelist,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    elif _actionType == ActionType.STARTER_AGENT_PARAMS:\n        log PendingStarterAgentParamsChange(\n            startingAgent=_startingAgent,\n            startingAgentActivationLength=_startingAgentActivationLength,\n            confirmationBlock=confirmationBlock,\n            actionId=aid,\n        )\n    return aid\n\n\n#############\n# Execution #\n#############\n\n\n@external\ndef executePendingAction(_aid: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    # check time lock\n    if not timeLock._confirmAction(_aid):\n        if timeLock._isExpired(_aid):\n            self._cancelPendingAction(_aid)\n        return False\n\n    actionType: ActionType = self.actionType[_aid]\n    mc: address = addys._getMissionControlAddr()\n\n    if actionType == ActionType.USER_WALLET_TEMPLATES:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.walletTemplate = p.walletTemplate\n        config.configTemplate = p.configTemplate\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log UserWalletTemplatesSet(walletTemplate=p.walletTemplate, configTemplate=p.configTemplate)\n\n    elif actionType == ActionType.TRIAL_FUNDS:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.trialAsset = p.trialAsset\n        config.trialAmount = p.trialAmount\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log TrialFundsSet(trialAsset=p.trialAsset, trialAmount=p.trialAmount)\n\n    elif actionType == ActionType.WALLET_CREATION_LIMITS:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.numUserWalletsAllowed = p.numUserWalletsAllowed\n        config.enforceCreatorWhitelist = p.enforceCreatorWhitelist\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log WalletCreationLimitsSet(numUserWalletsAllowed=p.numUserWalletsAllowed, enforceCreatorWhitelist=p.enforceCreatorWhitelist)\n\n    elif actionType == ActionType.KEY_ACTION_TIMELOCK_BOUNDS:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.minKeyActionTimeLock = p.minKeyActionTimeLock\n        config.maxKeyActionTimeLock = p.maxKeyActionTimeLock\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log KeyActionTimelockBoundsSet(minKeyActionTimeLock=p.minKeyActionTimeLock, maxKeyActionTimeLock=p.maxKeyActionTimeLock)\n\n    elif actionType == ActionType.DEFAULT_STALE_BLOCKS:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.defaultStaleBlocks = p.defaultStaleBlocks\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log DefaultStaleBlocksSet(defaultStaleBlocks=p.defaultStaleBlocks)\n\n    elif actionType == ActionType.TX_FEES:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.txFees = p.txFees\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log TxFeesSet(swapFee=p.txFees.swapFee, stableSwapFee=p.txFees.stableSwapFee, rewardsFee=p.txFees.rewardsFee)\n\n    elif actionType == ActionType.AMBASSADOR_REV_SHARE:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.ambassadorRevShare = p.ambassadorRevShare\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log AmbassadorRevShareSet(swapRatio=p.ambassadorRevShare.swapRatio, rewardsRatio=p.ambassadorRevShare.rewardsRatio, yieldRatio=p.ambassadorRevShare.yieldRatio)\n\n    elif actionType == ActionType.DEFAULT_YIELD_PARAMS:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.defaultYieldMaxIncrease = p.defaultYieldMaxIncrease\n        config.defaultYieldPerformanceFee = p.defaultYieldPerformanceFee\n        config.defaultYieldAmbassadorBonusRatio = p.defaultYieldAmbassadorBonusRatio\n        config.defaultYieldBonusRatio = p.defaultYieldBonusRatio\n        config.defaultYieldAltBonusAsset = p.defaultYieldAltBonusAsset\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log DefaultYieldParamsSet(\n            defaultYieldMaxIncrease=p.defaultYieldMaxIncrease,\n            defaultYieldPerformanceFee=p.defaultYieldPerformanceFee,\n            defaultYieldAmbassadorBonusRatio=p.defaultYieldAmbassadorBonusRatio,\n            defaultYieldBonusRatio=p.defaultYieldBonusRatio,\n            defaultYieldAltBonusAsset=p.defaultYieldAltBonusAsset\n        )\n\n    elif actionType == ActionType.LOOT_PARAMS:\n        config: cs.UserWalletConfig = staticcall MissionControl(mc).userWalletConfig()\n        p: cs.UserWalletConfig = self.pendingUserWalletConfig[_aid]\n        config.depositRewardsAsset = p.depositRewardsAsset\n        config.lootClaimCoolOffPeriod = p.lootClaimCoolOffPeriod\n        extcall MissionControl(mc).setUserWalletConfig(config)\n        log LootParamsSet(depositRewardsAsset=p.depositRewardsAsset, lootClaimCoolOffPeriod=p.lootClaimCoolOffPeriod)\n\n    elif actionType == ActionType.ASSET_CONFIG:\n        p: PendingAssetConfig = self.pendingAssetConfig[_aid]\n        extcall MissionControl(mc).setAssetConfig(p.asset, p.config)\n        log AssetConfigSet(\n            asset=p.asset,\n            legoId=p.config.legoId,\n            staleBlocks=p.config.staleBlocks,\n            txFeesSwapFee=p.config.txFees.swapFee,\n            txFeesStableSwapFee=p.config.txFees.stableSwapFee,\n            txFeesRewardsFee=p.config.txFees.rewardsFee,\n            ambassadorRevShareSwapRatio=p.config.ambassadorRevShare.swapRatio,\n            ambassadorRevShareRewardsRatio=p.config.ambassadorRevShare.rewardsRatio,\n            ambassadorRevShareYieldRatio=p.config.ambassadorRevShare.yieldRatio,\n            isYieldAsset=p.config.yieldConfig.isYieldAsset,\n            isRebasing=p.config.yieldConfig.isRebasing,\n            underlyingAsset=p.config.yieldConfig.underlyingAsset,\n            maxYieldIncrease=p.config.yieldConfig.maxYieldIncrease,\n            performanceFee=p.config.yieldConfig.performanceFee,\n            ambassadorBonusRatio=p.config.yieldConfig.ambassadorBonusRatio,\n            bonusRatio=p.config.yieldConfig.bonusRatio,\n            altBonusAsset=p.config.yieldConfig.altBonusAsset,\n        )\n\n    elif actionType == ActionType.IS_STABLECOIN:\n        p: IsAddrAllowed = self.pendingAddrToBool[_aid]\n        extcall MissionControl(mc).setIsStablecoin(p.addr, p.isAllowed)\n        log IsStablecoinSet(asset=p.addr, isStablecoin=p.isAllowed)\n\n    elif actionType == ActionType.AGENT_TEMPLATE:\n        config: cs.AgentConfig = staticcall MissionControl(mc).agentConfig()\n        p: cs.AgentConfig = self.pendingAgentConfig[_aid]\n        config.agentTemplate = p.agentTemplate\n        extcall MissionControl(mc).setAgentConfig(config)\n        log AgentTemplateSet(agentTemplate=p.agentTemplate)\n\n    elif actionType == ActionType.AGENT_CREATION_LIMITS:\n        config: cs.AgentConfig = staticcall MissionControl(mc).agentConfig()\n        p: cs.AgentConfig = self.pendingAgentConfig[_aid]\n        config.numAgentsAllowed = p.numAgentsAllowed\n        config.enforceCreatorWhitelist = p.enforceCreatorWhitelist\n        extcall MissionControl(mc).setAgentConfig(config)\n        log AgentCreationLimitsSet(numAgentsAllowed=p.numAgentsAllowed, enforceCreatorWhitelist=p.enforceCreatorWhitelist)\n\n    elif actionType == ActionType.STARTER_AGENT_PARAMS:\n        config: cs.AgentConfig = staticcall MissionControl(mc).agentConfig()\n        p: cs.AgentConfig = self.pendingAgentConfig[_aid]\n        config.startingAgent = p.startingAgent\n        config.startingAgentActivationLength = p.startingAgentActivationLength\n        extcall MissionControl(mc).setAgentConfig(config)\n        log StarterAgentParamsSet(startingAgent=p.startingAgent, startingAgentActivationLength=p.startingAgentActivationLength)\n\n    elif actionType == ActionType.MANAGER_CONFIG:\n        p: cs.ManagerConfig = self.pendingManagerConfig[_aid]\n        extcall MissionControl(mc).setManagerConfig(p)\n        log ManagerConfigSet(managerPeriod=p.managerPeriod, managerActivationLength=p.managerActivationLength)\n\n    elif actionType == ActionType.PAYEE_CONFIG:\n        p: cs.PayeeConfig = self.pendingPayeeConfig[_aid]\n        extcall MissionControl(mc).setPayeeConfig(p)\n        log PayeeConfigSet(payeePeriod=p.payeePeriod, payeeActivationLength=p.payeeActivationLength)\n\n    elif actionType == ActionType.CAN_PERFORM_SECURITY_ACTION:\n        data: IsAddrAllowed = self.pendingAddrToBool[_aid]\n        extcall MissionControl(mc).setCanPerformSecurityAction(data.addr, data.isAllowed)\n        log CanPerformSecurityAction(signer=data.addr, canPerform=data.isAllowed)\n\n    self.actionType[_aid] = empty(ActionType)\n    return True\n\n\n# cancel action\n\n\n@external\ndef cancelPendingAction(_aid: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    self._cancelPendingAction(_aid)\n    return True\n\n\n@internal\ndef _cancelPendingAction(_aid: uint256):\n    assert timeLock._cancelAction(_aid) # dev: cannot cancel action\n    self.actionType[_aid] = empty(ActionType)\n",
            "sha256sum": "bd0a337959de289c026a529091fd4d641099e53a250dadeffd50b46452e4fe17"
          }
        },
        "settings": {
          "outputSelection": {
            "contracts/config/SwitchboardAlpha.vy": ["*"]
          },
          "search_paths": ["."]
        },
        "compiler_version": "v0.4.3+commit.bff19ea2",
        "integrity": "9f022544d1aa11d9b1e27d034cfe36c27a6aaed3eec00d0cb2092de26c475d32"
      },
      "args": "00000000000000000000000044cf3c4f000dfd76a35d03298049d37be688d6f900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e10000000000000000000000000000000000000000000000000000000000013c680",
      "file": "contracts/config/SwitchboardAlpha.vy"
    },
    "SwitchboardCharlie": {
      "address": "0xAb0e52dDBcF376f6716Dd6187861FC3551518987",
      "abi": [
        {
          "name": "PendingRedemptionBufferChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "buffer",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "RedemptionBufferSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "buffer",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingMinYieldWithdrawAmountChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "amount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "MinYieldWithdrawAmountSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "amount",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingSnapShotPriceConfigChange",
          "inputs": [
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": true
            },
            {
              "name": "minSnapshotDelay",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "maxNumSnapshots",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "maxUpsideDeviation",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "staleTime",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "SnapShotPriceConfigSet",
          "inputs": [
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": true
            },
            {
              "name": "legoAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "minSnapshotDelay",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "maxNumSnapshots",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "maxUpsideDeviation",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "staleTime",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingApprovedVaultTokenChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "vaultToken",
              "type": "address",
              "indexed": true
            },
            {
              "name": "isApproved",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ApprovedVaultTokenSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "vaultToken",
              "type": "address",
              "indexed": true
            },
            {
              "name": "isApproved",
              "type": "bool",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingPerformanceFeeChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "performanceFee",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PerformanceFeeSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "performanceFee",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingDefaultTargetVaultTokenChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "targetVaultToken",
              "type": "address",
              "indexed": true
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "DefaultTargetVaultTokenSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "targetVaultToken",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingMaxDepositAmountChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "maxDepositAmount",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "MaxDepositAmountSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "maxDepositAmount",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "CanDepositSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "canDeposit",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "caller",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "CanWithdrawSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "canWithdraw",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "caller",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "VaultOpsFrozenSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "isFrozen",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "caller",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ShouldAutoDepositSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "shouldAutoDeposit",
              "type": "bool",
              "indexed": false
            },
            {
              "name": "caller",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingCollateralVaultChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "vaultToken",
              "type": "address",
              "indexed": true
            },
            {
              "name": "ripeVaultId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "CollateralVaultSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "vaultToken",
              "type": "address",
              "indexed": true
            },
            {
              "name": "ripeVaultId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingLeverageVaultChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "vaultToken",
              "type": "address",
              "indexed": true
            },
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ripeVaultId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "LeverageVaultSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "vaultToken",
              "type": "address",
              "indexed": true
            },
            {
              "name": "legoId",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "ripeVaultId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingUsdcSlippageChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "slippage",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "UsdcSlippageSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "slippage",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingGreenSlippageChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "slippage",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GreenSlippageSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "slippage",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingLevgVaultHelperChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "levgVaultHelper",
              "type": "address",
              "indexed": true
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "LevgVaultHelperSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "levgVaultHelper",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingMaxDebtRatioChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "ratio",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "MaxDebtRatioSet",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "ratio",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingAddManagerChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "manager",
              "type": "address",
              "indexed": true
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ManagerAdded",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "manager",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "PendingRemoveManagerChange",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "manager",
              "type": "address",
              "indexed": true
            },
            {
              "name": "confirmationBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "actionId",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ManagerRemoved",
          "inputs": [
            {
              "name": "vaultAddr",
              "type": "address",
              "indexed": true
            },
            {
              "name": "manager",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeTimeLockModified",
          "inputs": [
            {
              "name": "prevTimeLock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "newTimeLock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ExpirationSet",
          "inputs": [
            {
              "name": "expiration",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "ActionTimeLockSet",
          "inputs": [
            {
              "name": "newTimeLock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "prevTimeLock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeStarted",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "newGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "confirmBlock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeConfirmed",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "newGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "initiatedBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmBlock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovChangeCancelled",
          "inputs": [
            {
              "name": "cancelledGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "initiatedBlock",
              "type": "uint256",
              "indexed": false
            },
            {
              "name": "confirmBlock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "GovRelinquished",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "name": "UndyHqSetupFinished",
          "inputs": [
            {
              "name": "prevGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "newGov",
              "type": "address",
              "indexed": true
            },
            {
              "name": "timeLock",
              "type": "uint256",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event"
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getAddys",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "hq",
                  "type": "address"
                },
                {
                  "name": "undyToken",
                  "type": "address"
                },
                {
                  "name": "ledger",
                  "type": "address"
                },
                {
                  "name": "missionControl",
                  "type": "address"
                },
                {
                  "name": "legoBook",
                  "type": "address"
                },
                {
                  "name": "switchboard",
                  "type": "address"
                },
                {
                  "name": "hatchery",
                  "type": "address"
                },
                {
                  "name": "lootDistributor",
                  "type": "address"
                },
                {
                  "name": "appraiser",
                  "type": "address"
                },
                {
                  "name": "walletBackpack",
                  "type": "address"
                },
                {
                  "name": "billing",
                  "type": "address"
                },
                {
                  "name": "vaultRegistry",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getUndyHq",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getUndyHqFromGov",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "canGovern",
          "inputs": [
            {
              "name": "_addr",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getGovernors",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address[]"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "hasPendingGovChange",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "startGovernanceChange",
          "inputs": [
            {
              "name": "_newGov",
              "type": "address"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "confirmGovernanceChange",
          "inputs": [],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "cancelGovernanceChange",
          "inputs": [],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "relinquishGov",
          "inputs": [],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setGovTimeLock",
          "inputs": [
            {
              "name": "_numBlocks",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isValidGovTimeLock",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "minGovChangeTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "maxGovChangeTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "finishUndyHqSetup",
          "inputs": [
            {
              "name": "_newGov",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "finishUndyHqSetup",
          "inputs": [
            {
              "name": "_newGov",
              "type": "address"
            },
            {
              "name": "_timeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "governance",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "address"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingGov",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "newGov",
                  "type": "address"
                },
                {
                  "name": "initiatedBlock",
                  "type": "uint256"
                },
                {
                  "name": "confirmBlock",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "numGovChanges",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "govChangeTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "canConfirmAction",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isExpired",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "hasPendingAction",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "getActionConfirmationBlock",
          "inputs": [
            {
              "name": "_actionId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setActionTimeLock",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "isValidActionTimeLock",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "minActionTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "maxActionTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setExpiration",
          "inputs": [
            {
              "name": "_expiration",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setActionTimeLockAfterSetup",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setActionTimeLockAfterSetup",
          "inputs": [
            {
              "name": "_newTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingActions",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "initiatedBlock",
                  "type": "uint256"
                },
                {
                  "name": "confirmBlock",
                  "type": "uint256"
                },
                {
                  "name": "expiration",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "actionId",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "actionTimeLock",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "expiration",
          "inputs": [],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setCanDeposit",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_canDeposit",
              "type": "bool"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setCanWithdraw",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_canWithdraw",
              "type": "bool"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setVaultOpsFrozen",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_isFrozen",
              "type": "bool"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setShouldAutoDeposit",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_shouldAutoDeposit",
              "type": "bool"
            }
          ],
          "outputs": []
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setRedemptionBuffer",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_buffer",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setMinYieldWithdrawAmount",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_amount",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setSnapShotPriceConfig",
          "inputs": [
            {
              "name": "_legoId",
              "type": "uint256"
            },
            {
              "name": "_minSnapshotDelay",
              "type": "uint256"
            },
            {
              "name": "_maxNumSnapshots",
              "type": "uint256"
            },
            {
              "name": "_maxUpsideDeviation",
              "type": "uint256"
            },
            {
              "name": "_staleTime",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setApprovedVaultToken",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_vaultToken",
              "type": "address"
            },
            {
              "name": "_isApproved",
              "type": "bool"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setPerformanceFee",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_performanceFee",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setDefaultTargetVaultToken",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_targetVaultToken",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setMaxDepositAmount",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_maxDepositAmount",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setCollateralVault",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_vaultToken",
              "type": "address"
            },
            {
              "name": "_ripeVaultId",
              "type": "uint256"
            },
            {
              "name": "_legoId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setLeverageVault",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_vaultToken",
              "type": "address"
            },
            {
              "name": "_legoId",
              "type": "uint256"
            },
            {
              "name": "_ripeVaultId",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setUsdcSlippageAllowed",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_slippage",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setGreenSlippageAllowed",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_slippage",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setLevgVaultHelper",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_levgVaultHelper",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "setMaxDebtRatio",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_ratio",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "addVaultManager",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_manager",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "removeVaultManager",
          "inputs": [
            {
              "name": "_vaultAddr",
              "type": "address"
            },
            {
              "name": "_manager",
              "type": "address"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "executePendingAction",
          "inputs": [
            {
              "name": "_aid",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "cancelPendingAction",
          "inputs": [
            {
              "name": "_aid",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "bool"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "actionType",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingRedemptionBuffer",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "buffer",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingMinYieldWithdrawAmount",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "amount",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingSnapShotPriceConfig",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "legoId",
                  "type": "uint256"
                },
                {
                  "name": "config",
                  "type": "tuple",
                  "components": [
                    {
                      "name": "minSnapshotDelay",
                      "type": "uint256"
                    },
                    {
                      "name": "maxNumSnapshots",
                      "type": "uint256"
                    },
                    {
                      "name": "maxUpsideDeviation",
                      "type": "uint256"
                    },
                    {
                      "name": "staleTime",
                      "type": "uint256"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingApprovedVaultToken",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "vaultToken",
                  "type": "address"
                },
                {
                  "name": "isApproved",
                  "type": "bool"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingPerformanceFee",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "performanceFee",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingDefaultTargetVaultToken",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "targetVaultToken",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingMaxDepositAmount",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "maxDepositAmount",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingCollateralVault",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "vaultToken",
                  "type": "address"
                },
                {
                  "name": "ripeVaultId",
                  "type": "uint256"
                },
                {
                  "name": "legoId",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingLeverageVault",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "vaultToken",
                  "type": "address"
                },
                {
                  "name": "legoId",
                  "type": "uint256"
                },
                {
                  "name": "ripeVaultId",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingUsdcSlippage",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "slippage",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingGreenSlippage",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "slippage",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingLevgVaultHelper",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "levgVaultHelper",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingMaxDebtRatio",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "ratio",
                  "type": "uint256"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingAddManager",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "manager",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "view",
          "type": "function",
          "name": "pendingRemoveManager",
          "inputs": [
            {
              "name": "arg0",
              "type": "uint256"
            }
          ],
          "outputs": [
            {
              "name": "",
              "type": "tuple",
              "components": [
                {
                  "name": "vaultAddr",
                  "type": "address"
                },
                {
                  "name": "manager",
                  "type": "address"
                }
              ]
            }
          ]
        },
        {
          "stateMutability": "nonpayable",
          "type": "constructor",
          "inputs": [
            {
              "name": "_undyHq",
              "type": "address"
            },
            {
              "name": "_tempGov",
              "type": "address"
            },
            {
              "name": "_minConfigTimeLock",
              "type": "uint256"
            },
            {
              "name": "_maxConfigTimeLock",
              "type": "uint256"
            }
          ],
          "outputs": []
        }
      ],
      "solc_json": {
        "language": "Vyper",
        "sources": {
          "contracts/modules/Addys.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\ninterface UndyHq:\n    def isValidAddr(_addr: address) -> bool: view\n    def getAddr(_regId: uint256) -> address: view\n    def undyToken() -> address: view\n\ninterface Switchboard:\n    def isSwitchboardAddr(_addr: address) -> bool: view\n\ninterface LegoBook:\n    def isLegoAddr(_addr: address) -> bool: view\n\nstruct Addys:\n    hq: address\n    undyToken: address\n    ledger: address\n    missionControl: address\n    legoBook: address\n    switchboard: address\n    hatchery: address\n    lootDistributor: address\n    appraiser: address\n    walletBackpack: address\n    billing: address\n    vaultRegistry: address\n\n# hq\nUNDY_HQ_FOR_ADDYS: immutable(address)\n\n# core addys\nLEDGER_ID: constant(uint256) = 1\nMISSION_CONTROL_ID: constant(uint256) = 2\nLEGO_BOOK_ID: constant(uint256) = 3\nSWITCHBOARD_ID: constant(uint256) = 4\nHATCHERY_ID: constant(uint256) = 5\nLOOT_DISTRIBUTOR_ID: constant(uint256) = 6\nAPPRAISER_ID: constant(uint256) = 7\nWALLET_BACKPACK_ID: constant(uint256) = 8\nBILLING_ID: constant(uint256) = 9\nVAULT_REGISTRY_ID: constant(uint256) = 10\n\n\n@deploy\ndef __init__(_undyHq: address):\n    assert _undyHq != empty(address) # dev: invalid undy hq\n    UNDY_HQ_FOR_ADDYS = _undyHq\n\n\n########\n# Core #\n########\n\n\n@view\n@external\ndef getAddys() -> Addys:\n    return self._generateAddys()\n\n\n@view\n@internal\ndef _getAddys(_addys: Addys = empty(Addys)) -> Addys:\n    if _addys.hq != empty(address):\n        return _addys\n    return self._generateAddys()\n\n\n@view\n@internal\ndef _generateAddys() -> Addys:\n    hq: address = UNDY_HQ_FOR_ADDYS\n    return Addys(\n        hq = hq,\n        undyToken = staticcall UndyHq(hq).undyToken(),\n        ledger = staticcall UndyHq(hq).getAddr(LEDGER_ID),\n        missionControl = staticcall UndyHq(hq).getAddr(MISSION_CONTROL_ID),\n        legoBook = staticcall UndyHq(hq).getAddr(LEGO_BOOK_ID),\n        switchboard = staticcall UndyHq(hq).getAddr(SWITCHBOARD_ID),\n        hatchery = staticcall UndyHq(hq).getAddr(HATCHERY_ID),\n        lootDistributor = staticcall UndyHq(hq).getAddr(LOOT_DISTRIBUTOR_ID),\n        appraiser = staticcall UndyHq(hq).getAddr(APPRAISER_ID),\n        walletBackpack = staticcall UndyHq(hq).getAddr(WALLET_BACKPACK_ID),\n        billing = staticcall UndyHq(hq).getAddr(BILLING_ID),\n        vaultRegistry = staticcall UndyHq(hq).getAddr(VAULT_REGISTRY_ID),\n    )\n\n\n##########\n# Tokens #\n##########\n\n\n@view\n@internal\ndef _getUndyToken() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).undyToken()\n\n\n###########\n# Helpers #\n###########\n\n\n# undy hq\n\n\n@view\n@external\ndef getUndyHq() -> address:\n    return self._getUndyHq()\n\n\n@view\n@internal\ndef _getUndyHq() -> address:\n    return UNDY_HQ_FOR_ADDYS\n\n\n# utils\n\n\n@view\n@internal\ndef _isValidUndyAddr(_addr: address, _hq: address = empty(address)) -> bool:\n    hq: address = _hq\n    if _hq == empty(address):\n        hq = UNDY_HQ_FOR_ADDYS\n    \n    # core departments\n    if staticcall UndyHq(hq).isValidAddr(_addr):\n        return True\n\n    # lego book\n    legoBook: address = staticcall UndyHq(hq).getAddr(LEGO_BOOK_ID)\n    if legoBook != empty(address) and staticcall LegoBook(legoBook).isLegoAddr(_addr):\n        return True\n\n    # switchboard config\n    switchboard: address = staticcall UndyHq(hq).getAddr(SWITCHBOARD_ID)\n    if switchboard != empty(address) and staticcall Switchboard(switchboard).isSwitchboardAddr(_addr):\n        return True\n\n    return False\n\n\n@view\n@internal\ndef _isSwitchboardAddr(_addr: address) -> bool:\n    switchboard: address = staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(SWITCHBOARD_ID)\n    if switchboard == empty(address):\n        return False\n    return staticcall Switchboard(switchboard).isSwitchboardAddr(_addr)\n\n\n@view\n@internal\ndef _isLegoBookAddr(_addr: address) -> bool:\n    legoBook: address = staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEGO_BOOK_ID)\n    if legoBook == empty(address):\n        return False\n    return staticcall LegoBook(legoBook).isLegoAddr(_addr)\n\n\n###############\n# Departments #\n###############\n\n\n# ledger\n\n\n@view\n@internal\ndef _getLedgerId() -> uint256:\n    return LEDGER_ID\n\n\n@view\n@internal\ndef _getLedgerAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEDGER_ID)\n\n\n# mission control\n\n\n@view\n@internal\ndef _getMissionControlId() -> uint256:\n    return MISSION_CONTROL_ID\n\n\n@view\n@internal\ndef _getMissionControlAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(MISSION_CONTROL_ID)\n\n\n# lego book\n\n\n@view\n@internal\ndef _getLegoBookId() -> uint256:\n    return LEGO_BOOK_ID\n\n\n@view\n@internal\ndef _getLegoBookAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LEGO_BOOK_ID)\n\n\n# switchboard\n\n\n@view\n@internal\ndef _getSwitchboardId() -> uint256:\n    return SWITCHBOARD_ID\n\n\n@view\n@internal\ndef _getSwitchboardAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(SWITCHBOARD_ID)\n\n\n# hatchery\n\n\n@view\n@internal\ndef _getHatcheryId() -> uint256:\n    return HATCHERY_ID\n\n\n@view\n@internal\ndef _getHatcheryAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(HATCHERY_ID)\n\n\n# loot distributor\n\n\n@view\n@internal\ndef _getLootDistributorId() -> uint256:\n    return LOOT_DISTRIBUTOR_ID\n\n\n@view\n@internal\ndef _getLootDistributorAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(LOOT_DISTRIBUTOR_ID)\n\n\n# appraiser\n\n\n@view\n@internal\ndef _getAppraiserId() -> uint256:\n    return APPRAISER_ID\n\n\n@view\n@internal\ndef _getAppraiserAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(APPRAISER_ID)\n\n\n# wallet backpack\n\n\n@view\n@internal\ndef _getWalletBackpackId() -> uint256:\n    return WALLET_BACKPACK_ID\n\n\n@view\n@internal\ndef _getWalletBackpackAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(WALLET_BACKPACK_ID)\n\n\n# billing\n\n\n@view\n@internal\ndef _getBillingId() -> uint256:\n    return BILLING_ID\n\n\n@view\n@internal\ndef _getBillingAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(BILLING_ID)\n\n\n# vault registry\n\n\n@view\n@internal\ndef _getVaultRegistryId() -> uint256:\n    return VAULT_REGISTRY_ID\n\n\n@view\n@internal\ndef _getVaultRegistryAddr() -> address:\n    return staticcall UndyHq(UNDY_HQ_FOR_ADDYS).getAddr(VAULT_REGISTRY_ID)",
            "sha256sum": "4df6b72db9bb417d1af81660175be1450cfb7b3575f3d17a5b8a130bff87b781"
          },
          "contracts/modules/LocalGov.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\ninterface UndyHq:\n    def minGovChangeTimeLock() -> uint256: view\n    def maxGovChangeTimeLock() -> uint256: view\n    def governance() -> address: view\n\nstruct PendingGovernance:\n    newGov: address\n    initiatedBlock: uint256\n    confirmBlock: uint256\n\nevent GovChangeStarted:\n    prevGov: indexed(address)\n    newGov: indexed(address)\n    confirmBlock: uint256\n\nevent GovChangeConfirmed:\n    prevGov: indexed(address)\n    newGov: indexed(address)\n    initiatedBlock: uint256\n    confirmBlock: uint256\n\nevent GovChangeCancelled:\n    cancelledGov: indexed(address)\n    initiatedBlock: uint256\n    confirmBlock: uint256\n\nevent GovRelinquished:\n    prevGov: indexed(address)\n\nevent GovChangeTimeLockModified:\n    prevTimeLock: uint256\n    newTimeLock: uint256\n\nevent UndyHqSetupFinished:\n    prevGov: indexed(address)\n    newGov: indexed(address)\n    timeLock: uint256\n\n# governance\ngovernance: public(address)\npendingGov: public(PendingGovernance)\nnumGovChanges: public(uint256)\n\n# time lock\ngovChangeTimeLock: public(uint256)\n\n# config\nUNDY_HQ_FOR_GOV: immutable(address)\nMIN_GOV_TIME_LOCK: immutable(uint256)\nMAX_GOV_TIME_LOCK: immutable(uint256)\n\n\n@deploy\ndef __init__(\n    _undyHq: address,\n    _initialGov: address,\n    _minTimeLock: uint256,\n    _maxTimeLock: uint256,\n    _initialTimeLock: uint256,\n):\n    UNDY_HQ_FOR_GOV = _undyHq\n    self.governance = _initialGov\n\n    # undy hq\n    if _undyHq == empty(address):\n        assert _initialGov != empty(address) # dev: undy hq must have gov\n\n    # local gov (department, other smart contracts)\n    else:\n        hqGov: address = staticcall UndyHq(_undyHq).governance()\n        assert hqGov != empty(address) # dev: undy hq must have gov\n        assert _initialGov != hqGov # dev: undy hq cannot set same gov\n\n    # time locks\n    minTimeLock: uint256 = _minTimeLock\n    maxTimeLock: uint256 = _maxTimeLock\n    if minTimeLock == 0 or maxTimeLock == 0:\n        assert _undyHq != empty(address) # dev: need undy hq if no time locks\n        minTimeLock = staticcall UndyHq(_undyHq).minGovChangeTimeLock()\n        maxTimeLock = staticcall UndyHq(_undyHq).maxGovChangeTimeLock()\n\n    # set min and max time locks\n    assert minTimeLock < maxTimeLock # dev: invalid time lock\n    assert minTimeLock != 0 and maxTimeLock != max_value(uint256) # dev: invalid time lock\n    MIN_GOV_TIME_LOCK = minTimeLock\n    MAX_GOV_TIME_LOCK = maxTimeLock\n\n    # this contract is top level governance from Undy HQ -- not setting initial time lock during setup\n    if _undyHq == empty(address):\n        return\n\n    # set initial time lock (for local gov)\n    initialTimeLock: uint256 = max(minTimeLock, _initialTimeLock)\n    assert self._setGovTimeLock(initialTimeLock) # dev: invalid time lock\n\n\n@view\n@external\ndef getUndyHqFromGov() -> address:\n    return self._getUndyHqFromGov()\n\n\n@view\n@internal\ndef _getUndyHqFromGov() -> address:\n    return UNDY_HQ_FOR_GOV\n\n\n##############\n# Gov Access #\n##############\n\n\n@view\n@external\ndef canGovern(_addr: address) -> bool:\n    return self._canGovern(_addr)\n\n\n@view\n@internal\ndef _canGovern(_addr: address) -> bool:\n    if _addr == empty(address):\n        return False\n    return _addr in self._getGovernors()\n\n\n@view\n@external\ndef getGovernors() -> DynArray[address, 2]:\n    return self._getGovernors()\n\n\n@view\n@internal\ndef _getGovernors() -> DynArray[address, 2]:\n    governors: DynArray[address, 2] = []\n\n    # local governance\n    localGov: address = self.governance\n    if localGov != empty(address):\n        governors.append(localGov)\n\n    # undy hq governance\n    undyHq: address = UNDY_HQ_FOR_GOV\n    if undyHq == empty(address):\n        return governors\n\n    hqGov: address = staticcall UndyHq(undyHq).governance()\n    if hqGov != empty(address):\n        governors.append(hqGov)\n\n    return governors\n\n\n######################\n# Governance Changes #\n######################\n\n\n@view\n@external\ndef hasPendingGovChange() -> bool:\n    return self.pendingGov.confirmBlock != 0\n\n\n@view\n@internal\ndef _isUndyHq() -> bool:\n    return UNDY_HQ_FOR_GOV == empty(address)\n\n\n# start gov change\n\n\n@external\ndef startGovernanceChange(_newGov: address):\n    governors: DynArray[address, 2] = self._getGovernors()\n    assert msg.sender in governors # dev: no perms\n\n    # validation\n    if _newGov != empty(address):\n        assert _newGov not in governors # dev: invalid _newGov\n        assert _newGov.is_contract # dev: _newGov must be a contract\n    else:\n        assert not self._isUndyHq() # dev: undy hq cannot set 0x0\n\n    confirmBlock: uint256 = block.number + self.govChangeTimeLock\n    self.pendingGov = PendingGovernance(\n        newGov= _newGov,\n        initiatedBlock= block.number,\n        confirmBlock= confirmBlock,\n    )\n    log GovChangeStarted(prevGov=self.governance, newGov=_newGov, confirmBlock=confirmBlock)\n\n\n# confirm gov change\n\n\n@external\ndef confirmGovernanceChange():\n    data: PendingGovernance = self.pendingGov\n    assert data.confirmBlock != 0 and block.number >= data.confirmBlock # dev: time lock not reached\n\n    # check permissions\n    if data.newGov != empty(address):\n        assert msg.sender == data.newGov # dev: only new gov can confirm\n    else:\n        assert self._canGovern(msg.sender) # dev: no perms\n        assert not self._isUndyHq() # dev: undy hq cannot set 0x0\n\n    # set new governance\n    prevGov: address = self.governance\n    self.governance = data.newGov\n    self.numGovChanges += 1\n    self.pendingGov = empty(PendingGovernance)\n    log GovChangeConfirmed(prevGov=prevGov, newGov=data.newGov, initiatedBlock=data.initiatedBlock, confirmBlock=data.confirmBlock)\n\n\n# cancel gov change\n\n\n@external\ndef cancelGovernanceChange():\n    assert self._canGovern(msg.sender) # dev: no perms\n    data: PendingGovernance = self.pendingGov\n    assert data.confirmBlock != 0 # dev: no pending change\n    self.pendingGov = empty(PendingGovernance)\n    log GovChangeCancelled(cancelledGov=data.newGov, initiatedBlock=data.initiatedBlock, confirmBlock=data.confirmBlock)\n\n\n# relinquish gov (only for local gov)\n\n\n@external\ndef relinquishGov():\n    assert msg.sender == self.governance # dev: no perms\n    assert not self._isUndyHq() # dev: undy hq cannot relinquish gov\n\n    self.governance = empty(address)\n    self.numGovChanges += 1\n    log GovRelinquished(prevGov=msg.sender)\n\n\n####################\n# Time Lock Config #\n####################\n\n\n# set time lock\n\n\n@external\ndef setGovTimeLock(_numBlocks: uint256) -> bool:\n    assert self._canGovern(msg.sender) # dev: no perms\n    return self._setGovTimeLock(_numBlocks)\n\n\n@internal\ndef _setGovTimeLock(_numBlocks: uint256) -> bool:\n    prevTimeLock: uint256 = self.govChangeTimeLock\n    assert self._isValidGovTimeLock(_numBlocks, prevTimeLock) # dev: invalid time lock\n    self.govChangeTimeLock = _numBlocks\n    log GovChangeTimeLockModified(prevTimeLock=prevTimeLock, newTimeLock=_numBlocks)\n    return True\n\n\n# validation\n\n\n@view\n@external\ndef isValidGovTimeLock(_newTimeLock: uint256) -> bool:\n    return self._isValidGovTimeLock(_newTimeLock, self.govChangeTimeLock)\n\n\n@view\n@internal\ndef _isValidGovTimeLock(_newTimeLock: uint256, _prevTimeLock: uint256) -> bool:\n    if _newTimeLock == _prevTimeLock:\n        return False # no change\n    if self.pendingGov.confirmBlock != 0:\n        return False # cannot change while pending gov change\n    return _newTimeLock >= MIN_GOV_TIME_LOCK and _newTimeLock <= MAX_GOV_TIME_LOCK\n\n\n# utils\n\n\n@view\n@external\ndef minGovChangeTimeLock() -> uint256:\n    return MIN_GOV_TIME_LOCK\n\n\n@view\n@external\ndef maxGovChangeTimeLock() -> uint256:\n    return MAX_GOV_TIME_LOCK\n\n\n#################\n# Undy Hq Setup #\n#################\n\n\n@external\ndef finishUndyHqSetup(_newGov: address, _timeLock: uint256 = 0) -> bool:\n    assert self._isUndyHq() # dev: only undy hq\n    assert msg.sender == self.governance # dev: no perms\n    assert self.numGovChanges == 0 # dev: already changed gov\n\n    # validation\n    assert _newGov != empty(address) and _newGov.is_contract # dev: invalid _newGov\n    prevGov: address = self.governance\n\n    # set new gov\n    self.governance = _newGov\n    self.numGovChanges += 1\n\n    # set time lock\n    timeLock: uint256 = _timeLock\n    if timeLock == 0:\n        timeLock = MIN_GOV_TIME_LOCK\n    assert self._setGovTimeLock(timeLock) # dev: invalid time lock\n\n    log UndyHqSetupFinished(prevGov=prevGov, newGov=_newGov, timeLock=timeLock)\n    return True",
            "sha256sum": "c41aa3e0d0d96b512171813377ea277e2c7da690c3cd9b4662733b3f11f705b0"
          },
          "contracts/modules/TimeLock.vy": {
            "content": "#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\nuses: gov\nimport contracts.modules.LocalGov as gov\n\nstruct PendingAction:\n    initiatedBlock: uint256\n    confirmBlock: uint256\n    expiration: uint256\n\nevent ActionTimeLockSet:\n    newTimeLock: uint256\n    prevTimeLock: uint256\n\nevent ExpirationSet:\n    expiration: uint256\n\n# core data\npendingActions: public(HashMap[uint256, PendingAction])\nactionId: public(uint256)\n\n# config\nactionTimeLock: public(uint256)\nexpiration: public(uint256)\n\nMIN_ACTION_TIMELOCK: immutable(uint256)\nMAX_ACTION_TIMELOCK: immutable(uint256)\n\n\n@deploy\ndef __init__(\n    _minActionTimeLock: uint256,\n    _maxActionTimeLock: uint256,\n    _initialTimeLock: uint256,\n    _expiration: uint256,\n):\n    # start at 1 index\n    self.actionId = 1\n\n    # set time lock boundaries\n    assert _minActionTimeLock < _maxActionTimeLock # dev: invalid time lock boundaries\n    assert _minActionTimeLock != 0 and _maxActionTimeLock != max_value(uint256) # dev: invalid time lock boundaries\n    MIN_ACTION_TIMELOCK = _minActionTimeLock\n    MAX_ACTION_TIMELOCK = _maxActionTimeLock\n\n    # set expiration time\n    self._setExpiration(_expiration, _initialTimeLock)\n\n    # set initial time lock\n    if _initialTimeLock != 0:\n        assert self._setActionTimeLock(_initialTimeLock, 0) # dev: failed to set initial time lock\n\n\n########\n# Core #\n########\n\n\n# initiate\n\n\n@internal\ndef _initiateAction() -> uint256:\n    actionId: uint256 = self.actionId\n    confirmBlock: uint256 = block.number + self.actionTimeLock\n    self.pendingActions[actionId] = PendingAction(\n        initiatedBlock= block.number,\n        confirmBlock= confirmBlock,\n        expiration= confirmBlock + self.expiration,\n    )\n    self.actionId += 1\n    return actionId\n\n\n# confirm\n\n\n@internal\ndef _confirmAction(_actionId: uint256) -> bool:\n    if not self._canConfirmAction(_actionId):\n        return False\n    self.pendingActions[_actionId] = empty(PendingAction)\n    return True\n\n\n# cancel\n\n\n@internal\ndef _cancelAction(_actionId: uint256) -> bool:\n    data: PendingAction = self.pendingActions[_actionId]\n    if data.confirmBlock == 0:\n        return False\n    self.pendingActions[_actionId] = empty(PendingAction)\n    return True\n\n\n#########\n# Utils #\n#########\n\n\n# can confirm\n\n\n@view\n@external\ndef canConfirmAction(_actionId: uint256) -> bool:\n    return self._canConfirmAction(_actionId)\n\n\n@view\n@internal\ndef _canConfirmAction(_actionId: uint256) -> bool:\n    data: PendingAction = self.pendingActions[_actionId]\n    if data.confirmBlock == 0 or block.number < data.confirmBlock:\n        return False\n    if block.number >= data.expiration:\n        return False\n    return True\n\n\n# is expired\n\n\n@view\n@external\ndef isExpired(_actionId: uint256) -> bool:\n    return self._isExpired(_actionId)\n\n\n@view\n@internal\ndef _isExpired(_actionId: uint256) -> bool:\n    data: PendingAction = self.pendingActions[_actionId]\n    if data.confirmBlock == 0:\n        return False\n    return block.number >= data.expiration\n\n\n# pending action\n\n\n@view\n@external\ndef hasPendingAction(_actionId: uint256) -> bool:\n    return self._hasPendingAction(_actionId)\n\n\n@view\n@internal\ndef _hasPendingAction(_actionId: uint256) -> bool:\n    return self.pendingActions[_actionId].confirmBlock != 0\n\n\n# confirmation block\n\n\n@view\n@external\ndef getActionConfirmationBlock(_actionId: uint256) -> uint256:\n    return self._getActionConfirmationBlock(_actionId)\n\n\n@view\n@internal\ndef _getActionConfirmationBlock(_actionId: uint256) -> uint256:\n    return self.pendingActions[_actionId].confirmBlock\n\n\n######################\n# Config - Time Lock #\n######################\n\n\n@external\ndef setActionTimeLock(_newTimeLock: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    return self._setActionTimeLock(_newTimeLock, self.actionTimeLock)\n\n\n@internal\ndef _setActionTimeLock(_newTimeLock: uint256, _prevTimeLock: uint256) -> bool:\n    assert self._isValidActionTimeLock(_newTimeLock, _prevTimeLock) # dev: invalid time lock\n    self.actionTimeLock = _newTimeLock\n    log ActionTimeLockSet(newTimeLock=_newTimeLock, prevTimeLock=_prevTimeLock)\n    return True\n\n\n# validation\n\n\n@view\n@external\ndef isValidActionTimeLock(_newTimeLock: uint256) -> bool:\n    return self._isValidActionTimeLock(_newTimeLock, self.actionTimeLock)\n\n\n@view\n@internal\ndef _isValidActionTimeLock(_newTimeLock: uint256, _prevTimeLock: uint256) -> bool:\n    if _newTimeLock == _prevTimeLock:\n        return False # no change\n    return _newTimeLock >= MIN_ACTION_TIMELOCK and _newTimeLock <= MAX_ACTION_TIMELOCK\n\n\n# utils\n\n\n@view\n@external\ndef minActionTimeLock() -> uint256:\n    return MIN_ACTION_TIMELOCK\n\n\n@view\n@external\ndef maxActionTimeLock() -> uint256:\n    return MAX_ACTION_TIMELOCK\n\n\n#######################\n# Config - Expiration #\n#######################\n\n\n@external\ndef setExpiration(_expiration: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    return self._setExpiration(_expiration, self.actionTimeLock)\n\n\n@internal\ndef _setExpiration(_expiration: uint256, _timeLock: uint256) -> bool:\n    assert self._isValidExpiration(_expiration, _timeLock) # dev: invalid expiration\n    self.expiration = _expiration\n    log ExpirationSet(expiration=_expiration)\n    return True\n\n\n# validation\n\n\n@view\n@internal\ndef _isValidExpiration(_expiration: uint256, _timeLock: uint256) -> bool:\n    if _expiration == 0 or _expiration == max_value(uint256):\n        return False\n    if _expiration < _timeLock:\n        return False\n    return True\n\n\n################\n# Finish Setup #\n################\n\n\n@external\ndef setActionTimeLockAfterSetup(_newTimeLock: uint256 = 0) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    prevTimeLock: uint256 = self.actionTimeLock\n    assert prevTimeLock == 0 # dev: already set\n\n    timeLock: uint256 = _newTimeLock\n    if timeLock == 0:\n        timeLock = MIN_ACTION_TIMELOCK\n    return self._setActionTimeLock(timeLock, prevTimeLock)",
            "sha256sum": "80ec25619b21a5ac9791a94ca96d5ee38a887cb59d0e9368e23ea4a2de75da8e"
          },
          "interfaces/LegoStructs.vyi": {
            "content": "# @version 0.4.3\n\nstruct VaultTokenInfo:\n    underlyingAsset: address\n    decimals: uint256\n    lastAveragePricePerShare: uint256\n\nstruct SnapShotPriceConfig:\n    minSnapshotDelay: uint256\n    maxNumSnapshots: uint256\n    maxUpsideDeviation: uint256\n    staleTime: uint256\n\nstruct SingleSnapShot:\n    totalSupply: uint256\n    pricePerShare: uint256\n    lastUpdate: uint256\n\nstruct SnapShotData:\n    lastSnapShot: SingleSnapShot\n    nextIndex: uint256\n",
            "sha256sum": "8ae48be17d812d57fbd671bbf0593e8abf175ad0924e47c5997823cac19ec806"
          },
          "contracts/config/SwitchboardCharlie.vy": {
            "content": "#        ______   __     __   __   ______  ______   __  __   ______   ______   ______   ______   _____    \n#       /\\  ___\\ /\\ \\  _ \\ \\ /\\ \\ /\\__  _\\/\\  ___\\ /\\ \\_\\ \\ /\\  == \\ /\\  __ \\ /\\  __ \\ /\\  == \\ /\\  __-.  \n#       \\ \\___  \\\\ \\ \\/ \".\\ \\\\ \\ \\\\/_/\\ \\/\\ \\ \\____\\ \\  __ \\\\ \\  __< \\ \\ \\/\\ \\\\ \\  __ \\\\ \\  __< \\ \\ \\/\\ \\ \n#        \\/\\_____\\\\ \\__/\".~\\_\\\\ \\_\\  \\ \\_\\ \\ \\_____\\\\ \\_\\ \\_\\\\ \\_____\\\\ \\_____\\\\ \\_\\ \\_\\\\ \\_\\ \\_\\\\ \\____- \n#         \\/_____/ \\/_/   \\/_/ \\/_/   \\/_/  \\/_____/ \\/_/\\/_/ \\/_____/ \\/_____/ \\/_/\\/_/ \\/_/ /_/ \\/____/ \n#                                                    \u250f\u2513\u2513     \u2513\u2022  \n#                                                    \u2503 \u2523\u2513\u250f\u2513\u250f\u2513\u2503\u2513\u250f\u2513\n#                                                    \u2517\u251b\u251b\u2517\u2517\u253b\u251b \u2517\u2517\u2517 \n#\n#     Underscore Protocol License: https://github.com/underscore-finance/underscore-protocol/blob/master/LICENSE.md\n\n# @version 0.4.3\n\nexports: addys.__interface__\nexports: gov.__interface__\nexports: timeLock.__interface__\n\ninitializes: addys\ninitializes: gov\ninitializes: timeLock[gov := gov]\n\nimport contracts.modules.Addys as addys\nimport contracts.modules.LocalGov as gov\nimport contracts.modules.TimeLock as timeLock\n\nfrom interfaces import LegoStructs as ls\nfrom ethereum.ercs import IERC4626\n\ninterface VaultRegistry:\n    def setApprovedVaultToken(_vaultAddr: address, _vaultToken: address, _isApproved: bool): nonpayable\n    def setDefaultTargetVaultToken(_vaultAddr: address, _targetVaultToken: address): nonpayable\n    def setMaxDepositAmount(_vaultAddr: address, _maxDepositAmount: uint256): nonpayable\n    def setShouldAutoDeposit(_vaultAddr: address, _shouldAutoDeposit: bool): nonpayable\n    def isApprovedVaultToken(_vaultAddr: address, _vaultToken: address) -> bool: view\n    def setPerformanceFee(_vaultAddr: address, _performanceFee: uint256): nonpayable\n    def setMinYieldWithdrawAmount(_vaultAddr: address, _amount: uint256): nonpayable\n    def setRedemptionBuffer(_vaultAddr: address, _buffer: uint256): nonpayable\n    def setVaultOpsFrozen(_vaultAddr: address, _isFrozen: bool): nonpayable\n    def setCanWithdraw(_vaultAddr: address, _canWithdraw: bool): nonpayable\n    def setCanDeposit(_vaultAddr: address, _canDeposit: bool): nonpayable\n    def isValidPerformanceFee(_performanceFee: uint256) -> bool: view\n    def isValidRedemptionBuffer(_buffer: uint256) -> bool: view\n    def isValidVaultToken(_vaultToken: address) -> bool: view\n    def isEarnVault(_vaultAddr: address) -> bool: view\n\ninterface LevgVault:\n    def setCollateralVault(_vaultToken: address, _ripeVaultId: uint256, _legoId: uint256): nonpayable\n    def setLeverageVault(_vaultToken: address, _legoId: uint256, _ripeVaultId: uint256): nonpayable\n    def setUsdcSlippageAllowed(_slippage: uint256): nonpayable\n    def setGreenSlippageAllowed(_slippage: uint256): nonpayable\n    def setLevgVaultHelper(_levgVaultHelper: address): nonpayable\n    def setMaxDebtRatio(_ratio: uint256): nonpayable\n    def addManager(_manager: address): nonpayable\n    def removeManager(_manager: address): nonpayable\n    def levgVaultHelper() -> address: view\n    def USDC() -> address: view\n\ninterface YieldLego:\n    def setSnapShotPriceConfig(_config: ls.SnapShotPriceConfig): nonpayable\n    def isValidPriceConfig(_config: ls.SnapShotPriceConfig) -> bool: view\n\ninterface LevgVaultHelper:\n    def isValidVaultToken(_underlyingAsset: address, _vaultToken: address, _ripeVaultId: uint256, _legoId: uint256) -> bool: view\n\ninterface MissionControl:\n    def canPerformSecurityAction(_signer: address) -> bool: view\n\ninterface Registry:\n    def getAddr(_regId: uint256) -> address: view\n\nflag ActionType:\n    REDEMPTION_BUFFER\n    MIN_YIELD_WITHDRAW_AMOUNT\n    SNAPSHOT_PRICE_CONFIG\n    APPROVED_VAULT_TOKEN\n    PERFORMANCE_FEE\n    DEFAULT_TARGET_VAULT_TOKEN\n    MAX_DEPOSIT_AMOUNT\n    COLLATERAL_VAULT\n    LEVERAGE_VAULT\n    USDC_SLIPPAGE\n    GREEN_SLIPPAGE\n    LEVG_VAULT_HELPER\n    MAX_DEBT_RATIO\n    ADD_MANAGER\n    REMOVE_MANAGER\n\nstruct PendingRedemptionBuffer:\n    vaultAddr: address\n    buffer: uint256\n\nstruct PendingMinYieldWithdrawAmount:\n    vaultAddr: address\n    amount: uint256\n\nstruct PendingSnapShotPriceConfig:\n    legoId: uint256\n    config: ls.SnapShotPriceConfig\n\nstruct PendingApprovedVaultToken:\n    vaultAddr: address\n    vaultToken: address\n    isApproved: bool\n\nstruct PendingPerformanceFee:\n    vaultAddr: address\n    performanceFee: uint256\n\nstruct PendingDefaultTargetVaultToken:\n    vaultAddr: address\n    targetVaultToken: address\n\nstruct PendingMaxDepositAmount:\n    vaultAddr: address\n    maxDepositAmount: uint256\n\nstruct PendingCollateralVault:\n    vaultAddr: address\n    vaultToken: address\n    ripeVaultId: uint256\n    legoId: uint256\n\nstruct PendingLeverageVault:\n    vaultAddr: address\n    vaultToken: address\n    legoId: uint256\n    ripeVaultId: uint256\n\nstruct PendingUsdcSlippage:\n    vaultAddr: address\n    slippage: uint256\n\nstruct PendingGreenSlippage:\n    vaultAddr: address\n    slippage: uint256\n\nstruct PendingLevgVaultHelper:\n    vaultAddr: address\n    levgVaultHelper: address\n\nstruct PendingMaxDebtRatio:\n    vaultAddr: address\n    ratio: uint256\n\nstruct PendingAddManager:\n    vaultAddr: address\n    manager: address\n\nstruct PendingRemoveManager:\n    vaultAddr: address\n    manager: address\n\nevent PendingRedemptionBufferChange:\n    vaultAddr: indexed(address)\n    buffer: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent RedemptionBufferSet:\n    vaultAddr: indexed(address)\n    buffer: uint256\n\nevent PendingMinYieldWithdrawAmountChange:\n    vaultAddr: indexed(address)\n    amount: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent MinYieldWithdrawAmountSet:\n    vaultAddr: indexed(address)\n    amount: uint256\n\nevent PendingSnapShotPriceConfigChange:\n    legoId: indexed(uint256)\n    minSnapshotDelay: uint256\n    maxNumSnapshots: uint256\n    maxUpsideDeviation: uint256\n    staleTime: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent SnapShotPriceConfigSet:\n    legoId: indexed(uint256)\n    legoAddr: indexed(address)\n    minSnapshotDelay: uint256\n    maxNumSnapshots: uint256\n    maxUpsideDeviation: uint256\n    staleTime: uint256\n\nevent PendingApprovedVaultTokenChange:\n    vaultAddr: indexed(address)\n    vaultToken: indexed(address)\n    isApproved: bool\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent ApprovedVaultTokenSet:\n    vaultAddr: indexed(address)\n    vaultToken: indexed(address)\n    isApproved: bool\n\nevent PendingPerformanceFeeChange:\n    vaultAddr: indexed(address)\n    performanceFee: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent PerformanceFeeSet:\n    vaultAddr: indexed(address)\n    performanceFee: uint256\n\nevent PendingDefaultTargetVaultTokenChange:\n    vaultAddr: indexed(address)\n    targetVaultToken: indexed(address)\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent DefaultTargetVaultTokenSet:\n    vaultAddr: indexed(address)\n    targetVaultToken: indexed(address)\n\nevent PendingMaxDepositAmountChange:\n    vaultAddr: indexed(address)\n    maxDepositAmount: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent MaxDepositAmountSet:\n    vaultAddr: indexed(address)\n    maxDepositAmount: uint256\n\nevent CanDepositSet:\n    vaultAddr: indexed(address)\n    canDeposit: bool\n    caller: indexed(address)\n\nevent CanWithdrawSet:\n    vaultAddr: indexed(address)\n    canWithdraw: bool\n    caller: indexed(address)\n\nevent VaultOpsFrozenSet:\n    vaultAddr: indexed(address)\n    isFrozen: bool\n    caller: indexed(address)\n\nevent ShouldAutoDepositSet:\n    vaultAddr: indexed(address)\n    shouldAutoDeposit: bool\n    caller: indexed(address)\n\nevent PendingCollateralVaultChange:\n    vaultAddr: indexed(address)\n    vaultToken: indexed(address)\n    ripeVaultId: uint256\n    legoId: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent CollateralVaultSet:\n    vaultAddr: indexed(address)\n    vaultToken: indexed(address)\n    ripeVaultId: uint256\n    legoId: uint256\n\nevent PendingLeverageVaultChange:\n    vaultAddr: indexed(address)\n    vaultToken: indexed(address)\n    legoId: uint256\n    ripeVaultId: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent LeverageVaultSet:\n    vaultAddr: indexed(address)\n    vaultToken: indexed(address)\n    legoId: uint256\n    ripeVaultId: uint256\n\nevent PendingUsdcSlippageChange:\n    vaultAddr: indexed(address)\n    slippage: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent UsdcSlippageSet:\n    vaultAddr: indexed(address)\n    slippage: uint256\n\nevent PendingGreenSlippageChange:\n    vaultAddr: indexed(address)\n    slippage: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent GreenSlippageSet:\n    vaultAddr: indexed(address)\n    slippage: uint256\n\nevent PendingLevgVaultHelperChange:\n    vaultAddr: indexed(address)\n    levgVaultHelper: indexed(address)\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent LevgVaultHelperSet:\n    vaultAddr: indexed(address)\n    levgVaultHelper: indexed(address)\n\nevent PendingMaxDebtRatioChange:\n    vaultAddr: indexed(address)\n    ratio: uint256\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent MaxDebtRatioSet:\n    vaultAddr: indexed(address)\n    ratio: uint256\n\nevent PendingAddManagerChange:\n    vaultAddr: indexed(address)\n    manager: indexed(address)\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent ManagerAdded:\n    vaultAddr: indexed(address)\n    manager: indexed(address)\n\nevent PendingRemoveManagerChange:\n    vaultAddr: indexed(address)\n    manager: indexed(address)\n    confirmationBlock: uint256\n    actionId: uint256\n\nevent ManagerRemoved:\n    vaultAddr: indexed(address)\n    manager: indexed(address)\n\n# pending config changes\nactionType: public(HashMap[uint256, ActionType]) # aid -> type\npendingRedemptionBuffer: public(HashMap[uint256, PendingRedemptionBuffer]) # aid -> config\npendingMinYieldWithdrawAmount: public(HashMap[uint256, PendingMinYieldWithdrawAmount]) # aid -> config\npendingSnapShotPriceConfig: public(HashMap[uint256, PendingSnapShotPriceConfig]) # aid -> config\npendingApprovedVaultToken: public(HashMap[uint256, PendingApprovedVaultToken]) # aid -> config\npendingPerformanceFee: public(HashMap[uint256, PendingPerformanceFee]) # aid -> config\npendingDefaultTargetVaultToken: public(HashMap[uint256, PendingDefaultTargetVaultToken]) # aid -> config\npendingMaxDepositAmount: public(HashMap[uint256, PendingMaxDepositAmount]) # aid -> config\npendingCollateralVault: public(HashMap[uint256, PendingCollateralVault]) # aid -> config\npendingLeverageVault: public(HashMap[uint256, PendingLeverageVault]) # aid -> config\npendingUsdcSlippage: public(HashMap[uint256, PendingUsdcSlippage]) # aid -> config\npendingGreenSlippage: public(HashMap[uint256, PendingGreenSlippage]) # aid -> config\npendingLevgVaultHelper: public(HashMap[uint256, PendingLevgVaultHelper]) # aid -> config\npendingMaxDebtRatio: public(HashMap[uint256, PendingMaxDebtRatio]) # aid -> config\npendingAddManager: public(HashMap[uint256, PendingAddManager]) # aid -> config\npendingRemoveManager: public(HashMap[uint256, PendingRemoveManager]) # aid -> config\n\n\n@deploy\ndef __init__(\n    _undyHq: address,\n    _tempGov: address,\n    _minConfigTimeLock: uint256,\n    _maxConfigTimeLock: uint256,\n):\n    addys.__init__(_undyHq)\n    gov.__init__(_undyHq, _tempGov, 0, 0, 0)\n    timeLock.__init__(_minConfigTimeLock, _maxConfigTimeLock, 0, _maxConfigTimeLock)\n\n\n# access control\n\n\n@view\n@internal\ndef _hasPermsToFreeze(_caller: address, _shouldFreeze: bool) -> bool:\n    if gov._canGovern(_caller):\n        return True\n    if _shouldFreeze:\n        return staticcall MissionControl(addys._getMissionControlAddr()).canPerformSecurityAction(_caller)\n    return False\n\n\n#####################\n# Immediate Actions #\n#####################\n\n\n# can deposit\n\n\n@external\ndef setCanDeposit(_vaultAddr: address, _canDeposit: bool):\n    assert self._hasPermsToFreeze(msg.sender, not _canDeposit) # dev: no perms\n    extcall VaultRegistry(addys._getVaultRegistryAddr()).setCanDeposit(_vaultAddr, _canDeposit)\n    log CanDepositSet(vaultAddr=_vaultAddr, canDeposit=_canDeposit, caller=msg.sender)\n\n\n# can withdraw\n\n\n@external\ndef setCanWithdraw(_vaultAddr: address, _canWithdraw: bool):\n    assert self._hasPermsToFreeze(msg.sender, not _canWithdraw) # dev: no perms\n    extcall VaultRegistry(addys._getVaultRegistryAddr()).setCanWithdraw(_vaultAddr, _canWithdraw)\n    log CanWithdrawSet(vaultAddr=_vaultAddr, canWithdraw=_canWithdraw, caller=msg.sender)\n\n\n# vault ops frozen\n\n\n@external\ndef setVaultOpsFrozen(_vaultAddr: address, _isFrozen: bool):\n    assert self._hasPermsToFreeze(msg.sender, _isFrozen) # dev: no perms\n    extcall VaultRegistry(addys._getVaultRegistryAddr()).setVaultOpsFrozen(_vaultAddr, _isFrozen)\n    log VaultOpsFrozenSet(vaultAddr=_vaultAddr, isFrozen=_isFrozen, caller=msg.sender)\n\n\n# should auto deposit\n\n\n@external\ndef setShouldAutoDeposit(_vaultAddr: address, _shouldAutoDeposit: bool):\n    assert self._hasPermsToFreeze(msg.sender, not _shouldAutoDeposit) # dev: no perms\n    extcall VaultRegistry(addys._getVaultRegistryAddr()).setShouldAutoDeposit(_vaultAddr, _shouldAutoDeposit)\n    log ShouldAutoDepositSet(vaultAddr=_vaultAddr, shouldAutoDeposit=_shouldAutoDeposit, caller=msg.sender)\n\n\n##############\n# Timelocked #\n##############\n\n\n# redemption buffer\n\n\n@external\ndef setRedemptionBuffer(_vaultAddr: address, _buffer: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    vr: address = addys._getVaultRegistryAddr()\n    assert staticcall VaultRegistry(vr).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert staticcall VaultRegistry(vr).isValidRedemptionBuffer(_buffer) # dev: invalid redemption buffer\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.REDEMPTION_BUFFER\n    self.pendingRedemptionBuffer[aid] = PendingRedemptionBuffer(\n        vaultAddr=_vaultAddr,\n        buffer=_buffer\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingRedemptionBufferChange(\n        vaultAddr=_vaultAddr,\n        buffer=_buffer,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# min yield withdraw amount\n\n\n@external\ndef setMinYieldWithdrawAmount(_vaultAddr: address, _amount: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.MIN_YIELD_WITHDRAW_AMOUNT\n    self.pendingMinYieldWithdrawAmount[aid] = PendingMinYieldWithdrawAmount(\n        vaultAddr=_vaultAddr,\n        amount=_amount\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingMinYieldWithdrawAmountChange(\n        vaultAddr=_vaultAddr,\n        amount=_amount,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# snapshot price config\n\n\n@external\ndef setSnapShotPriceConfig(\n    _legoId: uint256,\n    _minSnapshotDelay: uint256,\n    _maxNumSnapshots: uint256,\n    _maxUpsideDeviation: uint256,\n    _staleTime: uint256,\n) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    # validation - get lego address from lego book\n    legoBook: address = addys._getLegoBookAddr()\n    legoAddr: address = staticcall Registry(legoBook).getAddr(_legoId)\n    assert legoAddr != empty(address) # dev: invalid lego id\n\n    config: ls.SnapShotPriceConfig = ls.SnapShotPriceConfig(\n        minSnapshotDelay=_minSnapshotDelay,\n        maxNumSnapshots=_maxNumSnapshots,\n        maxUpsideDeviation=_maxUpsideDeviation,\n        staleTime=_staleTime,\n    )\n    assert staticcall YieldLego(legoAddr).isValidPriceConfig(config) # dev: invalid price config\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.SNAPSHOT_PRICE_CONFIG\n    self.pendingSnapShotPriceConfig[aid] = PendingSnapShotPriceConfig(\n        legoId=_legoId,\n        config=config\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingSnapShotPriceConfigChange(\n        legoId=_legoId,\n        minSnapshotDelay=config.minSnapshotDelay,\n        maxNumSnapshots=config.maxNumSnapshots,\n        maxUpsideDeviation=config.maxUpsideDeviation,\n        staleTime=config.staleTime,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# approved vault token\n\n\n@external\ndef setApprovedVaultToken(_vaultAddr: address, _vaultToken: address, _isApproved: bool) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    vr: address = addys._getVaultRegistryAddr()\n    assert staticcall VaultRegistry(vr).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert staticcall VaultRegistry(vr).isValidVaultToken(_vaultToken) # dev: invalid vault token\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.APPROVED_VAULT_TOKEN\n    self.pendingApprovedVaultToken[aid] = PendingApprovedVaultToken(\n        vaultAddr=_vaultAddr,\n        vaultToken=_vaultToken,\n        isApproved=_isApproved\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingApprovedVaultTokenChange(\n        vaultAddr=_vaultAddr,\n        vaultToken=_vaultToken,\n        isApproved=_isApproved,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# performance fee\n\n\n@external\ndef setPerformanceFee(_vaultAddr: address, _performanceFee: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    vr: address = addys._getVaultRegistryAddr()\n    assert staticcall VaultRegistry(vr).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert staticcall VaultRegistry(vr).isValidPerformanceFee(_performanceFee) # dev: invalid performance fee\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.PERFORMANCE_FEE\n    self.pendingPerformanceFee[aid] = PendingPerformanceFee(\n        vaultAddr=_vaultAddr,\n        performanceFee=_performanceFee\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingPerformanceFeeChange(\n        vaultAddr=_vaultAddr,\n        performanceFee=_performanceFee,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# default target vault token\n\n\n@external\ndef setDefaultTargetVaultToken(_vaultAddr: address, _targetVaultToken: address) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    vr: address = addys._getVaultRegistryAddr()\n    assert staticcall VaultRegistry(vr).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert not staticcall VaultRegistry(vr).isApprovedVaultToken(_vaultAddr, _targetVaultToken) # dev: vault token already approved\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.DEFAULT_TARGET_VAULT_TOKEN\n    self.pendingDefaultTargetVaultToken[aid] = PendingDefaultTargetVaultToken(\n        vaultAddr=_vaultAddr,\n        targetVaultToken=_targetVaultToken\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingDefaultTargetVaultTokenChange(\n        vaultAddr=_vaultAddr,\n        targetVaultToken=_targetVaultToken,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# max deposit amount\n\n\n@external\ndef setMaxDepositAmount(_vaultAddr: address, _maxDepositAmount: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    vr: address = addys._getVaultRegistryAddr()\n    assert staticcall VaultRegistry(vr).isEarnVault(_vaultAddr) # dev: invalid vault addr\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.MAX_DEPOSIT_AMOUNT\n    self.pendingMaxDepositAmount[aid] = PendingMaxDepositAmount(\n        vaultAddr=_vaultAddr,\n        maxDepositAmount=_maxDepositAmount\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingMaxDepositAmountChange(\n        vaultAddr=_vaultAddr,\n        maxDepositAmount=_maxDepositAmount,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# collateral vault\n\n\n@external\ndef setCollateralVault(_vaultAddr: address, _vaultToken: address, _ripeVaultId: uint256, _legoId: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    vr: address = addys._getVaultRegistryAddr()\n    assert staticcall VaultRegistry(vr).isEarnVault(_vaultAddr) # dev: invalid vault addr\n\n    # validate vault token if not empty\n    if _vaultToken != empty(address):\n        helper: address = staticcall LevgVault(_vaultAddr).levgVaultHelper()\n        underlyingAsset: address = staticcall IERC4626(_vaultAddr).asset()\n        assert staticcall LevgVaultHelper(helper).isValidVaultToken(underlyingAsset, _vaultToken, _ripeVaultId, _legoId) # dev: invalid collateral vault token\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.COLLATERAL_VAULT\n    self.pendingCollateralVault[aid] = PendingCollateralVault(\n        vaultAddr=_vaultAddr,\n        vaultToken=_vaultToken,\n        ripeVaultId=_ripeVaultId,\n        legoId=_legoId\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingCollateralVaultChange(\n        vaultAddr=_vaultAddr,\n        vaultToken=_vaultToken,\n        ripeVaultId=_ripeVaultId,\n        legoId=_legoId,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# leverage vault\n\n\n@external\ndef setLeverageVault(_vaultAddr: address, _vaultToken: address, _legoId: uint256, _ripeVaultId: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    vr: address = addys._getVaultRegistryAddr()\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n\n    # validate vault token\n    helper: address = staticcall LevgVault(_vaultAddr).levgVaultHelper()\n    usdc: address = staticcall LevgVault(_vaultAddr).USDC()\n    assert staticcall LevgVaultHelper(helper).isValidVaultToken(usdc, _vaultToken, _ripeVaultId, _legoId) # dev: invalid leverage vault token\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.LEVERAGE_VAULT\n    self.pendingLeverageVault[aid] = PendingLeverageVault(\n        vaultAddr=_vaultAddr,\n        vaultToken=_vaultToken,\n        legoId=_legoId,\n        ripeVaultId=_ripeVaultId\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingLeverageVaultChange(\n        vaultAddr=_vaultAddr,\n        vaultToken=_vaultToken,\n        legoId=_legoId,\n        ripeVaultId=_ripeVaultId,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# usdc slippage\n\n\n@external\ndef setUsdcSlippageAllowed(_vaultAddr: address, _slippage: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert _slippage <= 10_00 # dev: slippage too high (max 10%)\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.USDC_SLIPPAGE\n    self.pendingUsdcSlippage[aid] = PendingUsdcSlippage(\n        vaultAddr=_vaultAddr,\n        slippage=_slippage\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingUsdcSlippageChange(\n        vaultAddr=_vaultAddr,\n        slippage=_slippage,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# green slippage\n\n\n@external\ndef setGreenSlippageAllowed(_vaultAddr: address, _slippage: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert _slippage <= 10_00 # dev: slippage too high (max 10%)\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.GREEN_SLIPPAGE\n    self.pendingGreenSlippage[aid] = PendingGreenSlippage(\n        vaultAddr=_vaultAddr,\n        slippage=_slippage\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingGreenSlippageChange(\n        vaultAddr=_vaultAddr,\n        slippage=_slippage,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# levg vault helper\n\n\n@external\ndef setLevgVaultHelper(_vaultAddr: address, _levgVaultHelper: address) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert _levgVaultHelper != empty(address) # dev: invalid helper address\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.LEVG_VAULT_HELPER\n    self.pendingLevgVaultHelper[aid] = PendingLevgVaultHelper(\n        vaultAddr=_vaultAddr,\n        levgVaultHelper=_levgVaultHelper\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingLevgVaultHelperChange(\n        vaultAddr=_vaultAddr,\n        levgVaultHelper=_levgVaultHelper,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# max debt ratio\n\n\n@external\ndef setMaxDebtRatio(_vaultAddr: address, _ratio: uint256) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n    assert _ratio <= 100_00 # dev: ratio too high (max 100%)\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.MAX_DEBT_RATIO\n    self.pendingMaxDebtRatio[aid] = PendingMaxDebtRatio(\n        vaultAddr=_vaultAddr,\n        ratio=_ratio\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingMaxDebtRatioChange(\n        vaultAddr=_vaultAddr,\n        ratio=_ratio,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# add manager\n\n\n@external\ndef addVaultManager(_vaultAddr: address, _manager: address) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.ADD_MANAGER\n    self.pendingAddManager[aid] = PendingAddManager(\n        vaultAddr=_vaultAddr,\n        manager=_manager\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingAddManagerChange(\n        vaultAddr=_vaultAddr,\n        manager=_manager,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n# remove manager\n\n\n@external\ndef removeVaultManager(_vaultAddr: address, _manager: address) -> uint256:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    assert staticcall VaultRegistry(addys._getVaultRegistryAddr()).isEarnVault(_vaultAddr) # dev: invalid vault addr\n\n    aid: uint256 = timeLock._initiateAction()\n    self.actionType[aid] = ActionType.REMOVE_MANAGER\n    self.pendingRemoveManager[aid] = PendingRemoveManager(\n        vaultAddr=_vaultAddr,\n        manager=_manager\n    )\n    confirmationBlock: uint256 = timeLock._getActionConfirmationBlock(aid)\n    log PendingRemoveManagerChange(\n        vaultAddr=_vaultAddr,\n        manager=_manager,\n        confirmationBlock=confirmationBlock,\n        actionId=aid\n    )\n    return aid\n\n\n#############\n# Execution #\n#############\n\n\n@external\ndef executePendingAction(_aid: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n\n    # check time lock\n    if not timeLock._confirmAction(_aid):\n        if timeLock._isExpired(_aid):\n            self._cancelPendingAction(_aid)\n        return False\n\n    actionType: ActionType = self.actionType[_aid]\n    vr: address = addys._getVaultRegistryAddr()\n\n    if actionType == ActionType.REDEMPTION_BUFFER:\n        p: PendingRedemptionBuffer = self.pendingRedemptionBuffer[_aid]\n        extcall VaultRegistry(vr).setRedemptionBuffer(p.vaultAddr, p.buffer)\n        log RedemptionBufferSet(vaultAddr=p.vaultAddr, buffer=p.buffer)\n\n    elif actionType == ActionType.MIN_YIELD_WITHDRAW_AMOUNT:\n        p: PendingMinYieldWithdrawAmount = self.pendingMinYieldWithdrawAmount[_aid]\n        extcall VaultRegistry(vr).setMinYieldWithdrawAmount(p.vaultAddr, p.amount)\n        log MinYieldWithdrawAmountSet(vaultAddr=p.vaultAddr, amount=p.amount)\n\n    elif actionType == ActionType.SNAPSHOT_PRICE_CONFIG:\n        p: PendingSnapShotPriceConfig = self.pendingSnapShotPriceConfig[_aid]\n        # get lego address from lego book\n        legoBook: address = addys._getLegoBookAddr()\n        legoAddr: address = staticcall Registry(legoBook).getAddr(p.legoId)\n        # set config on the lego\n        extcall YieldLego(legoAddr).setSnapShotPriceConfig(p.config)\n        log SnapShotPriceConfigSet(\n            legoId=p.legoId,\n            legoAddr=legoAddr,\n            minSnapshotDelay=p.config.minSnapshotDelay,\n            maxNumSnapshots=p.config.maxNumSnapshots,\n            maxUpsideDeviation=p.config.maxUpsideDeviation,\n            staleTime=p.config.staleTime\n        )\n\n    elif actionType == ActionType.APPROVED_VAULT_TOKEN:\n        p: PendingApprovedVaultToken = self.pendingApprovedVaultToken[_aid]\n        extcall VaultRegistry(vr).setApprovedVaultToken(p.vaultAddr, p.vaultToken, p.isApproved)\n        log ApprovedVaultTokenSet(vaultAddr=p.vaultAddr, vaultToken=p.vaultToken, isApproved=p.isApproved)\n\n    elif actionType == ActionType.PERFORMANCE_FEE:\n        p: PendingPerformanceFee = self.pendingPerformanceFee[_aid]\n        extcall VaultRegistry(vr).setPerformanceFee(p.vaultAddr, p.performanceFee)\n        log PerformanceFeeSet(vaultAddr=p.vaultAddr, performanceFee=p.performanceFee)\n\n    elif actionType == ActionType.DEFAULT_TARGET_VAULT_TOKEN:\n        p: PendingDefaultTargetVaultToken = self.pendingDefaultTargetVaultToken[_aid]\n        extcall VaultRegistry(vr).setDefaultTargetVaultToken(p.vaultAddr, p.targetVaultToken)\n        log DefaultTargetVaultTokenSet(vaultAddr=p.vaultAddr, targetVaultToken=p.targetVaultToken)\n\n    elif actionType == ActionType.MAX_DEPOSIT_AMOUNT:\n        p: PendingMaxDepositAmount = self.pendingMaxDepositAmount[_aid]\n        extcall VaultRegistry(vr).setMaxDepositAmount(p.vaultAddr, p.maxDepositAmount)\n        log MaxDepositAmountSet(vaultAddr=p.vaultAddr, maxDepositAmount=p.maxDepositAmount)\n\n    elif actionType == ActionType.COLLATERAL_VAULT:\n        p: PendingCollateralVault = self.pendingCollateralVault[_aid]\n        extcall LevgVault(p.vaultAddr).setCollateralVault(p.vaultToken, p.ripeVaultId, p.legoId)\n        log CollateralVaultSet(vaultAddr=p.vaultAddr, vaultToken=p.vaultToken, ripeVaultId=p.ripeVaultId, legoId=p.legoId)\n\n    elif actionType == ActionType.LEVERAGE_VAULT:\n        p: PendingLeverageVault = self.pendingLeverageVault[_aid]\n        extcall LevgVault(p.vaultAddr).setLeverageVault(p.vaultToken, p.legoId, p.ripeVaultId)\n        log LeverageVaultSet(vaultAddr=p.vaultAddr, vaultToken=p.vaultToken, legoId=p.legoId, ripeVaultId=p.ripeVaultId)\n\n    elif actionType == ActionType.USDC_SLIPPAGE:\n        p: PendingUsdcSlippage = self.pendingUsdcSlippage[_aid]\n        extcall LevgVault(p.vaultAddr).setUsdcSlippageAllowed(p.slippage)\n        log UsdcSlippageSet(vaultAddr=p.vaultAddr, slippage=p.slippage)\n\n    elif actionType == ActionType.GREEN_SLIPPAGE:\n        p: PendingGreenSlippage = self.pendingGreenSlippage[_aid]\n        extcall LevgVault(p.vaultAddr).setGreenSlippageAllowed(p.slippage)\n        log GreenSlippageSet(vaultAddr=p.vaultAddr, slippage=p.slippage)\n\n    elif actionType == ActionType.LEVG_VAULT_HELPER:\n        p: PendingLevgVaultHelper = self.pendingLevgVaultHelper[_aid]\n        extcall LevgVault(p.vaultAddr).setLevgVaultHelper(p.levgVaultHelper)\n        log LevgVaultHelperSet(vaultAddr=p.vaultAddr, levgVaultHelper=p.levgVaultHelper)\n\n    elif actionType == ActionType.MAX_DEBT_RATIO:\n        p: PendingMaxDebtRatio = self.pendingMaxDebtRatio[_aid]\n        extcall LevgVault(p.vaultAddr).setMaxDebtRatio(p.ratio)\n        log MaxDebtRatioSet(vaultAddr=p.vaultAddr, ratio=p.ratio)\n\n    elif actionType == ActionType.ADD_MANAGER:\n        p: PendingAddManager = self.pendingAddManager[_aid]\n        extcall LevgVault(p.vaultAddr).addManager(p.manager)\n        log ManagerAdded(vaultAddr=p.vaultAddr, manager=p.manager)\n\n    elif actionType == ActionType.REMOVE_MANAGER:\n        p: PendingRemoveManager = self.pendingRemoveManager[_aid]\n        extcall LevgVault(p.vaultAddr).removeManager(p.manager)\n        log ManagerRemoved(vaultAddr=p.vaultAddr, manager=p.manager)\n\n    self.actionType[_aid] = empty(ActionType)\n    return True\n\n\n# cancel action\n\n\n@external\ndef cancelPendingAction(_aid: uint256) -> bool:\n    assert gov._canGovern(msg.sender) # dev: no perms\n    self._cancelPendingAction(_aid)\n    return True\n\n\n@internal\ndef _cancelPendingAction(_aid: uint256):\n    assert timeLock._cancelAction(_aid) # dev: cannot cancel action\n    self.actionType[_aid] = empty(ActionType)\n",
            "sha256sum": "2717e445bca257222943f2e3b4cb675671c1a6201f317d1f11680875c68302bf"
          }
        },
        "settings": {
          "outputSelection": {
            "contracts/config/SwitchboardCharlie.vy": ["*"]
          },
          "search_paths": ["."]
        },
        "compiler_version": "v0.4.3+commit.bff19ea2",
        "integrity": "388e91a3d313d40ba3bf12cdec57c365827c94925032458a5b3ca51235570fd8"
      },
      "args": "00000000000000000000000044cf3c4f000dfd76a35d03298049d37be688d6f900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e10000000000000000000000000000000000000000000000000000000000013c680",
      "file": "contracts/config/SwitchboardCharlie.vy"
    }
  }
}
